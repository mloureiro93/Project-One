(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[21],{"2rhI":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n("hvnN"),o=n.n(r),a=n("QJ2d"),i={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},c=function(e){return e.facebook_id?i.FACEBOOK:e.google_open_id_token?i.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?i.GOOGLE:e.email?i.EMAIL:i.OTHER},s=(o.a.shape({credentials:o.a.shape({}),userData:o.a.shape({}),type:o.a.oneOf(Object.values(i))}),function(e){return e in a.a.settings.MINIMUM_AGE_BY_EU_COUNTRY}),l=function(e){return a.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)}},"3nbW":function(e,t,n){"use strict";var r=n("f5ca"),o=n("oFGA"),a=n("/YZq"),i=n("ePT2"),c=n("PhUE"),s=n("QJ2d"),l=n("D+W/"),u=n("ggpB"),d=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[105,"FACEBOOK_ACCOUNT_NOT_LINKED"],[12,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[16,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[77,"INVALID_PASSWORD_FB_USER"],[78,"INVALID_PASSWORD_ERROR_CODE"],[79,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[83,"LOGIN_POLICY_VIOLATION_USER"],[85,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[93,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[8,"API_LIMIT_EXCEEDED_ERROR"],[9,"API_EVENT_BLOCKED_ERROR"],[19,"USER_IN_SAFE_MODE"],[84,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[85,"LOGIN_BAD_PASSWORD_ASK_RESET"],[1201,"LOGIN_MFA_REQUIRED"],[30,"LOGIN_USER_NOT_FOUND"],[88,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"]]);function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown_source",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var o=e.http_status===l.a.RESPONSE_CODE_TOO_MANY_REQUESTS?l.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code,a=o;d.has(o)&&(a=d.get(o));var i=t.container;r?Object(u.a)("unauth_web_client_cctld_login_api_error.".concat(String(a),".").concat(i||"unknow_container",".").concat(n)):Object(u.a)("unauth_web_client_login_api_error.".concat(String(a),".").concat(i||"unknow_container",".").concat(n))}}var f=n("DU5A"),m=n("2rhI"),h=n("HLgS");function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=a.a.getLogger("UserLogin"),_=a.a.getLogger("AuthHandshake"),w=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?m.a.FACEBOOK:e.google_open_id_token?m.a.GOOGLE_ONE_TAP:e.gplus_id_token?m.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?m.a.EMAIL:m.a.OTHER},v=function(e,t){var n="referrer_unknown";try{var r=document.referrer;n=r?r.indexOf("/t.co/")>-1?"twitter":r.indexOf("google.")>-1?"google":r.indexOf("bing.")>-1?"bing":r.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(l){}var o=w(e),a=t===Object(t)?t.hybridTier:"tier_unknown",i=t===Object(t)?t.container:"container_unknown";Object(u.a)("login.referrer."+n+"."+o),Object(u.a)("login.container."+i+"."+o),Object(u.a)("login.type."+o);var c=w(e)||"method_unknown",s=t.page||"page_unknown";e.gplus_autologin?Object(u.a)("web_autologin_google"):e.facebook_autologin?Object(u.a)("web_autologin_facebook"):Object(u.a)("web_login.".concat(c,".success.").concat(s,".").concat(i,".").concat(n,".").concat(a))},S=function(e,t){Object(u.a)("web_cross_domain_login.".concat(e,".").concat(w(t)))},x=function(e){return!e.mfa_resend&&!!e.username_or_email},E=function(e,t){return S("attempt",e),r.default.loginUser(e).then((function(n){if(n&&n.data){S("success_with_token",e);var o=n.data;return r.default.exchangeTokenAndSetSession(o).then((function(n){return S("success_token_exchanged",e),v(e,t),_.debug("Cross domain login successful"),Promise.resolve()}),(function(t){throw S("success_token_not_exchanged",e),_.error("Failed to set session for current user; "+t.message),t}))}throw S("success_without_token",e),_.error("No custom access token in cross domain login response"),new Error}),(function(n){throw S("failure",e),p(n,t,w(e),!0),_.error("Failed to login user; "+n.message),n}))};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]),r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(x(e)){var l=s.a.settings.CORS_HANDSHAKE_DOMAINS;if(-1!==l.indexOf(o.a.instance.origin))return E(e,t)}e.switch_account&&(e.get_user=!!n||e.get_user);var u=n?null:c.b.localStorage.getItem("visitedPagesBeforeLogin"),d=g({},e,{app_type_from_client:5,visited_pages_before_login:u?JSON.stringify(u):null,recaptchaToken:r,tokenV3:a}),m=i.a.create("UserSessionResource",d),b={showError:!1,async:!0};return m.callCreate(b).then((function(n){return y.debug("Login, successful",n),v(e,t),Object(f.g)(!1),Object(h.a)("login").then((function(){return n}))}),(function(n){return p(n,t,w(e)),Promise.reject(n)}))}},"73jm":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("hvnN"),o={login:"login",loginMfa:"loginMfa",signup:"signup",personalizedLogin:"personalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",FBEmailCollection:"FBEmailCollection",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist"},a={login:"login",loginMfa:"loginMfa",signup:"signup",signupOrPersonalizedLogin:"signupOrPersonalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist",FBEmailCollection:"FBEmailCollection",respondMessage:"respondMessage"},i={boardPage:"boardPage",boardInvite:"boardInvite",defaultSource:"defaultSource",homePage:"homePage",mwebDefaultSource:"mwebDefaultSource",invite:"invite",login:"login",userFollow:"userFollow",userProfilePage:"userProfilePage",saveButton:"saveButton",actionButton:"actionButton",signupButton:"signupButton",personalizedFlyout:"personalizedFlyout",navigateBoard:"navigateBoard",navigatePin:"navigatePin",navigateInterest:"navigateInterest",unauthHeader:"unauthHeader",unauthBanner:"unauthBanner",giftWrap:"giftWrap",loginMfa:"loginMfa"};n.n(r).a.oneOf([i.boardPage,i.boardInvite,i.defaultSource,i.giftWrap,i.homePage,i.invite,i.login,i.mwebDefaultSource,i.navigateBoard,i.navigatePin,i.navigateInterest,i.saveButton,i.signupButton,i.unauthBanner,i.unauthHeader,i.userFollow,i.userProfilePage])},"8Hll":function(e,t,n){"use strict";function r(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return r}))},DU5A:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n("WQSK"),o=n("PhUE"),a=n("2cJX");function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";arguments.length>3&&arguments[3],arguments.length>4&&arguments[4];return t?a.a.tier1:n&&n.includes("yahoo.co.jp")&&"JP"===e?a.a.tier1:e?(e=e||"",a.e.has(e)?a.a.tier1:a.g.has(e)?a.a.tier2:a.a.tier3):a.a.tier1}function c(){r.b("hasBeenShownLoginModalInOpen","true",a.c)}function s(e){o.b.sessionStorage.setItem("uimb",!!e)}function l(){return o.b.sessionStorage.getItem("uimb")||!1}function u(e){return void 0!==e&&o.b.sessionStorage.setItem("mdfu",e),o.b.sessionStorage.getItem("mdfu")||0}function d(e){o.b.localStorage.setItem("uoiou",!!e)}function p(){return o.b.localStorage.getItem("uoiou")||!1}function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p()||!e&&l()}},IItM:function(e,t,n){"use strict";t.a={ACCOUNT_SWITCHER_FLYOUT:"account_switcher_flyout",ACCOUNT_SWITCHER_MODAL:"account_switcher_modal",ACCOUNT_RECOVERY:"account_recovery",BOARD_INVITE:"board_invite",CLOSEUP:"closeup",CLOSEUP_BANNER:"closeup_banner",FOLLOW_BUTTON:"followbtn",GOOGLE_ONE_TAP:"google_one_tap_modal",LOGIN_PAGE:"login_page",INSPIRED_BANNER:"inspired_banner",MFA_LOGIN_PAGE:"mfa_login_page",HYBRID_CLICKTHROUGH:"hybrid_clickthrough",HYBRID_BANNER:"hybrid_banner",PIN_GRID:"pin_grid",PIN_IMAGE:"pin_image",RESPONSE_FLYOUT:"response_flyout",UNAUTH_BANNER:"unauth_banner",UNAUTH_HEADER:"unauth_header"}},KOHj:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("+U6O"),i=function(e){if(e.viewerId===e.account.id)return null;var t=e.account.imageMediumUrl&&!e.account.imageMediumUrl.includes("static/images/user/default");return o.a.createElement(a.c,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},o.a.createElement(a.c,{paddingX:1},o.a.createElement(a.a,{name:e.account.fullName||e.account.username,src:t?e.account.imageMediumUrl:"",size:e.large?"lg":"md"})),o.a.createElement(a.c,{marginLeft:3,flex:"grow"},o.a.createElement(a.K,{bold:!0,color:"darkGray",size:"md",truncate:!0},e.account.fullName||e.account.username),e.account.email&&o.a.createElement(a.K,{color:"darkGray",size:"md",truncate:!0},e.account.email)))},c=n("rBws"),s=function(e){var t=Object.keys(e.accounts).length;return o.a.createElement(a.c,{position:"relative"},o.a.createElement(a.c,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),o.a.createElement("ul",null,Object.keys(e.accounts).map((function(t){var n=e.accounts[t];return o.a.createElement("li",{key:t},o.a.createElement(a.P,{onTouch:function(){return e.onClick(n)}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},o.a.createElement(i,{account:n}))))}))))},l=n("IItM"),u=n("Fpqi"),d=n("Qo1m"),p=n("V0Gb"),f=n("3nbW"),m=n("iJ35"),h=n("ePT2"),g=n("QJ2d"),b=n("lglE"),y=n("+H5w"),_=n("UmN8"),w=n("k9eC"),v=n("lixz"),S=n("NmcB"),x=n("Y2BC"),E=n("rlRx");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(){var e,n,r,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,p=new Array(s),x=0;x<s;x++)p[x]=arguments[x];return r=this,c=(e=C(t)).call.apply(e,[this].concat(p)),n=!c||"object"!==O(c)&&"function"!=typeof c?T(r):c,I(T(T(n)),"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),I(T(T(n)),"handleAddAccount",(function(){Object(E.k)("add_account_click",null,n.props.container),n.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&n.props.showLogin?n.props.showLogin():n.setState({showLoginModal:!0})})),I(T(T(n)),"trackProfileNavigateClick",(function(e){Object(v.g)(14),Object(E.k)("current_profile_".concat(e,"_click"),null,n.props.container)})),I(T(T(n)),"handleSwitch",(function(e){var t=n.props,r=t.container,o=t.requestContext,a=e.partner&&e.partner.is_create;n.setState({isLoading:!0}),Object(S.a)(101,{component:13369,element:11196}),Object(E.k)("switch_account_click",{destination_user_id:e.id},r);var i={get_user:!0,switch_account:e.id};u.a.getInstance().pauseImpressionsAndFlush(),Object(f.a)(i,{container:"account_switcher"},null,!0).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.resource_response&&t.resource_response.data&&t.resource_response.data.success){var i=new w.b(o,"web_pro_mode_header"),c=i.check("enabled_full_width")||i.check("enabled_full_width_employees"),s=a?"/":"/".concat(e.username);c&&(s="".concat(g.a.settings.CANONICAL_MAIN_URL,"/").concat(e.username,"/"),a&&(s=g.a.settings.CANONICAL_MAIN_URL)),Object(E.g)(s,e.id,r)}else Object(E.f)(e.id,r),n.setState({failedAccount:e,isLoading:!1})}),(function(t){throw Object(E.f)(e.id,r),n.setState({isLoading:!1}),t}))})),I(T(T(n)),"handleLinkedAccountSwitch",(function(e){var t=n.props,r=t.container,o=t.viewer;if(n.setState({isLoading:!0}),Object(S.a)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),u.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){var a={business_id:e.id,get_user:!0};Object(f.a)(a,{container:"account_switcher"},null,!0).then((function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(E.g)("/",e.id,r)}),(function(t){throw Object(E.f)(e.id,r),n.setState({isLoading:!1}),t}))}else h.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then((function(){Object(E.j)(o.id),Object(E.g)("/".concat(e.username),o.id,r)}),(function(e){throw Object(E.f)(o.id,r),n.setState({isLoading:!1}),e}))})),I(T(T(n)),"handleCloseModal",(function(){return n.setState({showLoginModal:!1})})),I(T(T(n)),"handleReauthAccount",(function(){Object(E.k)("switch_failure_prompt.login_click",null,n.props.container),n.setState({failedAccount:null,showLoginModal:!0})})),I(T(T(n)),"handleRemoveUnauthAccount",(function(e){Object(E.k)("switch_failure_prompt.account_removed",{removed_user_id:e},n.props.container),Object(E.j)(e),n.setState({failedAccount:null})})),I(T(T(n)),"getBusinessAccounts",(function(){var e=n.props,t=e.businessUser,r=e.viewer.partner;return t.data?(r&&r.is_linked_business?t.data.owners:t.data.businesses).reduce((function(e,t){return e[t.id]=Object(y.a)(b.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e}),{}):null})),I(T(T(n)),"renderAccounts",(function(e){return Object.keys(e).map((function(t,r){return o.a.createElement("li",{key:r},o.a.createElement(a.P,{onTouch:function(){n.handleSwitch(e[t])}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},o.a.createElement(i,{large:!0,account:e[t],viewerId:n.props.viewer.id}))),r!==E.a-2&&o.a.createElement(a.j,null))}))})),I(T(T(n)),"renderPinnerButtons",(function(e){var t=n.props.onNavigateButtonClick;return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:"/".concat(e,"/")},o.a.createElement(a.d,{text:d.a._("View profile","Visit a user profile from account switcher"),accessibilityLabel:d.a._("Go to current profile","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:function(){n.trackProfileNavigateClick("button"),t&&t()}}))})),I(T(T(n)),"renderBusinessButtons",(function(e){var t=n.props,r=t.onNavigateButtonClick,i=t.enterProMode,c=t.viewer.partner;return o.a.createElement(a.c,{display:"flex"},o.a.createElement(a.c,{marginEnd:2},o.a.createElement(_.a,{activate:!1,name:"web_pro_mode_header"},(function(e){var t=e.group.startsWith("enabled_full_width");return o.a.createElement(m.b,{to:t&&c&&!c.is_convert?"/":"/business/hub/",onClick:function(){Object(S.a)(101,{element:11236}),i&&i(),r&&r()}},o.a.createElement(a.d,{key:"biz-hub-button",text:d.a._("Business hub","Link to Business hub from account switcher"),accessibilityLabel:d.a._("Go to Business hub","Visit the Business hub for the current business user"),size:"sm",color:"red"}))}))),o.a.createElement(_.a,{activate:!1,name:"web_pro_mode_header"},(function(t){var i=t.group.startsWith("enabled_full_width");return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:i?"".concat(g.a.settings.CANONICAL_MAIN_URL,"/").concat(e,"/"):"/".concat(e,"/")},o.a.createElement(a.d,{text:d.a._("Profile","Visit a user profile from account switcher"),accessibilityLabel:d.a._("Go to current user profile","Visit a current user profile from account switcher"),size:"sm",onClick:function(){n.trackProfileNavigateClick("button"),r&&r()}}))})))})),n}var n,r,x;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&Object(E.k)("modal.shown")}},{key:"componentWillUnmount",value:function(){this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&Object(E.k)("modal.dismiss")}},{key:"renderLoadingIndicator",value:function(){return this.state.isLoading?o.a.createElement(p.a,null):null}},{key:"render",value:function(){var e=this,t=this.props.viewer.partner,n=this.state,r=n.failedAccount,l=n.isLoading,u=n.showLoginModal,p=Object(E.e)(),f=this.getBusinessAccounts(),h=Object.keys(p).length,g=p[this.props.viewer.id];delete p[g.id];var b=g.imageLargeUrl&&!g.imageLargeUrl.includes("static/images/user/default");return o.a.createElement(a.c,{flex:"grow"},u&&o.a.createElement(c.a,{container:this.props.container,onClose:this.handleCloseModal,email:r?r.email:""}),r?o.a.createElement(a.c,{paddingX:4,paddingY:4,flex:"grow"},o.a.createElement(a.c,{marginBottom:3},o.a.createElement(a.K,null,d.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),o.a.createElement(i,{viewerId:g.id,account:r}),o.a.createElement(a.c,{marginTop:4},o.a.createElement(a.d,{text:d.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),o.a.createElement(a.c,{marginTop:3},o.a.createElement(a.d,{text:d.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:function(){return e.handleRemoveUnauthAccount(r.id)}}))):o.a.createElement(a.c,null,l&&this.renderLoadingIndicator(),o.a.createElement(a.c,null,o.a.createElement(a.c,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},o.a.createElement(a.c,{marginRight:4},o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:"/".concat(g.username,"/")},o.a.createElement(a.P,{onTouch:function(){return e.trackProfileNavigateClick("avatar")}},o.a.createElement(a.a,{name:g.fullName||g.username,size:"lg",src:b?g.imageLargeUrl:""})))),o.a.createElement(a.c,{flex:"grow"},o.a.createElement(a.c,{marginBottom:2},o.a.createElement(a.K,{bold:!0,color:"darkGray",size:"md",truncate:!0},g.fullName||g.username),g.email&&o.a.createElement(a.K,{color:"darkGray",size:"md",truncate:!0},g.email)),t?this.renderBusinessButtons(g.username):this.renderPinnerButtons(g.username))),f?o.a.createElement(s,{accounts:f,onClick:this.handleLinkedAccountSwitch}):null,o.a.createElement(a.j,null),t&&t.is_linked_business?null:o.a.createElement(a.c,null,o.a.createElement("ul",null,this.renderAccounts(p)))),h<E.a&&!(t&&t.is_linked_business)&&o.a.createElement(a.c,{paddingX:4,paddingY:3},o.a.createElement(a.d,{text:d.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:function(){return e.handleAddAccount()}}))))}}])&&k(n.prototype,r),x&&k(n,x),t}(r.Component);t.a=Object(x.b)({key:"businessUser",name:"UserResource",options:function(e){return{field_set_key:"linked_partner",user_id:e.viewer.id}}})(P)},KrKF:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d}));var r=n("Qo1m"),o=n("PhUE"),a=n("Irlq");n("zlIe");function i(e,t){return e.some((function(e){return e.id===t.id}))}var c=function(e){return e?Object(a.b)(r.a._("Welcome back, {{ firstName }}!","Header on welcome step of renux"),{firstName:e}):r.a._("Welcome back!","Header on welcome step of renux")};function s(e){var t=[];if(e){var n=Date.now()-72e5,r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=i.value;s.ts>=n&&("string"==typeof s.image_signature&&t.push(s.image_signature),"string"==typeof s.first_pin_image_signature&&t.push(s.first_pin_image_signature))}}catch(l){o=!0,a=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}return t}function l(){return{plpImages:s(o.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")),blpImages:s(o.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin"))}}function u(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function d(e){var t=e.log_data;return t&&JSON.parse(t).source||""}},UY39:function(e,t,n){},V0Gb:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("+U6O"),c={loadingIndicatorMask:{position:"absolute",backgroundColor:"#fff",top:"0",left:"0",right:"0",bottom:"0",opacity:"0.7",borderRadius:"8px",zIndex:"100"},spinner:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"1",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"101"}};t.a=function(e){return o.a.createElement("div",null,o.a.createElement("div",{style:c.spinner},o.a.createElement(i.G,{accessibilityLabel:a.a._("Loading"),show:!0})),o.a.createElement("div",{style:c.loadingIndicatorMask}))}},dkdd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("PhUE");function o(e){var t={};return e.forEach((function(e){var n=r.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)})),JSON.stringify(t)}function a(){return o(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}function i(){return o(["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"])}},f5ca:function(e,t,n){"use strict";n.r(t);n("oiDG");var r=n("XQD6"),o=n("D+W/"),a=n("oFGA"),i=n("/YZq"),c=n("2XPX"),s=n.n(c),l=n("ePT2"),u=n("QJ2d"),d=n("ggpB"),p=n("q579"),f=i.a.getLogger("AuthHandshake"),m={_parseJson:function(e){return e.json()},_throwError:function(e){var t=new Error(e.statusText);throw t.response=e,m._reconstructError(t),t},_checkStatus:function(e){return 200===e.status||401===e.status?e:(m._throwError(e),{})},_crossDomainRequest:function(e,t,n){if("GET"!==n&&"POST"!==n)return Promise.resolve({});var r={credentials:"include",mode:"cors"};return"POST"===n&&(r.method="POST",r.body=t,r.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":a.a.instance.unauth_id},a.a.instance.unauth_id||Object(d.a)("unauth.auth_handshake.cross_domain.no_unauth_id.".concat(n))),fetch(e,r).then(m._checkStatus).then(m._parseJson).then((function(e){return"success"===e.status?Promise.resolve(e):e.code===o.a.LOGIN_MFA_REQUIRED?(e.api_error_code=e.code,Promise.reject(e)):(m._throwError(e),{})})).catch((function(e){throw e}))},_reconstructError:function(e){!e.api_error_code&&e.response&&(e.api_error_code=e.response.code,e.message=e.response.message)},_shouldRedirectToCanonical:function(){var e=u.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/canonical/";return m._crossDomainRequest(e,"","GET")},_redirectToCanonical:function(){var e="";if(window.location.search){var t=s.a.parse(window.location.search.substring(1));t.originalUrl&&(e=t.originalUrl)}e||(e=window.location.pathname+window.location.search),e.startsWith("/")||(e="/".concat(e));var n=u.a.settings.CANONICAL_MAIN_URL;Object(r.a)("".concat(n).concat(e))},verifyAndRedirectToCanonical:function(){return m._shouldRedirectToCanonical().then((function(e){e&&e.data&&m._redirectToCanonical()}))},_verifyAndGetToken:function(){var e=u.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/verify/";return m._crossDomainRequest(e,"","GET")},exchangeTokenAndSetSession:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=l.a.create("HandshakeSessionResource",{token:e,isRegistration:t});return n.callCreate()},verifyLoggedInStatus:function(){m._verifyAndGetToken().then((function(e){if(e&&e.data){var t=e.data;m.exchangeTokenAndSetSession(t).then((function(e){window.location.reload()}),(function(e){f.error("Failed to set session for current user; "+e.message)}))}else f.error("No custom access token in cross domain verify response")}),(function(e){}))},_setUpRegisterParameters:function(e){var t={};if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=a.a.instance.locale,t.referrer=a.a.instance.referrer,e.age){var n=new Date;n.setFullYear(n.getFullYear()-e.age);var r=parseInt(n/1e3,10);t.birthday=r.toString()}if(e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.business_name&&(t.account_type=e.account_type,t.business_name=e.business_name,t.first_name=e.business_name),a.a.instance.invite_code&&(t.invite_code=a.a.instance.invite_code),e.facebook_id){var o=a.a.instance.facebook_token||e.facebook_token||"";o||f.debug("Facebook token is not being set during login call."),t.facebook_id=e.facebook_id,t.facebook_token=o,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return p.a.getQueryStringFromObject(t)},_setUpLoginParameters:function(e){var t={};if(e.username_or_email&&(t.username_or_email=e.username_or_email.trim(),t.password=e.password,t.referrer=a.a.instance.referrer),e.facebook_id){var n=a.a.instance.facebook_token||e.facebook_token||"";n||f.debug("Facebook token is not being set during login call."),t.facebook_id=e.facebook_id,t.facebook_token=n,t.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(t.gplus_id_token=e.gplus_id_token,t.gplus_access_token=e.gplus_access_token,t.gplus_expires_at=e.gplus_expires_at,t.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(t.mfa_token=e.mfa_token),p.a.getQueryStringFromObject(t)},_getRegisterRequestUrl:function(e){var t="/v3/register/email/handshake/";return e.facebook_id&&(t="/v3/register/facebook/handshake/"),(e.gplus_code||e.gplus_id_token)&&(t="/v3/register/gplus/handshake/"),e.business_name&&(t="/v3/register/partner/handshake/"),u.a.settings.ACCOUNTS_PINTEREST_URL+t},_getLoginRequestUrl:function(e){var t="/v3/login/handshake/";return e.facebook_id&&(t="/v3/login/facebook/handshake/"),e.gplus_id_token&&(t="/v3/login/gplus/handshake/"),e.mfa_token&&(t="/v3/login/mfa/handshake/"),u.a.settings.ACCOUNTS_PINTEREST_URL+t},registerUser:function(e){var t=m._getRegisterRequestUrl(e),n=m._setUpRegisterParameters(e);return m._crossDomainRequest(t,n,"POST")},loginUser:function(e){var t=m._getLoginRequestUrl(e),n=m._setUpLoginParameters(e);return m._crossDomainRequest(t,n,"POST")}};t.default=m},kiCl:function(e,t,n){"use strict";var r=function(e,t,n){this.type=e,this.target=t,this.currentTarget=t,this.data=n||{},this.stopped=!1};r.prototype.stopPropagation=function(){this.stopped=!0},r.prototype.shouldPropagate=function(){return!this.stopped},t.a=r},kpxY:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("tbiL"),c=n("+U6O"),s=Object(i.a)({chunkName:function(){return"FullPageSignup"},isReady:function(e){return!!n.m[this.resolve(e)]},requireAsync:function(){return Promise.all([n.e(1),n.e(6),n.e(7),n.e(11),n.e("FullPageSignup")]).then(n.bind(null,"JpAB"))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return"JpAB"}});function l(e){return o.a.createElement(s,Object.assign({},e,{fallback:o.a.createElement(c.c,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(c.G,{accessibilityLabel:a.a._("Loading signup form"),show:!0}))}))}},lx8N:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("KOHj"),i=n("rBws"),c=n("IItM"),s=n("Qo1m"),l=n("dsfX"),u=n("kIql"),d=n("+U6O"),p=n("9Y9K"),f=n("rlRx"),m=n("Y2BC");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=b(t).call(this,e),n=!o||"object"!==h(o)&&"function"!=typeof o?_(r):o,w(_(_(n)),"componentDidMount",(function(){Object(f.i)(n.props.viewer,n.props.businessUser.data)})),w(_(_(n)),"showLogin",(function(){return n.setState({showLoginModal:!0})})),w(_(_(n)),"hideLogin",(function(){return n.setState({showLoginModal:!1})}));var a=n.props.showAddAccount;return n.state={showLoginModal:!!a},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.customTaglineText,n=e.hideAccountSwitchValueProp,r=e.onDismiss,u=e.showAddAccount,p=e.viewer,f=e.enterProMode;return this.state.showLoginModal?o.a.createElement(i.a,{container:c.a.ACCOUNT_SWITCHER_MODAL,onClose:u?r:this.hideLogin,customTaglineText:t,hideAccountSwitchValueProp:n}):o.a.createElement(d.c,{position:"relative"},o.a.createElement(l.b,{accessibilityModalLabel:s.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts"),size:"sm",heading:s.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),accessibilityCloseLabel:s.a._("Dismiss selection","Label for dismissing the modal"),onDismiss:r},o.a.createElement(a.a,{container:c.a.ACCOUNT_SWITCHER_MODAL,onNavigateButtonClick:function(){return r()},showLogin:this.showLogin,viewer:p,enterProMode:f})))}}])&&g(n.prototype,r),u&&g(n,u),t}(r.Component);t.a=Object(p.compose)(u.a,Object(m.b)({name:"UserResource",key:"businessUser",options:function(e){return{username:e.viewer.username,field_set_key:"linked_partner"}}}))(v)},rBws:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=n("kpxY"),c=n("Qo1m"),s=n("plGG"),l=(n("hvnN"),n("ggpB")),u=n("+U6O"),d={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}},p=function(e){var t=function(e){Object(l.a)("unauth.account_switcher_modal.".concat(e))},n=e.renderContent;return o.a.createElement("div",{style:d.mask},o.a.createElement(s.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),o.a.createElement("div",{className:"AccountSwitcherModal",onClick:function(){t("empty_space_click"),(0,e.onCloseClick)()},role:"dialog",style:d.scroller},o.a.createElement("div",{onClick:function(e){e.stopPropagation()},role:"dialog",style:d.modalContainer},n(),o.a.createElement("button",{"aria-label":c.a._("close","accessible label for close button"),onClick:function(){t("close_button_click"),(0,e.onCloseClick)()},style:d.closeButton},o.a.createElement(u.n,{accessibilityLabel:c.a._("close","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))},f=n("73jm");t.a=Object(a.connect)()((function(e){return r.createElement(p,{onCloseClick:function(){e.onClose&&e.onClose()},renderContent:function(){return r.createElement(u.c,{display:"flex",justifyContent:"center",flex:"grow"},r.createElement(i.a,{container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:f.b.login,signupSource:f.b.login,customLoginTagline:e.customTaglineText||c.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account")}))}})}))},rlRx:function(e,t,n){"use strict";var r=n("XQD6"),o=n("D+W/"),a=n("IItM"),i=function(e){return"undefined"!=typeof window?window.localStorage.getItem(e):null},c=function(e,t){"undefined"!=typeof window&&window.localStorage.setItem(e,t)},s={getAccounts:function(){return i(o.a.MULTIPLE_ACCOUNTS)},getAccountsJSON:function(){return s.getAccounts()?JSON.parse(s.getAccounts()):{}},getGroupId:function(){var e=i(o.a.MULTIPLE_ACCOUNTS_GROUP);return e?JSON.parse(e):null},setAccounts:function(e){return c(o.a.MULTIPLE_ACCOUNTS,e)},setGroupId:function(e){return c(o.a.MULTIPLE_ACCOUNTS_GROUP,JSON.stringify(e))}},l=s,u=n("QzGC"),d=n.n(u),p=n("dg2R"),f=n("ggpB");function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return _})),n.d(t,"k",(function(){return w})),n.d(t,"b",(function(){return v})),n.d(t,"j",(function(){return S})),n.d(t,"i",(function(){return x})),n.d(t,"g",(function(){return E})),n.d(t,"f",(function(){return O})),n.d(t,"h",(function(){return k}));var g=4,b=function(){return l.getAccountsJSON()},y=function(){return Object.keys(b()).length},_=function(){var e;return h(e={},o.a.MULTIPLE_ACCOUNTS,l.getAccountsJSON()),h(e,o.a.MULTIPLE_ACCOUNTS_GROUP,l.getGroupId()),e},w=function(e,t,n){var r=l.getGroupId();r||(r=function(){var e=d()();return Object(f.c)("".concat("web_account_switcher",".utils.group_created"),{group_id:e,group_count:y()}),e}(),l.setGroupId(r));var o={group_id:r,group_count:y()},i="";n&&(i=n===a.a.ACCOUNT_SWITCHER_MODAL?"modal.":"flyout."),Object(f.c)("".concat("web_account_switcher",".").concat(i).concat(e),Object.assign({},t,o))},v=function(e,t,n){var r=l.getAccountsJSON();r[e.id]=function(e){var t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||w("utils.incomplete_user_values"),e.partner&&e.partner.is_create?m({},t,{partner:{is_create:e.partner.is_create}}):t}(e),l.setAccounts(JSON.stringify(r)),t&&n&&w("new_account_add_success",{method:t,user_added:e.id},n)},S=function(e){var t=l.getAccountsJSON();delete t[e],l.setAccounts(JSON.stringify(t))},x=function(e,t){if(!l.getAccounts()||e&&!(e.id in b())){if(e.partner&&e.partner.is_linked_business&&t)return void v(m({},e,{email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""}));v(e)}},E=function(e,t,n){w("switch_account_success",{destination_user_id:t},n),Object(r.a)(e)},O=function(e,t){p.c.resume(p.a),w("switch_account_failure",{destination_user_id:e},t)},k=function(e){p.c.resume(p.b),Object(f.a)("web.dismiss_account_switcher.".concat(e))}},"xd+Y":function(e,t,n){},xjFC:function(e,t,n){},zEno:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=(n("UY39"),n("VSY/")),c=n("KrKF"),s=n("pjsG"),l=n("Qo1m"),u=n("7Tih"),d=(n("xjFC"),n("+U6O")),p=3,f=10,m=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"];var h=o.a.memo((function(){var e=function(){for(var e=[],t=0,n=0;n<f;n+=1){e.push([]);for(var r=0;r<p;r+=1){var a=m[t];e[n].push(o.a.createElement("div",{key:n+r,className:"NuxEducationLoaderGrid__column".concat(r)},o.a.createElement(d.c,{color:a,height:155,width:105,dangerouslySetInlineStyle:{__style:{borderRadius:8}}}))),(t+=1)>=m.length&&(t=0)}}return e}();return o.a.createElement("div",{className:"NuxEducationLoaderGrid"},e)}));var g=o.a.memo((function(e){var t=e.selectedInterest,n={label:l.a._("Food and Drink","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},r={},a=t||n,i=a.label,c=a.images["400x"],s=c.url,u=c.height,p=c.width;r.domain=i.trim().toLowerCase().replace(/\s/g,"").concat(".com"),r.imageHeight=u,r.imageWidth=p,r.imageUrl=s;var f=r.domain,m=r.imageUrl,h=r.imageHeight,g=r.imageWidth;return o.a.createElement("div",{className:"NuxEducationLoaderPin","data-test-id":"nux-loader-pin"},o.a.createElement(d.c,{position:"relative"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinImage"},o.a.createElement(d.u,{shape:"rounded",height:310,width:210},o.a.createElement(d.p,{alt:l.a._("Pin image","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:h,naturalWidth:g,src:m})),o.a.createElement(d.c,{position:"absolute",top:!0,right:!0,marginTop:1,marginRight:1},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinSaveButton"},o.a.createElement(d.d,{accessibilityLabel:l.a._("Save button"),color:"red",text:l.a._("Save","save button for nux loading step"),size:"md"}))),o.a.createElement(d.c,{position:"absolute",bottom:!0,left:!0,margin:2,maxWidth:"90%"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinLinkButton"},o.a.createElement(d.c,{padding:2,color:"lightGray",display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:4}}},o.a.createElement(d.c,null,o.a.createElement(d.n,{icon:"arrow-up-right",accessibilityLabel:l.a._("link","Pin website url link for nux loading step"),size:14,color:"darkGray"})),o.a.createElement(d.c,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},o.a.createElement(d.K,{bold:!0,size:"sm",truncate:!0},f))))))))})),b={backgroundColor:"#efefef"},y={transition:"width .4s ease-out"};function _(e,t){return Object.assign({},b,{height:e+"px",borderRadius:t})}function w(e,t,n){return Object.assign({},y,{backgroundColor:e,width:t+"%",borderRadius:n})}var v=function(e){var t=e.color,n=void 0===t?"#333":t,r=e.height,a=void 0===r?8:r,i=e.progress,c=void 0===i?0:i,s=e.outerBorderRadius,l=void 0===s?"10px":s,u=e.innerBorderRadius,p=void 0===u?"inherit":u;return o.a.createElement(d.c,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:_(a,l)}},o.a.createElement(d.c,{height:"inherit",dangerouslySetInlineStyle:{__style:w(n,c,p)}}))},S=n("ePT2"),x=n("kIql"),E=n("NmcB"),O=n("8Hll"),k=n("zlIe"),C=n("9Y9K");function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=I(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==N(o)&&"function"!=typeof o?j(r):o,R(j(j(n)),"state",{progressPercent:0}),R(j(j(n)),"incrementStepAndCompleteLoading",(function(){var e=n.props,t=e.incrementNuxStep,r=e.isRenux;(t(),r)||S.a.create("UserStateResource",{state:k.t,value:k.b}).callCreate()})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.dispatchSetNuxStepProgress,r=t.isRenux;r||S.a.create("UserStateResource",{state:k.t,value:k.y}).callCreate(),n("loader"),Object(E.a)(13,{view:r?213:24,viewParameter:261}),this.intervalId=setInterval((function(){return e.setState((function(e){return{progressPercent:Math.min(e.progressPercent+100/17,100)}}))}),300)}},{key:"componentDidUpdate",value:function(e,t){this.state.progressPercent>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,1e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.props,t=e.isRenux,n=e.selectedInterests,r=e.showProgressBar,a=this.state.progressPercent;return o.a.createElement("div",{className:"NuxEducationLoader","data-test-id":"nux-complete-loader"},o.a.createElement(d.c,{alignItems:"center",display:"flex",direction:"row",height:"100%",justifyContent:"center",overflow:"hidden",width:"100%"},o.a.createElement(d.c,{position:"relative",marginLeft:10,marginRight:4},o.a.createElement("div",{className:"NuxEducationLoader__loadingCopyContainer"},o.a.createElement(d.m,{size:"sm"},l.a._("All set!","Title for nux loading step")),o.a.createElement(d.c,{marginTop:4},t?l.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step"):l.a._("We're building your home feed with lots of Pins...","Details for nux loading step"))),o.a.createElement("div",{className:"NuxEducationLoader__pinEducationCopyContainer"},o.a.createElement(d.m,{size:"sm"},l.a._("Pins are ideas.","Pin education on NUX loading step")),o.a.createElement(d.c,{marginTop:5},l.a._("They are links saved from around the web","Pin education on NUX loading step")))),o.a.createElement(d.c,{marginRight:5,marginLeft:5,width:344},o.a.createElement(h,null)),o.a.createElement(d.c,null,o.a.createElement(g,{selectedInterest:n[0]}))),r?null:o.a.createElement(d.c,{position:"absolute",top:!0,width:"100%"},o.a.createElement(v,{height:8,color:"#e60023",progress:a})))}}])&&T(n.prototype,r),a&&T(n,a),t}(r.PureComponent),L=Object(C.compose)(Object(a.connect)(null,(function(e){return{dispatchSetNuxStepProgress:function(t){return e(Object(O.a)(t))}}})),x.a)(A),U=n("VLF8"),B=n("FEwd"),G=n("rPo8");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=M(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==D(o)&&"function"!=typeof o?z(r):o,W(z(z(n)),"onInstallButtonClicked",(function(){var e=n.props.isRenux;U.a.handleExtensionInstall(n.incrementStepAndCompleteLoading),Object(E.a)(101,{component:17,element:280,view:e?213:24,viewParameter:260})})),W(z(z(n)),"onSkipButtonClick",(function(){var e=n.props.isRenux;Object(E.a)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),n.incrementStepAndCompleteLoading()})),W(z(z(n)),"incrementStepAndCompleteLoading",(function(){var e=n.props,t=e.incrementNuxStep,r=e.isRenux,o=e.setNuxUpsellProgress;r||o(k.b),t()})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.setNuxUpsellProgress;n||r(k.y),t("extension"),Object(E.a)(13,{view:n?213:24,viewParameter:260})}},{key:"render",value:function(){var e=this.props.personalizationCopy,t=e.headerText,n=e.subHeaderText;return o.a.createElement(B.a,{header:t,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:n})}}])&&F(n.prototype,r),a&&F(n,a),t}(r.Component),K=Object(a.connect)(null,(function(e,t){return{setNuxUpsellProgress:function(t){return e(Object(G.a)(k.q,t))},dispatchSetNuxStepProgress:function(t){return e(Object(O.a)(t))}}}))(Y),X=(n("xd+Y"),n("UmN8")),q=n("k9eC"),V=n("2YES");function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(e){var t,n=e.isChecked,a=e.label,i=e.selectGender,c=e.value,s=e.isHorizontal;switch(a){case k.g:t="end";break;case k.D:t="start";break;default:t="center"}var l=o.a.createElement(d.c,{alignItems:"center",display:"flex","data-test-id":"nux-gender-".concat(a,"-label"),height:40,justifyContent:t,width:"calc(800px / 3)"},o.a.createElement(d.q,{htmlFor:a},o.a.createElement(d.c,{alignItems:"center",display:"flex"},o.a.createElement(d.B,{checked:n,id:a,name:"genderOptions",onChange:i,size:"md",value:a}),o.a.createElement(d.c,{marginStart:2,width:a===k.D&&225},c))));return s?l:o.a.createElement(r.Fragment,null,o.a.createElement(d.c,{"data-test-id":"nux-gender-".concat(a,"-label")},o.a.createElement(d.q,{htmlFor:a},o.a.createElement("div",{className:"NuxGenderSelector"},o.a.createElement(d.c,{alignItems:"center",display:"flex",flex:"none",paddingX:8,paddingY:6},o.a.createElement(d.B,{checked:n,id:a,name:"genderOptions",onChange:i,size:"md",value:a}),o.a.createElement(d.c,{display:"flex",flex:"grow",marginStart:10},c))))),o.a.createElement(d.j,null))},re=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=this,i=(e=Z(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==J(i)&&"function"!=typeof i?ee(a):i,te(ee(ee(n)),"state",{customGender:n.props.customGender,gender:n.props.gender,showCustomGenderTextfield:n.props.gender===k.D&&n.props.customGender.length>0,showNextButton:[k.k,k.g].includes(n.props.gender)||n.props.customGender.length>0,showCustomGenderDoneButton:n.props.gender===k.D&&n.props.customGender.length>0}),te(ee(ee(n)),"setCustomGender",(function(e){e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?n.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):n.state.showNextButton&&e.target instanceof HTMLInputElement?n.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):n.setState({showCustomGenderDoneButton:!1})})),te(ee(ee(n)),"updateCustomGender",(function(e){var t=e.value;return n.setState({customGender:t,showCustomGenderDoneButton:t.length>0})})),te(ee(ee(n)),"renderOnHomefeed",(function(){var e=n.props.personalizationCopy.headerText,t=n.state,a=t.customGender,i=t.gender,c=t.showCustomGenderDoneButton,s=t.showCustomGenderTextfield;return o.a.createElement(r.Fragment,null,o.a.createElement(d.m,{overflow:"normal",size:"sm"},e),o.a.createElement(d.c,{direction:"column",display:"flex",height:"100%"},o.a.createElement(d.c,{alignItems:"around",display:"flex",height:"100%",marginTop:10},o.a.createElement(ne,{isChecked:!s&&i.toLowerCase()===k.g,label:k.g,selectGender:function(){return n.onSelectGender(k.g)},value:n.renderGenderLabel(l.a._("Female"),!0),isHorizontal:!0}),o.a.createElement(ne,{isChecked:!s&&i.toLowerCase()===k.k,label:k.k,selectGender:function(){return n.onSelectGender(k.k)},value:n.renderGenderLabel(l.a._("Male"),!0),isHorizontal:!0}),o.a.createElement(ne,{isChecked:s,label:k.D,selectGender:function(){return n.onSelectGender(k.D)},value:s?o.a.createElement(d.c,{"data-test-id":"nux-gender-unspecified-input"},o.a.createElement(d.M,{id:"customGender",onChange:n.updateCustomGender,placeholder:l.a._("Enter custom gender","placeholder text for custom gender text field"),type:"text",value:a})):n.renderGenderLabel(l.a._("Non-binary","Non-binary label for custom gender"),!0),isHorizontal:!0})),c&&o.a.createElement(d.c,{"data-test-id":"nux-gender-unspecified-done-btn"},o.a.createElement(d.d,{color:"red",disabled:!i&&!a,inline:!0,onClick:function(){return n.updateGenderCompleteStep()},text:l.a._("Done","button text for entering a custom gender type")}))))})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.setNuxGenderProgress;t("gender"),n||r(k.y),Object(E.a)(13,{view:n?213:24,viewParameter:3120})}},{key:"onSelectGender",value:function(e){var t=this.props.requestContext,n=this.state,r=n.showCustomGenderTextfield;n.showNextButton?this.setState({gender:e,showCustomGenderTextfield:e===k.D}):e===k.D&&new q.c(t,"web_hide_custom_gender_field").enabled()?this.setState({gender:k.D,showCustomGenderTextfield:!1},this.updateGenderCompleteStep):e===k.D||r?this.setState({gender:k.D,customGender:"",showCustomGenderTextfield:!r,showCustomGenderDoneButton:!1}):this.setState({gender:e},this.updateGenderCompleteStep)}},{key:"setUserStateCompletedGenderStep",value:function(){var e=this.props,t=e.isRenux,n=e.setNuxGenderProgress;t||n(k.b)}},{key:"updateGenderCompleteStep",value:function(){var e=this,t=this.props,n=t.incrementNuxStep,r=t.isRenux,o=t.updateGenderInfo,a=this.state,i=a.customGender,c=a.gender;o(a.showCustomGenderTextfield?{gender:k.D,custom_gender:i.slice(0,30)}:{gender:c}).then((function(){e.setUserStateCompletedGenderStep(),Object(E.a)(101,{component:17,element:241,view:r?213:24,viewParameter:3120}),n()}))}},{key:"submitHandler",value:function(e){e.preventDefault()}},{key:"renderGenderLabel",value:function(e,t){return t?o.a.createElement(d.K,{size:"xl"},e):o.a.createElement(d.m,{size:"sm"},e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isRenux,a=t.personalizationCopy,i=a.headerText,c=a.subHeaderText,s=this.state,u=s.customGender,p=s.showCustomGenderDoneButton,f=s.showCustomGenderTextfield,m=s.showNextButton,h=f?o.a.createElement(r.Fragment,null,o.a.createElement(d.c,{marginEnd:5},o.a.createElement("input",{className:"NuxGenderSelector","data-test-id":"nux-gender-unspecified-input",id:"customGender",onChange:this.setCustomGender,placeholder:u||l.a._("Enter custom gender","placeholder text for custom gender text field"),style:p?k.j:k.i,type:"text"})),!m&&p&&o.a.createElement("div",{"data-test-id":"nux-gender-unspecified-done-btn"},o.a.createElement(d.d,{color:"red",inline:!0,onClick:function(){return e.updateGenderCompleteStep()},text:l.a._("Done","button text for entering a custom gender type")}))):this.renderGenderLabel(l.a._("Non-binary","Non-binary label for custom gender"));return o.a.createElement(X.a,{name:"web_homefeed_nux",activate:!1},(function(t){return t.anyEnabled?e.renderOnHomefeed():o.a.createElement(d.c,{display:"flex",direction:"column",height:"100%",justifyContent:"around",paddingY:8,width:"100%"},o.a.createElement(d.c,{direction:"column",display:"flex",paddingX:8,dangerouslySetInlineStyle:{__style:{textAlign:"center"}}},o.a.createElement(d.m,{size:n?"xs":"sm"},i),n&&o.a.createElement(d.K,{align:"center",size:"xl"},c)),o.a.createElement(d.c,null,o.a.createElement(d.j,null),o.a.createElement(ne,{isChecked:!f&&e.state.gender.toLowerCase()===k.g,label:k.g,selectGender:function(){return e.onSelectGender(k.g)},value:e.renderGenderLabel(l.a._("Female"))}),o.a.createElement(ne,{isChecked:!f&&e.state.gender.toLowerCase()===k.k,label:k.k,selectGender:function(){return e.onSelectGender(k.k)},value:e.renderGenderLabel(l.a._("Male"))}),o.a.createElement(ne,{isChecked:f,label:k.D,selectGender:function(){return e.onSelectGender(k.D)},value:h})),m&&o.a.createElement(d.c,{"data-test-id":"nux_gender_next_btn",marginTop:8,marginStart:8,marginEnd:8},o.a.createElement(d.d,{accessibilityLabel:l.a._("Next","go to next nux step"),color:"red",disabled:f&&0===e.state.customGender.length,onClick:function(){return e.updateGenderCompleteStep()},text:l.a._("Next","next nux step button"),type:"button"})))}))}}])&&Q(n.prototype,a),i&&Q(n,i),t}(r.PureComponent),oe=Object(C.compose)(Object(a.connect)((function(e){var t=e.viewer;return{gender:t.gender?t.gender:"",customGender:t.customGender?t.customGender:""}}),(function(e,t){return{dispatchSetNuxStepProgress:function(t){return e(Object(O.a)(t))},setNuxGenderProgress:function(t){return e(Object(G.a)(k.s,t))},updateGenderInfo:function(t){return e(Object(G.f)({updateUserData:t}))}}})),V.e)(re),ae=n("kiCl");function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=se(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ie(o)&&"function"!=typeof o?ue(r):o,de(ue(ue(n)),"state",{focused:!1,errorIsOpen:!1}),de(ue(ue(n)),"handleOnChange",(function(e){n.props.onChange({event:e,value:e.target.value})})),de(ue(ue(n)),"handleBlur",(function(){n.props.errorMessage&&n.setState({errorIsOpen:!1})})),de(ue(ue(n)),"handleFocus",(function(){n.props.errorMessage&&n.setState({errorIsOpen:!0})})),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.errorMessage!==t.errorMessage?{errorIsOpen:!!e.errorMessage,errorMessage:e.errorMessage}:null}}],(o=[{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.name,a=t.options,i=t.value;return r.createElement(d.c,{alignItems:"center",display:"flex",position:"relative"},r.createElement(d.c,{alignItems:"center",bottom:!0,color:"white",display:"flex",position:"absolute",dangerouslySetInlineStyle:{__style:{margin:"1px",paddingRight:"31px",paddingLeft:"15px",pointerEvents:"none"}},right:!0,shape:"rounded",top:!0},r.createElement(d.n,{icon:"arrow-down",size:24,color:"darkGray",accessibilityLabel:""})),r.createElement("select",{id:n,name:o,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleOnChange,ref:function(t){e.select=t},value:i,style:{backgroundColor:"white",border:"1px solid #979797",borderRadius:8,cursor:"pointer",height:68,fontSize:20,paddingLeft:32,width:"100%",WebkitAppearance:"none",MozAppearance:"none"}},a.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.label)}))))}}])&&ce(n.prototype,o),a&&ce(n,a),t}(r.Component);de(pe,"defaultProps",{options:[]});var fe=function(e){var t=e.defaultOptions,n=e.id,r=e.items,a=e.name,i=e.onChange,c=e.value,s=(r.data||t||[]).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t=e.name,n=e.key;return{label:t.toString(),value:n}}));return o.a.createElement(pe,{id:n,name:a,onChange:i,options:s,value:c})},me=n("Y2BC"),he=Object(me.b)({name:"CountriesResource",key:"items"})(fe),ge=Object(me.b)({name:"LocalesResource",key:"items"})(fe),be=n("hvnN"),ye=n.n(be),_e=n("PhUE");function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=this,i=(e=Se(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==we(i)&&"function"!=typeof i?Ee(a):i,Oe(Ee(Ee(n)),"state",{locale:n.props.reduxLocale||(n.context||{}).locale||k.d,country:n.props.reduxCountry||(n.context||{}).country||k.c,swappingLanguage:!1}),Oe(Ee(Ee(n)),"onNextButtonClick",(function(){var e=n.props,t=e.incrementNuxStep,r=e.isRenux,o=e.updateUserInfo,a=e.setNuxLocaleProgress,i=n.state;o({updateUserData:{country:i.country,locale:i.locale}}).then((function(){r||a(k.b),Object(E.a)(101,{component:17,element:10374,view:24,viewParameter:3139}),t()}))})),Oe(Ee(Ee(n)),"updateLocale",(function(e){var t=e.value;return n.setState({locale:t})})),Oe(Ee(Ee(n)),"updateCountry",(function(e){var t=e.value;return n.setState({country:t})})),Oe(Ee(Ee(n)),"renderOnHomefeed",(function(){var e=n.props.personalizationCopy.headerText,t=n.state,a=t.country,i=t.locale,c=t.swappingLanguage;return o.a.createElement(r.Fragment,null,o.a.createElement(d.m,{size:"sm",overflow:"normal"},e),o.a.createElement(d.c,{display:"flex",justifyContent:"center",marginBottom:10,marginTop:5},o.a.createElement(d.c,{"data-test-id":"nux-locale-select",marginRight:3,width:350},o.a.createElement(ge,{id:"newUserLanguage",name:"locale",onChange:n.updateLocale,value:i})),o.a.createElement(d.c,{"data-test-id":"nux-country-select",marginLeft:3,width:350},o.a.createElement(he,{id:"newUserCountry",name:"country",onChange:n.updateCountry,value:a}))),o.a.createElement(d.c,{"data-test-id":"nux-locale-country-next-btn",direction:"column",display:"flex",flex:"grow",justifyContent:"center",padding:1},o.a.createElement(d.d,{size:"lg",color:"red",text:l.a._("Next","go to next step"),onClick:n.onNextButtonClick,type:"submit",disabled:c})))})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.setNuxLocaleProgress;n||r(k.y),t("country"),_e.b.localStorage.getItem("signupUserLocale")||_e.b.localStorage.getItem("signupUserCountry")||Object(E.a)(13,{view:24,viewParameter:3139})}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,o=r.toggleLoadingIndicator,a=r.isBizNux,i=r.updateUserInfo,c=t.country,l=t.locale,d=this.state,p=d.country,f=d.locale,m=c!==p,h=l!==f;(m||h)&&i({updateUserData:{country:p,locale:f}}).then((function(){if(m&&_e.b.localStorage.setItem("signupUserCountry",p),h){_e.b.localStorage.setItem("signupUserLocale",f);var e=new u.a;e.evt=new ae.a("",null,{forceRefresh:1}),a?n.setState({swappingLanguage:!0}):o(!0),s.a.navigate("/",e)}}))}},{key:"render",value:function(){var e=this,t=this.props.personalizationCopy.headerText,n=this.state,r=n.country,a=n.locale,i=n.swappingLanguage;return o.a.createElement(X.a,{name:"web_homefeed_nux",activate:!1},(function(n){return n.anyEnabled?e.renderOnHomefeed():o.a.createElement(d.c,{display:"flex",direction:"column",height:"100%",padding:8,width:"100%"},o.a.createElement(d.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{textAlign:"center"}},display:"flex",direction:"column",flex:"grow",justifyContent:"around",marginBottom:8},o.a.createElement(d.c,{width:"100%"},o.a.createElement(d.m,{size:"sm"},t)),o.a.createElement(d.c,{width:"100%"},o.a.createElement(d.c,{"data-test-id":"nux-locale-select"},o.a.createElement(ge,{id:"newUserLanguage",name:"locale",onChange:e.updateLocale,value:a})),o.a.createElement(d.c,{marginTop:4,"data-test-id":"nux-country-select"},o.a.createElement(he,{id:"newUserCountry",name:"country",onChange:e.updateCountry,value:r})))),o.a.createElement(d.c,{bottom:!0,"data-test-id":"nux-locale-country-next-btn"},o.a.createElement(d.d,{size:"lg",color:"red",text:l.a._("Next","go to next step"),onClick:e.onNextButtonClick,type:"submit",disabled:i})))}))}}])&&ve(n.prototype,a),i&&ve(n,i),t}(r.PureComponent);ke.contextTypes={country:ye.a.string,locale:ye.a.string};var Ce=Object(a.connect)((function(e){var t=e.viewer;return{reduxCountry:t.country?t.country:"",reduxLocale:t.locale?t.locale:""}}),(function(e,t){return{updateUserInfo:function(t){return e(Object(G.f)(t))},setNuxLocaleProgress:function(t){return e(Object(G.a)(k.r,t))},dispatchSetNuxStepProgress:function(t){return e(Object(O.a)(t))}}}))(ke),Ne=n("dg2R"),Te=n("V0Gb"),Ie=function(e){var t=e.nuxStepIndex,n=e.showCounter,r=e.numSteps;return n&&r>1?o.a.createElement(d.c,null,o.a.createElement(d.K,{size:"md"},Object(i.i)(l.a._("Step {{current}} of {{total}}"),{current:"".concat(t+1),total:"".concat(r)}))):null},Pe=40,je="10px",Re="15px",Ae="30px",Le="45px",Ue="85px",Be=function(e,t,n,r,a){return o.a.createElement(d.c,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",margin:2,width:t},o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{marginTop:n===je?"3px":"0px"}},"data-test-id":"nux-toc-dot",color:e,height:n,shape:"circle",width:n}),r&&o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{whiteSpace:a?"nowrap":"",marginTop:n===je?"6px":"4px"}},"data-test-id":"nux-toc-text",display:"flex",wrap:!0},o.a.createElement(d.K,{align:"center",bold:!0,color:e,size:"sm"},r)))},Ge="M24 12a2 2 0 0 1-2 2H7.676l4.631 4.586a2 2 0 1 1-2.829 2.828L0 12l9.478-9.414a2 2 0 0 1 2.829 2.828L7.676 10H22a2 2 0 0 1 2 2";var De=o.a.memo((function(e){var t=e.renderType,n=e.currentNuxStep,r=e.steps,a=e.onPrevStepClick,i=r.map((function(e){return e.moduleName})),c=i.indexOf(n.moduleName),s=c>1&&o.a.createElement(d.c,{display:"flex",alignItems:"center"},o.a.createElement(d.o,{accessibilityLabel:l.a._("Go back to previous step","Accessibility label on NUX back button"),dangerouslySetSvgPath:{__path:Ge},iconColor:"gray",size:"sm",onClick:a}));if(r.length>1)return o.a.createElement(d.c,{"data-test-id":"nux-toc-container",display:"flex",justifyContent:"between",padding:4},o.a.createElement(d.c,{width:Pe},s),o.a.createElement(d.c,{display:"flex",justifyContent:"center"},r.map((function(e,r){return o.a.createElement("div",{key:r},function(e){var r=i.indexOf(e.moduleName)>c,o=r?"darkGray":"red",a=r?je:Re,s="",u=Ae,d=!1;if("single"===t){u=Le,d=!0;var p=e.moduleName===n.moduleName,f={NuxGenderStep:l.a._("You","Label for NUX gender step in a table of contents"),NuxLocaleCountryStep:l.a._("Your Language","Label for NUX language/locale step in a table of contents"),NuxPicker:l.a._("Your Interests","Label for NUX topic picker in a table of contents"),NuxExtensionUpsell:l.a._("Your Browser","Label for NUX Browser Extension in a table of contents")};s=p?f[e.moduleName]:""}return"all"===t&&(u=Ue,s={NuxGenderStep:l.a._("You","Label for NUX gender step in a table of contents, where text should be short since there is not much space to show it"),NuxLocaleCountryStep:l.a._("Language","Label for NUX language/locale step in a table of contents, where text should be short since there is not much space to show it"),NuxPicker:l.a._("Interests","Label for NUX topic picker in a table of contents, where text should be short since there is not much space to show it"),NuxExtensionUpsell:l.a._("Extension","Label for NUX Browser Extension in a table of contents, where text should be short since there is not much space to show it")}[e.moduleName]||""),Be(o,u,a,s,d)}(e))}))),o.a.createElement(d.c,{width:Pe}))}));function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"],Xe=110,qe=280,Ve=575,Je=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),l=0;l<c;l++)s[l]=arguments[l];return a=this,i=(e=He(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==Fe(i)&&"function"!=typeof i?We(a):i,Ye(We(We(n)),"state",{animateIn:!0}),Ye(We(We(n)),"runAnimation",(function(){window.setTimeout((function(){return n.setState({animateIn:!1})}),200)})),Ye(We(We(n)),"renderOnHomefeed",(function(){var e=n.props,t=e.children,a=e.nuxStep,i=e.steps,c=e.isLoading,s=e.onPrevStepClick,l=n.state.animateIn,u=["NuxPicker","NuxEducationLoader"].includes(a.moduleName)&&!c?Ve:qe,p="NuxEducationLoader"===a.moduleName||i.length<=1;return o.a.createElement(r.Fragment,null,o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{background:"rgba(255, 255, 255, 0.8)",top:-104,zIndex:999}},height:64,position:"absolute",width:"100%"}),o.a.createElement(d.c,{color:"white",dangerouslySetInlineStyle:{__style:{margin:"40px 40px 16px",opacity:l?0:1,transition:"height .1s, opacity .1s ease-in .1s",textAlign:"center"}},height:l?0:u,overflow:"scroll"},o.a.createElement(d.c,{alignItems:"center",direction:"column",display:"flex",height:"100%",minWidth:k.m,position:"relative"},!p&&o.a.createElement(De,{currentNuxStep:a,onPrevStepClick:s,renderType:"dots",steps:i,inHomefeedExp:!0}),t)),o.a.createElement(d.r,null,o.a.createElement(d.c,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{opacity:.8,top:u+Xe,transition:"height .1s linear .1s"}},height:l?0:"100%",position:"absolute",left:!0,right:!0})),c&&o.a.createElement(d.r,null,o.a.createElement(d.c,{bottom:!0,dangerouslySetInlineStyle:{__style:{zIndex:999}},height:"100vh",left:!0,position:"absolute",right:!0,top:!0},o.a.createElement(Te.a,null))))})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.isRenux,r=t.isSimpleRenux,o=t.requestContext;document.body&&(document.body.style.overflow="hidden");var a=new q.c(o,"web_renux_moving_bg_pins");n&&!r&&a.enabled()&&(this.windowScrollInterval=window.setInterval((function(){window.scrollBy(0,1)}),50),this.windowScrollTimer=window.setTimeout((function(){window.clearInterval(e.windowScrollInterval)}),12e4)),Ne.c.pause(),this.runAnimation()}},{key:"componentDidUpdate",value:function(){this.runAnimation()}},{key:"componentWillUnmount",value:function(){this.windowScrollInterval&&window.clearInterval(this.windowScrollInterval),this.windowScrollTimer&&window.clearTimeout(this.windowScrollTimer),document.body&&(document.body.style.overflow=""),Ne.c.resume()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.displayHide,i=t.onHide,c=t.onPrevStepClick,s=t.nuxStep,u=t.steps,p=t.isLoading,f=t.showCounter,m=t.showTableContents,h=t.showShortRenuxPicker,g=u.map((function(e){return e.moduleName})).indexOf(s.moduleName);return o.a.createElement(X.a,{name:"web_homefeed_nux",activate:!1},(function(t){return t.anyEnabled?e.renderOnHomefeed():o.a.createElement(d.r,null,o.a.createElement(d.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",width:"100vw",top:!0},o.a.createElement(d.c,{color:"white",dangerouslySetInlineStyle:{__style:{transition:Ke.includes(s.moduleName)?"":"width 0.5s"}},direction:"column",display:"flex",height:"NuxPicker"===s.moduleName&&h?360:640,position:"relative",shape:"rounded",width:Ke.includes(s.moduleName)?544:800},p&&o.a.createElement(Te.a,null),m&&o.a.createElement(r.Fragment,null,o.a.createElement(De,{currentNuxStep:s,onPrevStepClick:c,renderType:"dots",steps:u}),o.a.createElement(d.j,null)),o.a.createElement(d.c,{flex:"grow",height:"100%",width:"100%"},n),o.a.createElement(d.c,{position:"absolute",marginEnd:8,marginTop:8,right:!0,top:!0},o.a.createElement(Ie,{nuxStepIndex:g,showCounter:f,numSteps:u.length}),a&&i&&o.a.createElement(d.o,{accessibilityLabel:l.a._("cancel","close nux modal"),icon:"cancel",onClick:i,size:"sm"})))))}))}}])&&Me(n.prototype,a),i&&Me(n,i),t}(r.PureComponent),Qe=n("dkdd");function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot="Flyout_Fade ".concat(1.5,"s ease-in-out"),at="Header_Highlight ".concat(1.5,"s ease-in-out"),it=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,n=!(a=(e=et(t)).call.apply(e,[this].concat(c)))||"object"!==Ze(a)&&"function"!=typeof a?nt(r):a,rt(nt(nt(n)),"state",{showFlyout:!1}),rt(nt(nt(n)),"iconRef",o.a.createRef()),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.item,n=e.onComplete;this.setState({showFlyout:"home"===t}),this.dismissTimeout=setTimeout((function(){n()}),1500)}},{key:"componentWillUnmount",value:function(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.interests,r=e.isSmall,a=e.item,i=e.left,c=e.name,s=e.top,u=e.width,p=this.state.showFlyout;return o.a.createElement(d.c,{bottom:!0,left:!0,position:"fixed",right:!0,top:!0},o.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n@keyframes Header_Highlight {\n  0% { transform: scale(1.0); opacity: 0 }\n  15% { transform: scale(1.2); opacity: 1 }\n  22% { transform: scale(1.1); opacity: 1 }\n  85% { transform: scale(1.1); opacity: 1 }\n  100% { transform: scale(1.0); opacity: 0 }\n}\n@keyframes Flyout_Fade {\n  0% { transform: translateY(40px); opacity: 0 }\n  22% { transform: translateY(10px); opacity: 1 }\n  85% { transform: translateY(10px); opacity: 1 }\n  100% { transform: translateY(40px); opacity: 0 }\n}\n"}}),o.a.createElement(d.c,{alignItems:"center",color:"white",dangerouslySetInlineStyle:{__style:{animation:at,WebkitAnimation:at,left:i,top:s}},display:"flex",height:t,justifyContent:"center",padding:2,position:"absolute",ref:this.iconRef,shape:r?"circle":"pill",width:u},"home"===a&&r&&o.a.createElement(d.n,{accessibilityLabel:l.a._("Home","Header logo label"),color:"red",icon:"pinterest",size:28}),"profile"===a&&o.a.createElement(d.a,{name:c,size:"sm",src:""}),!r&&o.a.createElement(d.c,{color:"white",paddingX:2,paddingY:1},o.a.createElement(d.K,{bold:!0,color:"home"===a?"darkGray":"gray",overflow:"normal"},"home"===a?l.a._("Home","Header home tab label"):c))),p&&o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{animation:ot,WebkitAnimation:ot}}},o.a.createElement(d.k,{anchor:this.iconRef.current,idealDirection:"down",onDismiss:function(){},size:297},o.a.createElement(d.c,{alignItems:"center",display:"flex",justifyContent:"center",padding:4,wrap:!0},!!n&&n.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(d.c,{margin:1},o.a.createElement(d.u,{height:45,shape:"rounded",width:45},o.a.createElement(d.p,{alt:e.label,color:e.background_color,naturalHeight:e.images["400x"].height,naturalWidth:e.images["400x"].width,src:e.images["400x"].url}))))}))))))}}])&&$e(n.prototype,r),a&&$e(n,a),t}(r.Component),ct=Object(a.connect)((function(e){return{name:e.viewer.firstName||""}}))(it),st=n("POeB"),lt=n("yxuo"),ut=function(e){var t=e.interests,n=e.InterestComponentToRender,r=e.gridContainerRef,a=t&&t.length<1,i=k.l.DESKTOP;return o.a.createElement("div",{style:i.STYLES},o.a.createElement(d.v,{columnWidth:i.COLUMN_WIDTH,comp:n,loadItems:function(){},gutterWidth:i.GUTTER_WIDTH,items:t,minCols:i.COLUMNS,scrollContainer:function(){return r||window}}),o.a.createElement(d.G,{accessibilityLabel:l.a._("Loading topics"),show:a}))},dt=n("x0Vy"),pt=function(e){var t=e.interests,n=e.handleInterestClickFn,r=e.interestFlipMessages,a=e.interestsToFlip,i=e.isRenux,s=function(e){e.itemIdx;var c=e.data,s={clickHandler:n(c),interest:c,key:c.id,isRenux:i,isSelected:c.is_followed,flipText:r[c.id]||"",shouldFlip:a.has(c.id)};return t.length>0&&_e.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement(dt.a,s)},u=t.length>5&&"viewed_recs"===Object(c.d)(t[0]);return o.a.createElement(X.a,{name:"web_nux_picker_pfy_section",isEligible:!i&&u},(function(n){var r=n.anyEnabled,a=t.slice(0,5),i=t.slice(5);return r?o.a.createElement(o.a.Fragment,null,o.a.createElement(d.c,{paddingX:8,marginTop:1,marginBottom:1,wrap:!0},o.a.createElement(d.K,{bold:!0,size:"md"},l.a._("Recommended for you","Title above a personalized list of topics for user to follow"))),o.a.createElement(ut,Object.assign({},e,{interests:a,InterestComponentToRender:s})),o.a.createElement(d.c,{paddingX:8,marginTop:7,marginBottom:1,wrap:!0},o.a.createElement(d.K,{bold:!0,size:"md"},l.a._("More topics",'Title above list of topics user can follow. Previous section said "Recommended for you"'))),o.a.createElement(ut,Object.assign({},e,{interests:i,InterestComponentToRender:s}))):o.a.createElement(ut,Object.assign({},e,{InterestComponentToRender:s}))}))},ft=n("IO+S"),mt=function(e){var t=e.categories,n=e.handleInterestClickFn,r=e.interestFlipMessages,a=e.interestsToFlip,i=e.isRenux;return o.a.createElement(d.c,{display:"flex",direction:"row",justifyContent:"between",wrap:!0,paddingX:8},t.map((function(e){return o.a.createElement(d.c,{key:e.title,paddingY:1},o.a.createElement(d.K,{size:"xl",bold:!0},e.title),o.a.createElement(d.c,{direction:"row",display:"flex",justifyContent:"between"},e.interests.map((function(e){var t={clickHandler:n(e),interest:e,key:e.id,isSelected:e.is_followed,isCategorized:!0,isRenux:i,flipText:r[e.id]||"",shouldFlip:a.has(e.id)};return o.a.createElement(d.c,{key:e.id,padding:1},o.a.createElement(dt.a,t))}))))})))};function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var wt=n.n(ft)()((function(){_e.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)})),vt=function(e){function t(){var e,n,r,o,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=this,o=(e=bt(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==ht(o)&&"function"!=typeof o?_t(r):o,a=_t(_t(n)),c=function(){var e=n.gridContainer.scrollTop===n.gridContainer.scrollHeight-n.gridContainer.offsetHeight;wt(),n.props.handleBottomScroll(e)},(i="handleScroll")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.categorized,r=t.categoryProps,a=t.disableScroll,i=t.handleBottomScroll,c=t.handleInterestClickFn,s=t.isRenux,u=t.interests,p=t.showTableOfContents,f=t.interestFlipMessages,m=t.interestsToFlip,h=o.a.createElement(pt,{gridContainerRef:this.gridContainer,handleBottomScroll:i,handleInterestClickFn:c,interests:u,isRenux:s,showTableOfContents:p,interestFlipMessages:f,interestsToFlip:m});return n&&r.categories&&(h=o.a.createElement(mt,Object.assign({},this.props,r))),o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{paddingBottom:!n&&"40px"}},height:p?"280px":"368px",flex:"grow",overflow:a?"visible":"scrollY",width:"800px"},o.a.createElement("div",{onScroll:this.handleScroll,ref:function(t){e.gridContainer=t}},u.length>0?h:o.a.createElement(d.G,{accessibilityLabel:l.a._("Loading default interests"),show:!0})))}}])&&gt(n.prototype,r),a&&gt(n,a),t}(o.a.Component),St=n("q579"),xt=n("p968"),Et=n("yINQ");function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jt(e,t,n[t])}))}return e}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(){var e,t,n=1e3*(t=90-(e=20),e+Math.floor(Math.random()*t)),r=l.a.getLocaleData().locale,o=Object(xt.d)(r,n,{shortform:!0});return function(e){var t=e.length;return e[Math.floor(Math.random()*t)]}([Object(i.i)(l.a.ngettext("{{ formattedNumber }} person collecting ideas about","{{ formattedNumber }} people collecting ideas about",n,"How many people collect ideas about an interest, where interest name is shown underneath this text, and number is formatted in a short form such as 10K or 1万 instead of 10000 when applicable to the locale"),{formattedNumber:o}),Object(i.i)(l.a.ngettext("{{ formattedNumber }} person saving ideas about","{{ formattedNumber }} people saving ideas about",n,"How many people save ideas about an interest, where interest name is shown underneath this text, and number is formatted in a short form such as 10K or 1万 instead of 10000 when applicable to the locale"),{formattedNumber:o}),Object(i.i)(l.a.ngettext("{{ formattedNumber }} person sharing ideas about","{{ formattedNumber }} people sharing ideas about",n,"How many people share ideas about an interest, where interest name is shown underneath this text, and number is formatted in a short form such as 10K or 1万 instead of 10000 when applicable to the locale"),{formattedNumber:o})])}var At=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Tt(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Ot(o)&&"function"!=typeof o?Pt(r):o,jt(Pt(Pt(n)),"state",{defaultInterests:[],defaultInterestsSet:new Set,categoryProps:{},contextualMap:{},addedContextualTopics:new Set,interestFlipMessages:{},interestsToFlip:new Set,numTopicsToShow:null}),jt(Pt(Pt(n)),"setShortenedRenuxExp",(function(e){var t=n.props,r=t.inShortenedEnabled,o=t.activateShortenedExpFn,a=t.setShortenedRenuxContainer;e.length>0&&"viewed_recs"===Object(c.d)(e[0])&&o&&(o(),r&&(a(),n.setState({numTopicsToShow:5})))})),jt(Pt(Pt(n)),"calculateCategories",(function(){var e={},t=n.getInterestsWithUpdatedIsFollowed(),r=n.handleInterestClickFn;t.forEach((function(t){var n=t.nux_category||"";Object.keys(e).includes(n)?e[n].push(t):e[n]=[t]}));var o=[];if(Object.keys(e).forEach((function(t){o.push({title:t,interests:e[t]})})),6===o.length){for(var a=0;a<o.length;a++){var i=o[a];if(""===i.title||!i.interests||3!==i.interests.length)return}n.setState({categoryProps:{categories:o,handleInterestClickFn:r}})}})),jt(Pt(Pt(n)),"handleInterestClickFn",(function(e){return function(){var t=n.props,r=t.selectedInterests,o=t.onSelectedInterestsChange,a=!Object(c.b)(r,e);o([e],a),n.logInterestClick(a),n.setState({interestsToFlip:new Set([e.id])}),n.contextualUpdateInterests(new Set([e.id]))}})),jt(Pt(Pt(n)),"logInterestClick",(function(e){var t=n.props.isRenux,r=e?1030:1151;Object(E.a)(101,{component:36,element:r,view:t?213:24,viewParameter:172})})),jt(Pt(Pt(n)),"componentName",k.u),jt(Pt(Pt(n)),"recordRenderLogToServer",(function(){var e=n.renderTimers.pop();e.end(),lt.default.logToServer(lt.default.SERVER_LOG_TYPE.RENDER_TIME,lt.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:n.componentName})})),jt(Pt(Pt(n)),"renderTimers",[]),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(t,e),n=t,(r=[{key:"getExtraImageSignal",value:function(){var e=Object(c.a)(),t=e.plpImages,n=e.blpImages,r=this.props.mostRecentPinImages,o=t.concat(n);return r.concat(o)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.isRenux,r=t.isSimpleRenux,o=t.selectedInterests,a=t.limited,i=t.keepFollowingEnabledGroup,c=this.state.interestFlipMessages;S.a.create("NuxInterestsResource",{is_renux:n,logNetworkTimer:!0,loggerComponentName:k.u,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:n&&!r,defaultNuxInterestsOnly:i,limited:a,urlParams:St.a.getQueryStringParams()}).callGet({showError:!1},{retries:1}).then((function(t){if(t.resource_response&&t.resource_response.data){e.logSignupTiming();var n=e.mapInterestsForDisplay(o,t.resource_response.data);e.setShortenedRenuxExp(n),e.setState({defaultInterests:n}),e.getInterestsWithUpdatedIsFollowed().length>0&&e.calculateCategories();var r=new Set;n.forEach((function(e){!0===e.is_followed&&r.add(e.id)})),Object.keys(r).length>0&&e.contextualUpdateInterests(r);var a=Ct({},c);n.forEach((function(e){c[e.id]||(a[e.id]=Rt())})),e.setState({interestsToFlip:new Set(Object.keys(r)),interestFlipMessages:a})}})).catch((function(e){st.a&&st.a.showError(e.message||l.a._("Unable to load topics","Error message when failed to load topics."))}))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){this.state.defaultInterests!==t.defaultInterests&&this.renderTimers.unshift((new Et.a).start())}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.defaultInterests;n!==t.defaultInterests&&(this.renderTimers.length&&this.recordRenderLogToServer(),this.calculateCategories()),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}},{key:"getInterestsWithUpdatedIsFollowed",value:function(){var e=this.props.selectedInterests;return this.state.defaultInterests.map((function(t){return t.is_followed=Object(c.b)(e,t),t}))}},{key:"logSignupTiming",value:function(){var e=_e.b.localStorage.getItem("signupTime");if(e){var t=Date.now()-e;t<k.z&&lt.default.logToServer(lt.default.SERVER_LOG_TYPE.SIGNUP_LOAD,lt.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),_e.b.localStorage.removeItem("signupTime")}}},{key:"mapInterestsForDisplay",value:function(e,t){var n=this,r=t.map((function(e){return Ct({},e,{is_followed:!n.props.keepFollowingEnabledGroup&&e.is_followed,label:e.name})}));this.props.onSelectedInterestsChange(r.filter((function(e){return e.is_followed})),!0);var o=new Set(e.map((function(e){return e.id}))),a=r.filter((function(e){return!o.has(e.id)}));return e.concat(a)}},{key:"preselectInterests",value:function(){var e=this.props,t=e.numberToFollow,n=e.onSelectedInterestsChange,r=this.state.defaultInterests,o=t||k.f;n(r.slice(0,o),!0)}},{key:"contextualUpdateInterests",value:function(e){var t=this.state,n=t.defaultInterests,r=t.defaultInterestsSet,o=t.addedContextualTopics,a=[],i=[],c=!1;n.forEach((function(t){if(a.push(t),r.add(t.id),e.has(t.id)&&!o.has(t.id)){var n=t.contextual_interests.filter((function(e){return!r.has(e.id)}));n.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?a.push.apply(a,kt(n)):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&i.push.apply(i,kt(n)),n.forEach((function(e){r.add(e.id)})),c=!0)}})),i.length>0&&a.push.apply(a,i),c&&this.setState({addedContextualTopics:new Set(kt(o).concat(kt(e))),defaultInterests:a})}},{key:"render",value:function(){var e=this.props,t=e.categorized,n=e.handleBottomScroll,r=e.isRenux,a=e.showTableOfContents,i=this.state,c=i.interestFlipMessages,s=i.interestsToFlip,l=i.numTopicsToShow,u=this.getInterestsWithUpdatedIsFollowed();return o.a.createElement(vt,{categorized:t,categoryProps:this.state.categoryProps,disableScroll:!!l&&l<=5,handleBottomScroll:n,handleInterestClickFn:this.handleInterestClickFn,interests:l?u.slice(0,l):u,interestFlipMessages:c,interestsToFlip:s,isRenux:!!r,showTableOfContents:a})}}])&&Nt(n.prototype,r),a&&Nt(n,a),t}(r.Component),Lt=Object(a.connect)((function(e){var t=e.mostRecentPin;return{mostRecentPinImages:t&&t.plp_image_signatures?t.plp_image_signatures:[]}}),(function(){return{}}))((function(e){return o.a.createElement(X.a,{name:"web_renux_keep_following",isEligible:e.isRenux},(function(t){var n=t.anyEnabled;return o.a.createElement(X.a,{name:"web_renux_short",isEligible:e.isRenux&&!e.isSimpleRenux,activate:!1},(function(t){var r=t.anyEnabled,a=t.customActivate;return o.a.createElement(At,Object.assign({},e,{keepFollowingEnabledGroup:n,inShortenedEnabled:r,activateShortenedExpFn:a}))}))}))})),Ut=n("OLQZ"),Bt=n.n(Ut),Gt=n("Irlq");function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Kt(e,t,n[t])}))}return e}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xt=o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 1))"}},height:40,left:!0,marginTop:-10,position:"absolute",right:!0,top:!0}),qt=function(e){function t(e){var n,a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,c=zt(t).call(this,e),n=!c||"object"!==Dt(c)&&"function"!=typeof c?Yt(a):c,Kt(Yt(Yt(n)),"getButtonState",(function(e,t,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=n.props,s=c.isRenux,u=c.isSimpleRenux,d=c.pickButtonTextGenerator,p=e.length,f=a&&p>=k.o,m=f?0:Math.max(0,t-p),h=o.nextButtonText,g=o.completionNextButtonText,b=d(m),y={done:{buttonText:g||l.a._("Done"),isDisabled:!1,allowSkip:!1},more:{buttonText:s&&!u?l.a._("Next","go to next step"):i.i(h||b,{numberLeftToFollow:"".concat(m)}),isDisabled:!0,allowSkip:!1},skip:{buttonText:l.a._("Skip (pick topics for me)"),isDisabled:!1,allowSkip:!0}};return 0===m?y.done:r?y.skip:y.more})),Kt(Yt(Yt(n)),"setShortenedRenux",(function(){(0,n.props.setShortenedRenuxModal)(),n.setState({showShortRenux:!0})})),Kt(Yt(Yt(n)),"handleBottomScroll",(function(e){var t=n.props,r=t.numberToFollow,o=t.selectedInterests,a=t.skipButton,i={nextButtonText:t.nextButtonText,nextButtonTextSingleTopic:t.nextButtonTextSingleTopic,completionNextButtonText:t.completionNextButtonText},c=n.getButtonState(o,r||k.e,a,i,e);n.setState(Mt({},n.state,c))})),Kt(Yt(Yt(n)),"handleBottomScrollThrottled",Bt()(n.handleBottomScroll,50)),Kt(Yt(Yt(n)),"handleNextClick",(function(){var e,t=n.props,r=t.customProcessFollowedInterests,o=t.isRenux,a=t.isSimpleRenux,i=t.selectedInterests,c=t.followedInterests,s=t.incrementNuxStep,l=t.nuxAnimationElement,u=t.setNuxPickerProgress,d=t.dispatchUpdateFollows,p=t.dispatchSubmitOrientationContext,f=t.requestContext;if(r)return o||u(k.b),r(),void s();if(o){var m=c.reduce((function(e,t){return e[t.id]=t.is_followed,e}),{});e=Promise.resolve(d(m))}else{var h=[],g=[];i.forEach((function(e){h.push(e.id),g.push(e.log_data?e.log_data:null)}));var b={interests:h.join(),log_data:JSON.stringify(g),referrer:"nux",user_behavior_data:Object(Qe.a)()};e=Promise.resolve(p(b))}e.then((function(){o||u(k.b),Object(E.a)(101,{component:17,element:96,view:n.viewType,viewParameter:172});var e=new q.b(f,"web_nux_topics_home_animation");!a&&l&&window.innerHeight>k.n&&(e.checkWithNoActivation("enabled")||e.checkWithNoActivation("enabled_no_bg")||e.checkWithNoActivation("employees"))?n.setState({animateTopics:!0}):s()}))})),Kt(Yt(Yt(n)),"renderSelectedTopicsSubHeader",(function(){var e=n.props.selectedInterests,t=Ft(e.map((function(e){return e.label})),3),r=t[0],a=t[1],c=t[2],s=e.length-3,u=null;return e&&e.length>0&&(u=1===e.length?i.c(l.a._("You've selected {{firstTopic}}.","Subheader text to show the topics a user selects in topic picker"),{firstTopic:r}):2===e.length?i.c(l.a._("You've selected {{firstTopic}} and {{secondTopic}}.","Subheader text to show the topics a user selects in topic picker"),{firstTopic:r,secondTopic:a}):3===e.length?i.c(l.a._("You've selected {{firstTopic}}, {{secondTopic}} and {{thirdTopic}}.","Subheader text to show the topics a user selects in topic picker"),{firstTopic:r,secondTopic:a,thirdTopic:c}):i.c(l.a.ngettext("You've selected {{firstTopic}}, {{secondTopic}}, {{thirdTopic}} and {{count}} more topic.","You've selected {{firstTopic}}, {{secondTopic}}, {{thirdTopic}} and {{count}} more topics.",s,"Subheader text to show the first three topics a user selects in topic picker, followed by a count of remaining topics chosen."),{firstTopic:r,secondTopic:a,thirdTopic:c,count:s.toString()})),o.a.createElement(d.K,{size:"xl"},u)})),Kt(Yt(Yt(n)),"renderOnHomefeed",(function(){var e=n.props.personalizationCopy.headerText,t=n.state,a=t.isDisabled,i=t.allowSkip,c=t.buttonText,s=n.props,l=s.gender,u=s.isRenux,p=s.isSimpleRenux,f=s.numberToFollow,m=s.onSelectedInterestsChange,h=s.preselect,g=s.selectedInterests,b=s.showTableOfContents;return o.a.createElement(r.Fragment,null,o.a.createElement(d.m,{size:"sm",overflow:"normal"},e),o.a.createElement(d.c,{height:"100%",margin:5,overflow:"hidden"},o.a.createElement(d.c,{direction:"column",display:"flex",height:"100%"},o.a.createElement(Lt,{gender:l,handleBottomScroll:n.handleBottomScrollThrottled,isRenux:u,isSimpleRenux:p,numberToFollow:f,onSelectedInterestsChange:m,preselect:h,selectedInterests:g,showTableOfContents:b,setShortenedRenuxContainer:n.setShortenedRenux})),o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 1))",bottom:75}},height:40,position:"absolute",width:k.m})),o.a.createElement(d.c,{"data-test-id":"nux-picker-done-btn",padding:1},o.a.createElement(d.d,{size:"lg",color:i?"gray":"red",text:c,disabled:a,onClick:n.handleNextClick,type:"submit"})))}));var s=e.nextButtonText,u=e.nextButtonTextSingleTopic,p=e.completionNextButtonText,f=e.isRenux,m=e.selectedInterests,h={nextButtonText:s,nextButtonTextSingleTopic:u,completionNextButtonText:p},g=n.getButtonState(m,e.numberToFollow||k.e,e.skipButton,h);return n.state=Mt({},g,{animateTopics:!1,showShortRenux:!1}),n.viewType=f?213:24,n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.setNuxPickerProgress;n||r(k.y),t("topic"),Object(E.a)(13,{view:this.viewType,viewParameter:172})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.numberToFollow,r=t.selectedInterests,o=t.skipButton,a=t.nextButtonText,i=t.nextButtonTextSingleTopic,c=t.completionNextButtonText;if(r.length!==e.selectedInterests.length){var s={nextButtonText:a,nextButtonTextSingleTopic:i,completionNextButtonText:c},l=this.getButtonState(r,n||k.e,o,s);this.setButtonState(l)}}},{key:"setButtonState",value:function(e){this.setState(Mt({},e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.gender,a=t.incrementNuxStep,i=t.isRenux,c=t.isSimpleRenux,s=t.nuxAnimationElement,u=t.onSelectedInterestsChange,p=t.personalizationCopy,f=p.headerText,m=p.subHeaderText,h=t.preselect,g=t.selectedInterests,b=t.showTableOfContents,y=t.numberToFollow,_=this.state,w=_.animateTopics,v=_.isDisabled,S=_.buttonText,x=_.showShortRenux;return o.a.createElement(r.Fragment,null,w&&o.a.createElement(ct,Object.assign({},s,{interests:g,item:"home",onComplete:a})),o.a.createElement(X.a,{name:"web_homefeed_nux",activate:!1},(function(t){return t.anyEnabled?e.renderOnHomefeed():o.a.createElement(X.a,{name:"web_renux_categorized_topics",isEligible:i&&("male"===n||"female"===n)},(function(t){var r=t.group,a=["enabled_categorized","enabled_limited","employees"].includes(r),s="enabled_categorized"===r||"employees"===r;return o.a.createElement(d.c,{direction:"column",display:"flex",height:"100%"},o.a.createElement(d.c,{display:"visuallyHidden",role:"alert"},Object(Gt.b)(l.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected"),{selectedTopicsCount:g.length})),o.a.createElement(X.a,{name:"web_nux_pick_5_topic_picker_header",isEligible:!i&&!c},(function(t){var n=t.anyEnabled,r=t.group;return o.a.createElement(d.c,{display:"enabled_center_large"===r?"flex":"block",justifyContent:"enabled_center_large"===r?"center":"start",paddingX:8,marginTop:8,marginBottom:s?3:8,wrap:!0},o.a.createElement(d.m,{size:"enabled_center_large"===r?"sm":"xs"},f),i&&o.a.createElement(d.K,{size:"xl"},m),o.a.createElement(X.a,{name:"web_nux_selected_topics_subheader",isEligible:!i&&!n},(function(t){return t.anyEnabled?e.renderSelectedTopicsSubHeader():null})))})),o.a.createElement(Lt,{categorized:s,gender:n,handleBottomScroll:e.handleBottomScrollThrottled,isRenux:i,isSimpleRenux:c,limited:a,numberToFollow:y,onSelectedInterestsChange:u,preselect:h,selectedInterests:g,setShortenedRenuxContainer:e.setShortenedRenux,showTableOfContents:b}),o.a.createElement(d.c,{position:"relative"},!s&&!x&&Xt,o.a.createElement(d.c,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:s?3:4,paddingX:8},o.a.createElement(d.d,{size:"lg",color:"red",text:S,disabled:v,onClick:e.handleNextClick,type:"submit"}))))}))})))}}])&&Ht(n.prototype,a),c&&Ht(n,c),t}(r.Component);Kt(qt,"defaultProps",{skipButton:!1,pickButtonTextGenerator:function(e){return l.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",e,"number of interests left to pick")}});var Vt=Object(C.compose)(V.e,Object(a.connect)((function(e){var t=e.viewer,n=e.ui;return{gender:t&&t.gender?t.gender:"",nuxAnimationElement:n&&n.header&&n.header.nuxAnimationElements&&n.header.nuxAnimationElements.hf?n.header.nuxAnimationElements.hf:void 0}}),(function(e){return{dispatchSetNuxStepProgress:function(t){return e(Object(O.a)(t))},dispatchUpdateFollows:function(t){return e(Object(G.e)(t))},dispatchSubmitOrientationContext:function(t){return e(Object(G.b)(t))},setNuxPickerProgress:function(t){return e(Object(G.a)(k.v,t))}}})))(qt),Jt=n("lx8N"),Qt=n("KstO");var Zt,$t={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#4A90E2",purple:"#B469EB"},en="DelightfulBubbles__",tn=["".concat(en,"fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n"),"".concat(en,"growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n"),"".concat(en,"swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n")].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(Zt=Object.keys($t).map((function(e){var t,n,r,o,a=(t=Object.keys($t),n=e,r=t.length,o=t.indexOf(n)+1>=r?0:t.indexOf(n)+1,t[o]);return"".concat(en,"colorChange_").concat(e," {\n      0% {\n        background-color: ").concat($t[e],";\n      }\n      50% {\n        background-color: ").concat($t[a],";\n      }\n    }\n    ")})))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(Zt)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),nn=Object(Qt.a)(tn);function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var un=function(e){var t=e.delay,n=e.diameter,r=e.height,a=e.initialColor,i=e.width,c=e.xOffset,s=e.yOffset,l=function(e,t,n,r,o,a,i,c){return{bubblePositionStyles:{position:"absolute",marginLeft:"".concat(a/2-o,"px"),marginTop:"".concat(n/2-o,"px"),left:"".concat(i,"px"),top:"".concat(c,"px")},bubbleSwirlStyles:{animation:"".concat(en,"swirl 6s ease-in-out ").concat(e,"s infinite forwards"),WebkitAnimation:"".concat(en,"swirl 6s ease-in-out ").concat(e,"s infinite forwards")},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:"".concat(en,"growShrink 6s ease-in-out ").concat(e,"s infinite alternate"),WebkitAnimation:"".concat(en,"growShrink 6s ease-in-out ").concat(e,"s infinite alternate")},bubbleShapeStyles:{height:"".concat(t,"px"),width:"".concat(t,"px"),borderRadius:"50%",backgroundColor:$t[r],opacity:0,animation:"".concat(en,"colorChange_").concat(r," 12s steps(1, start) ").concat(e,"s infinite forwards,\n      ").concat(en,"fadeIn 3s linear ").concat(e,"s 1 forwards"),WebkitAnimation:"".concat(en,"colorChange_").concat(r," 12s steps(1, start) ").concat(e,"s infinite forwards,\n      ").concat(en,"fadeIn 3s linear ").concat(e,"s 1 forwards")}}}(t,n,r,a,Math.floor(n/2),i,c,s);return o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:l.bubblePositionStyles}},o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:l.bubbleSwirlStyles}},o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:l.bubbleGrowShrinkStyles}},o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:l.bubbleShapeStyles}}))))},dn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,n=!(o=(e=an(t)).call.apply(e,[this].concat(i)))||"object"!==rn(o)&&"function"!=typeof o?sn(r):o,ln(sn(sn(n)),"state",{isInitialized:!1}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.requestAnimationFrameId=window.requestAnimationFrame((function(){e.setState({isInitialized:!0})}))}},{key:"shouldComponentUpdate",value:function(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}},{key:"getSize",value:function(){return void 0!==this.props.width&&void 0!==this.props.height?{height:this.props.height,width:this.props.width}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{}}},{key:"createBubbles",value:function(e,t){for(var n=this.props,r=n.bubbleSize,a=n.delayFactor,i=n.delayOffset,c=n.numBubbles,s=n.xRadiusAdjustment,l=e+2*n.yRadiusAdjustment,u=t+2*s,d=[],p=Object.keys($t),f=0;f<c;f+=1){var m=r+Object(Qt.c)(-4,4),h=p[f%p.length],g=Object(Qt.b)(l,u),b=g.x,y=g.y;d.push(o.a.createElement(un,{delay:f*a+i,diameter:m,initialColor:h,xOffset:b,yOffset:y,height:e,width:t,key:f}))}return d}},{key:"render",value:function(){var e=this,t=this.getSize();return o.a.createElement(d.c,Object.assign({},t,{position:"relative"}),o.a.createElement("style",{dangerouslySetInnerHTML:{__html:nn}}),o.a.createElement("div",{ref:function(t){return e.containerElement=t}},this.state.isInitialized&&this.createBubbles(t.height||0,t.width||0),o.a.createElement(d.c,{position:"relative"},this.props.children)))}}])&&on(n.prototype,r),a&&on(n,a),t}(r.Component);ln(dn,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var pn=dn,fn=n("ggpB"),mn=n("hCBh");function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vn=250,Sn=function(e){function t(){var e,n,a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),p=0;p<s;p++)u[p]=arguments[p];return a=this,c=(e=bn(t)).call.apply(e,[this].concat(u)),n=!c||"object"!==hn(c)&&"function"!=typeof c?_n(a):c,wn(_n(_n(n)),"state",{animateProfile:!1,inProfileAnimationExp:!!n.props.nuxAnimationElement&&window.innerHeight>k.n&&new q.c(n.props.requestContext,"web_nux_profile_animation").enabled(),name:n.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),wn(_n(_n(n)),"onNameChange",(function(e){var t=e.value;n.setState({name:t||"",showNoNameError:!t||i.h(t),showNameLengthError:!!t&&t.length>30})})),wn(_n(_n(n)),"toggleNameInput",(function(){var e=n.state,t=e.showNameInput,r=e.inProfileAnimationExp;if(t&&r){var o=Object(mn.a)(n.state.name);n.props.updateNameInfo(o)}n.setState((function(e){var t=e.showNameLengthError,n=e.showNoNameError,r=e.showNameInput;return{showNameInput:t||n||!r}})),Object(E.a)(101,{element:136,view:24,viewParameter:259})})),wn(_n(_n(n)),"continueAndSave",(function(){var e=n.props,t=e.incrementNuxStep,r=e.setNuxNameProgress,o=e.updateNameInfo,a=n.state,i=a.inProfileAnimationExp,c=a.name;o(Object(mn.a)(c)).then((function(){r(),Object(E.a)(101,{element:96,view:24,viewParameter:259}),i?n.setState({animateProfile:!0}):t()}))})),wn(_n(_n(n)),"getError",(function(){var e=n.state,t=e.showNameLengthError,r="";return e.showNoNameError?r=l.a._("And your name is...?","Error flyout when user doesn't input name"):t&&(r=l.a._("Hmm, that's a few characters too long. Try a nickname instead?","Name exceeds 30 character maximum error")),r})),wn(_n(_n(n)),"handleHideAccountSwitcher",(function(){return n.setState({showAccountSwitchModal:!1})})),wn(_n(_n(n)),"handleNotYouClick",(function(e){e.event.preventDefault(),Object(fn.a)("web.nux.click_login"),n.setState({showAccountSwitchModal:!0})})),wn(_n(_n(n)),"renderOnHomefeed",(function(){var e=n.props.personalizationCopy,t=e.headerText,a=e.subHeaderText,c=n.state,s=c.name,u=c.showNameInput,p=i.c(l.a._("{{ titleText }}, {{ name }}!","Greeting with inferred name."),{titleText:t,name:s}),f=t,m=n.getError(),h=o.a.createElement(d.c,{"data-test-id":"nux-edit-name-btn",marginStart:1},o.a.createElement(d.o,{accessibilityLabel:l.a._("Edit name","Icon to edit name inferred from email"),bgColor:"transparent",icon:u?"check":"edit",onClick:n.toggleNameInput,size:"sm"}));return o.a.createElement(r.Fragment,null,o.a.createElement(d.c,{alignItems:"center",display:"flex",maxWidth:"100%"},o.a.createElement(d.m,{size:"sm",truncate:!0},u?f:p),u&&o.a.createElement(d.c,{"data-test-id":"nux-edit-name-input",marginLeft:2,width:vn},o.a.createElement(d.M,{id:"name",errorMessage:m,onChange:n.onNameChange,placeholder:l.a._("Name","Inferred name textfield placeholder"),type:"text",value:s})),h),o.a.createElement(d.K,{align:"center",size:"xl"},a),o.a.createElement(d.c,{"data-test-id":"nux_name_done_btn",direction:"column",display:"flex",flex:"grow",justifyContent:"center",padding:1},o.a.createElement(d.d,{accessibilityLabel:l.a._("Next","go to next nux step"),color:"red",disabled:!!m,onClick:n.continueAndSave,text:l.a._("Next","next nux step button"),type:"button"})))})),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.props.dispatchSetNuxStepProgress("welcome"),Object(E.a)(13,{view:24,viewParameter:259})}},{key:"render",value:function(){var e=this,t=this.props,n=t.incrementNuxStep,r=t.personalizationCopy,a=r.headerText,c=r.subHeaderText,s=t.nuxAnimationElement,u=t.userEmail,p=this.state,f=p.animateProfile,m=p.name,h=p.showAccountSwitchModal,g=p.showNameInput,b=i.c(l.a._("{{ titleText }}, {{ name }}!","Greeting with inferred name."),{titleText:a,name:m}),y=a,_=l.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account"),w=this.getError(),v=o.a.createElement(d.c,{"data-test-id":"nux-edit-name-btn",marginStart:1},o.a.createElement(d.o,{accessibilityLabel:"editName",bgColor:"transparent",icon:g?"check":"edit",onClick:this.toggleNameInput,size:"sm"}));return o.a.createElement(X.a,{name:"web_homefeed_nux",activate:!1},(function(t){return t.anyEnabled?e.renderOnHomefeed():o.a.createElement(o.a.Fragment,null,f&&o.a.createElement(ct,Object.assign({item:"profile",onComplete:n},s)),h&&o.a.createElement(Jt.a,{onDismiss:e.handleHideAccountSwitcher,showAddAccount:!0,hideAccountSwitchValueProp:!0,customTaglineText:l.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account")}),o.a.createElement(d.c,{direction:"column",display:"flex",height:"100%",padding:10,minWidth:"100%"},o.a.createElement(d.c,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"around",marginBottom:10,width:"100%"},o.a.createElement(pn,{delayOffset:-5,xRadiusAdjustment:40},o.a.createElement(d.c,{alignItems:"center",color:"lightWash",direction:"column",display:"flex",height:100,justifyContent:"end",overflow:"hidden",shape:"circle",width:100},o.a.createElement(d.n,{accessibilityLabel:l.a._("Loading state for any sign up registration"),color:"gray",icon:"person",size:70}))),o.a.createElement(d.c,{alignItems:"center",marginTop:5},o.a.createElement(d.K,{align:"center",size:"lg",truncate:!0},u)),o.a.createElement(d.c,{alignItems:"end",display:"flex",width:"100%"},o.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",marginStart:9,maxHeight:170,overflow:"hidden",width:"100%"},o.a.createElement(d.q,{htmlFor:"name"},o.a.createElement(d.m,{size:"sm"},g?y:b)),g&&o.a.createElement(d.c,{alignItems:"center","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",padding:1},o.a.createElement(d.c,{width:vn},o.a.createElement(d.M,{id:"name",errorMessage:w,onChange:e.onNameChange,placeholder:l.a._("name"),type:"text",value:m})),v)),!g&&v),o.a.createElement(d.c,{width:"100%"},o.a.createElement(d.K,{align:"center",size:"xl"},c))),o.a.createElement(d.c,{"data-test-id":"nux_name_done_btn"},o.a.createElement(d.d,{accessibilityLabel:l.a._("Next","go to next nux step"),color:"red",disabled:!!w,onClick:e.continueAndSave,text:l.a._("Next","next nux step button"),type:"button"})),o.a.createElement(d.c,{marginTop:4},o.a.createElement(d.P,{onTouch:e.handleNotYouClick,fullWidth:!1},o.a.createElement(d.K,{size:"lg",align:"center"},_),o.a.createElement(d.K,{size:"lg",align:"center",bold:!0},o.a.createElement(d.t,{href:"#"},l.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account")))))))}))}}])&&gn(n.prototype,a),c&&gn(n,c),t}(r.PureComponent),xn=Object(C.compose)(V.e,Object(a.connect)((function(e){var t=e.viewer,n=e.ui;return{firstName:t.firstName?t.firstName:"",nuxAnimationElement:n&&n.header&&n.header.nuxAnimationElements&&n.header.nuxAnimationElements.profile?n.header.nuxAnimationElements.profile:void 0,userEmail:t.isAuth?t.email:""}}),(function(e){return{dispatchSetNuxStepProgress:function(t){return e(Object(O.a)(t))},updateNameInfo:function(t){return e(Object(G.f)({updateUserData:t}))},setNuxNameProgress:function(){return e(Object(G.a)(k.w,k.b))}}})))(Sn),En=[{moduleName:"NuxPicker"},{moduleName:"NuxExtensionUpsell"},{moduleName:"NuxEducationLoader"}];function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var In=n("JsRk");function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Gn(e,t,n[t])}))}return e}function Rn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=Ln(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Pn(o)&&"function"!=typeof o?Bn(r):o,Gn(Bn(Bn(n)),"state",{followedInterests:[],isLoading:!1,nuxStep:n.getNextStepIndex(-1,n.props.steps,!1),selectedInterests:[],userClickedBack:!1,showShortRenuxModal:!1}),Gn(Bn(Bn(n)),"onComplete",(function(){var e=n.props,t=e.handleComplete,r=e.isLandingPage,o=e.isRenux,a=e.dispatchUpdateFirstHomeFeedRequestAfterNuxFlag;Object(E.a)(4105,{view:o?213:24,viewParameter:171}),o||a(!0),t(),r&&n.handleNavigate("/")})),Gn(Bn(Bn(n)),"mounted",!1),Gn(Bn(Bn(n)),"handleNavigate",(function(e){var t=n.props.router;if(t)t.push({pathname:e,state:{completedNux:!0}});else{var r=new u.a;s.a.navigate(e,r)}})),Gn(Bn(Bn(n)),"handleSelectedInterestsChange",(function(e,t){n.setState((function(r,o){var a=n.getUpdatedSelectedInterests(r.selectedInterests,e,t),i=n.getUpdatedFollowInterests(r.followedInterests,e,t);return(0,o.dispatchSetNuxSelectedInterestImages)(a.reduce((function(e,t){if(t&&t.images&&t.images["400x"]){var n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e}),[])),{selectedInterests:a,followedInterests:i}}))})),Gn(Bn(Bn(n)),"nuxSteps",{NuxGenderStep:oe,NuxLocaleCountryStep:Ce,NuxPicker:Vt,NuxExtensionUpsell:K,NuxEducationLoader:L,NuxWelcomeNameStep:xn}),Gn(Bn(Bn(n)),"setShortenedRenuxModal",(function(){return n.setState({showShortRenuxModal:!0})})),Gn(Bn(Bn(n)),"onPrevStepClickFn",(function(e){var t=n.props,r=t.steps,o=t.isRenux,a=r[e].moduleName;return function(){var t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:172}[a];t&&Object(E.a)(101,{component:17,element:34,view:o?213:24,viewParameter:t}),e>0&&n.setState({nuxStep:e-1,userClickedBack:!0})}})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.isRenux;this.mounted=!0,Object(E.a)(4104,{view:e?213:24,viewParameter:170})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getUpdatedFollowInterests",value:function(e,t,n){var r=Rn(e);return t.forEach((function(e){var t=jn({},e,{is_followed:n}),o=!1;r=r.map((function(e){return e.id===t.id?(o=!0,t):e})),o||r.push(t)})),r}},{key:"getUpdatedSelectedInterests",value:function(e,t,n){var r=Rn(e);return t.forEach((function(t){var o=Object(c.b)(r,t);n&&!o?r.push(jn({},t,{is_followed:n})):!n&&o&&(r=e.filter((function(e){return e.id!==t.id})))})),r}},{key:"getPersonalizationCopy",value:function(e){var t,n,r=this.props,o=r.isRenux,a=r.isSimpleRenux,c=r.requestContext,s=r.steps,u=e.moduleName,d=s.map((function(e){return e.moduleName})).indexOf(u)===s.length-2;switch(u){case"NuxWelcomeNameStep":return{headerText:l.a._("Welcome to Pinterest","greeting on welcome name step"),subHeaderText:l.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step")};case"NuxGenderStep":return t=l.a._("How do you identify?","Header in NUX gender step."),n="",o&&(t=l.a._("It’s time to refresh your feed!","Title on the modal asking user's gender"),n=l.a._("How would you describe yourself?","Subtitle on the modal asking user's gender")),{headerText:t,subHeaderText:n};case"NuxLocaleCountryStep":return{headerText:l.a._("Pick your language and country/region","Header in NUX locale/country step")};case"NuxPicker":var p=new q.b(c,"web_nux_pick_5_topic_picker_header");return o&&!a?(t=l.a._("What are you into these days?","Header in ReNUX topic picker step."),n=l.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.")):(t=d?l.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step."):l.a._("Tell us what you're interested in","Header in NUX topic picker step."),o||a||!(p.checkWithNoActivation("enabled_center_large")||p.checkWithNoActivation("enabled")||p.checkWithNoActivation("employees"))||(t=i.c(l.a._("Pick {{ numberToFollow }} or more topics","NUX topic picker header with required number of topics to follow"),{numberToFollow:String(k.e)})),n=i.c(l.a._("Pick {{ numberToFollow }} (or more!) to start discovering new ideas","Subheader in NUX topic picker step with required number of topics to follow"),{numberToFollow:String(k.e)})),{headerText:t,subHeaderText:n};case"NuxExtensionUpsell":return{headerText:t=d?l.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step."):l.a._("Get our handy browser button","Header in NUX browser extension upsell step."),subHeaderText:l.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step")};default:return{}}}},{key:"nuxStepToRender",value:function(e,t){var n=this,r=this.state,a=r.followedInterests,i=r.selectedInterests,c=this.props,s=c.isRenux,l=c.isSimpleRenux,u=e.moduleName,d=this.nuxSteps[u],p=this.hasNuxStep("NuxGenderStep");return o.a.createElement(V.a,null,(function(r){return o.a.createElement(d,Object.assign({},e.options,{experiments:r.experiments,followedInterests:a,hasGenderStep:p,incrementNuxStep:n.incrementNuxStep(n.state.nuxStep),isSimpleRenux:l,isRenux:s,numberToFollow:s&&!l?k.x:k.e,onSelectedInterestsChange:n.handleSelectedInterestsChange,personalizationCopy:n.getPersonalizationCopy(e),requestContext:r,selectedInterests:i,showTableOfContents:t,toggleLoadingIndicator:function(e){return n.setState({isLoading:e})},setShortenedRenuxModal:n.setShortenedRenuxModal}))}))}},{key:"getNextStepIndex",value:function(e,t,n){var r=this.props.isRenux,o=e+1;if(n)return o;if(!r)for(;o<t.length&&t[o].isCompleted;)o+=1;return o}},{key:"incrementNuxStep",value:function(e){var t=this,n=this.props,r=n.steps,o=n.dispatchSubmitOrientationContextFollow,a=this.state.userClickedBack,i=this.getNextStepIndex(e,r,a);return i>=r.length?this.onComplete:function(){var n=function(n){if(e!==n)return t.setState({nuxStep:n})};r.length>i&&r[i].options&&r[i].options.onStartApi&&r[i].options.onStartApi===k.h?o().finally(n):n(i)}}},{key:"hasNuxStep",value:function(e){return this.props.steps.some((function(t){return t.moduleName===e}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.nuxStep,r=e.showShortRenuxModal,a=this.props,i=a.handleDismiss,c=a.isLandingPage,s=a.isPartner,l=a.isRenux,u=a.isSimpleRenux,d=a.requestContext,p=a.steps,f=function(e){return["NuxEducationLoader"].includes(e)},m=p.filter((function(e){return!f(e.moduleName)})),h=!f(p[n].moduleName)&&!c&&!l,g=h&&m.length>1&&!s,b=h&&!g,y=!(!l||f(p[n].moduleName));return o.a.createElement(Je,{displayHide:y,isLoading:t,isRenux:l,isSimpleRenux:u,nuxStep:p[n],onHide:i,onPrevStepClick:this.onPrevStepClickFn(n),requestContext:d,showCounter:b,showShortRenuxPicker:r,showTableContents:g,steps:m},this.nuxStepToRender(p[n],g))}}])&&An(n.prototype,r),a&&An(n,a),t}(r.Component);Gn(Dn,"defaultProps",{isRenux:!1,isSimpleRenux:!1});t.a=Object(C.compose)(V.e,Object(a.connect)((function(e){var t=e.viewer;return{isPartner:t.isAuth&&t.isPartner}}),(function(e){return{dispatchSetNuxSelectedInterestImages:function(t){return e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t))},dispatchSubmitOrientationContextFollow:function(){return e(Object(G.c)())},dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:function(t){return e(Object(G.d)(t))}}})),x.a,(function(e){return function(t){function n(){var e,t,r,o,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=this,t=!(o=(e=Cn(n)).call.apply(e,[this].concat(l)))||"object"!==On(o)&&"function"!=typeof o?Tn(r):o,a=Tn(Tn(t)),c={skipExtStep:!1},(i="state")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,t}var r,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(n,t),r=n,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.steps;U.a.extensionReady(k.p).then((function(n){t.some((function(e){return"NuxExtensionUpsell"===e.moduleName}))&&n&&e.setState({skipExtStep:!0})}))}},{key:"render",value:function(){var t=this.props.steps;return this.state.skipExtStep&&(t=t.filter((function(e){return"NuxExtensionUpsell"!==e.moduleName}))),o.a.createElement(e,Object.assign({},this.props,{steps:t}))}}])&&kn(r.prototype,a),i&&kn(r,i),n}(r.PureComponent)}),(function(e){return function(t,n){return o.a.createElement(e,Object.assign({},t,{steps:t.steps||En}))}}),In.withRouter)(Dn)}}]);
//# sourceMappingURL=pjs-21-caa001cdc14dfc41c2d6.js.map
