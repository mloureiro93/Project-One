(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["FlashlightPageDesktop",14,138],{"/Mjl":function(e,t,n){"use strict";t.a={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1}},"/W2v":function(e,t,n){"use strict";function r(e){var t=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images;return t&&t.length>0}n.d(t,"a",(function(){return r}))},"/eLK":function(e,t,n){"use strict";n.r(t);var r=n("GyhR"),o=n.n(r),i=n("ckdM"),a=n("Ivf5"),c=n("Yu3F"),l=n("Qo1m"),u=n("JsRk"),s=n("+U6O"),p=n("9Y9K"),d="M24 12a2 2 0 0 1-2 2H7.676l4.631 4.586a2 2 0 1 1-2.829 2.828L0 12l9.478-9.414a2 2 0 0 1 2.829 2.828L7.676 10H22a2 2 0 0 1 2 2";var f=Object(p.compose)(Object(a.connect)((function(e){return{hasHistory:e.history.previous.length>=1}})),u.withRouter)((function(e){var t=e.hasHistory,n=e.pinId,r=e.router;return o.a.createElement(c.a,{accessibilityLabel:l.a._("Go back","Accessible icon for close button"),bgColor:"transparent",hoverBgColor:"lightGray",onClick:function(){t?r.goBack():r.replace("/pin/".concat(n,"/"))}},o.a.createElement(s.c,{display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(s.c,{padding:1},o.a.createElement(s.n,{dangerouslySetSvgPath:{__path:d},color:"darkGray",inline:!0,accessibilityLabel:l.a._("Go back","Accessible icon for close button"),size:20}))))})),m=n("PNko"),y=n.n(m),h=n("NmcB");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=10,S=48,P=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=v(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==b(o)&&"function"!=typeof o?O(r):o,_(O(O(n)),"state",{cropArea:n.props.initialCropArea||{h:0,w:0,x:0,y:0},cropChangeType:null,showShadowOverlay:!0}),_(O(O(n)),"cropResizeDirection",null),_(O(O(n)),"_checkCropHandleValid",(function(e,t){var r=n.state.cropArea,o=r.h,i=r.w,a=r.x,c=r.y;switch(n.cropResizeDirection){case"ne":e<a&&t>c+o?n.cropResizeDirection="sw":e<a?n.cropResizeDirection="nw":t>c+o&&(n.cropResizeDirection="se");break;case"nw":e>a+i&&t>c+o?n.cropResizeDirection="se":e>a+i?n.cropResizeDirection="ne":t>c+o&&(n.cropResizeDirection="sw");break;case"se":e<a&&t<c?n.cropResizeDirection="nw":e<a?n.cropResizeDirection="sw":t<c&&(n.cropResizeDirection="ne");break;case"sw":e>a+i&&t<c?n.cropResizeDirection="ne":e>a+i?n.cropResizeDirection="se":t<c&&(n.cropResizeDirection="nw")}})),_(O(O(n)),"handleOnTouchStart",(function(e){if(e.preventDefault(),e.stopPropagation(),e.target){var t=e.touches[0],r=t.clientX,o=t.clientY;n.handleOnPointerDown(e,r,o)}})),_(O(O(n)),"handleOnMouseDown",(function(e){if(e.preventDefault(),e.stopPropagation(),e.target){var t=e.clientX,r=e.clientY;n.handleOnPointerDown(e,t,r)}})),_(O(O(n)),"handleOnPointerDown",(function(e,t,r){var o=e.target,i=n.state.showShadowOverlay,a=n._cropperOverlay.getBoundingClientRect();n._cropperOverlayCoor={x:a.left,y:a.top};var c=t-n._cropperOverlayCoor.x,l=r-n._cropperOverlayCoor.y;if(o.className.includes("cropperHandle")){n.setState({cropChangeType:"resize"});var u=o.className;u.includes("ne")&&(n.cropResizeDirection="ne"),u.includes("nw")&&(n.cropResizeDirection="nw"),u.includes("se")&&(n.cropResizeDirection="se"),u.includes("sw")&&(n.cropResizeDirection="sw")}else o.className.includes("cropSection")?(n.setState({cropChangeType:"move"}),n.cropChangeStartCoor={x:c,y:l}):!o.className.includes("shadowMask")&&i||(n.cropChangeStartCoor={x:c,y:l},n.setState({cropArea:{h:0,w:0,x:c,y:l},cropChangeType:"select",showShadowOverlay:!0}))})),_(O(O(n)),"handleOnTouchMove",(function(e){return n._cropperOverlayCoor&&n.handleOnPointerMove(e.touches[0].clientX,e.touches[0].clientY)})),_(O(O(n)),"handleOnMouseMove",(function(e){return n._cropperOverlayCoor&&n.handleOnPointerMove(e.clientX,e.clientY)})),_(O(O(n)),"handleOnPointerMove",(function(e,t){var r=n.state,o=r.cropArea,i=o.h,a=o.w,c=o.x,l=o.y,u=r.cropChangeType,s=n.props.imageSize,p=e-n._cropperOverlayCoor.x,d=t-n._cropperOverlayCoor.y;if("resize"===u){var f=Math.max(Math.min(p,s.w-E),E),m=Math.max(Math.min(d,s.h-E),E);switch(n._checkCropHandleValid(f,m),n.cropResizeDirection){case"ne":var y=Math.max(i+(l-m),S),h=Math.max(Math.abs(f-c),S);n.setState({cropArea:{h:y,w:h,x:c,y:y<=S?l:m}});break;case"nw":var b=Math.max(a+(c-f),S),g=Math.max(i+(l-m),S);n.setState({cropArea:{h:g,w:b,x:b===S?c:f,y:g===S?l:m}});break;case"se":var v=Math.max(Math.abs(m-l),S),w=Math.max(Math.abs(f-c),S);n.setState({cropArea:{h:v,w:w,x:c,y:l}});break;case"sw":var O=Math.max(Math.abs(m-l),S),_=Math.max(a+(c-f),S);n.setState({cropArea:{h:O,w:_,x:_===S?c:f,y:l}})}}else if("move"===u){var P=p-n.cropChangeStartCoor.x,C=d-n.cropChangeStartCoor.y,T=Math.max(Math.min(c+P,s.w-a-E),E),I=Math.max(Math.min(l+C,s.h-i-E),E);n.cropChangeStartCoor={x:p,y:d},n.setState({cropArea:{h:i,w:a,x:T,y:I}})}else if("select"===u){var j=Math.max(Math.min(p,s.w),0),k=Math.max(Math.min(d,s.h),0),x=j-n.cropChangeStartCoor.x,R=k-n.cropChangeStartCoor.y;n.setState({cropArea:{h:Math.abs(R),w:Math.abs(x),x:Math.min(n.cropChangeStartCoor.x,j),y:Math.min(n.cropChangeStartCoor.y,k)}})}})),_(O(O(n)),"handleOnMouseUp",(function(e){return n.handleOnPointerUp()})),_(O(O(n)),"handleOnTouchEnd",(function(e){return n.handleOnPointerUp()})),_(O(O(n)),"handleOnPointerUp",(function(){var e=n.state.cropChangeType;"resize"!==e&&"move"!==e&&"select"!==e||n.handleCrop(),n.cropResizeDirection=null})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._cropperOverlay&&document.body&&(window.addEventListener("mouseup",this.handleOnMouseUp),document.body.addEventListener("mousemove",this.handleOnMouseMove),this._cropperOverlay.addEventListener("mousedown",this.handleOnMouseDown))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.initialCropArea&&(this.props.initialCropArea&&e.initialCropArea.h===this.props.initialCropArea.h&&e.initialCropArea.w===this.props.initialCropArea.w&&e.initialCropArea.x===this.props.initialCropArea.x&&e.initialCropArea.y===this.props.initialCropArea.y||this.setState({cropArea:e.initialCropArea}))}},{key:"componentWillUnmount",value:function(){this._cropperOverlay&&document.body&&(window.removeEventListener("mouseup",this.handleOnMouseUp),document.body.removeEventListener("mousemove",this.handleOnMouseMove),this._cropperOverlay.removeEventListener("mousedown",this.handleOnMouseDown))}},{key:"handleCrop",value:function(){var e=this.props,t=e.imageSize,n=e.onChange,r=this.state,o=r.cropChangeType,i=r.cropArea;if(0===i.w&&0===i.h)this.setState({showShadowOverlay:!1,cropChangeType:null}),n({origCrop:{h:t.h-2*E,w:t.w-2*E,x:E,y:E}});else{this.setState({showShadowOverlay:!0,cropChangeType:null});var a,c,l=Math.max(Math.min(i.x,t.w-S-E),E),u=Math.max(Math.min(i.y,t.h-S-E),E);switch(a=i.h<S?S:u+i.h>t.h-E?t.h-u-E:i.h,c=i.w<S?S:l+i.w>t.w-E?t.w-l-E:i.w,o){case"move":Object(h.a)(7603,{view:72});break;case"resize":Object(h.a)(7604,{view:72})}n({origCrop:{h:a,w:c,x:l,y:u}})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFancy,r=t.imageSize,i=r.h,a=r.w,c=t.children,l=this.state,u=l.cropArea,s=u.h,p=u.w,d=u.x,f=u.y,m=l.cropChangeType,h=l.showShadowOverlay,b=y()("shadowOverlay","absolute",{shadowOverlayHide:!h}),g=n?"fancy":"";return o.a.createElement("div",{onTouchMove:this.handleOnTouchMove,onTouchEnd:this.handleOnTouchEnd},o.a.createElement("div",{className:"cropperWrapper block"},o.a.createElement("div",{className:"relative",ref:function(t){e._cropperOverlay=t},onTouchStart:this.handleOnTouchStart},o.a.createElement("div",{className:"cropSection absolute ".concat(n?"fancy":""),style:{height:s,left:d,top:f,width:p}},"select"!==m&&h&&o.a.createElement("div",null,o.a.createElement("div",{className:"cropperHandle absolute ord-nw ".concat(g)}),o.a.createElement("div",{className:"cropperHandle absolute ord-ne ".concat(g)}),o.a.createElement("div",{className:"cropperHandle absolute ord-sw ".concat(g)}),o.a.createElement("div",{className:"cropperHandle absolute ord-se ".concat(g)}))),o.a.createElement("div",{className:b},o.a.createElement("div",{className:"shadowMask absolute",style:{height:f,left:0,top:0,width:"100%"}}),o.a.createElement("div",{className:"shadowMask absolute",style:{height:s,left:0,top:f,width:d}}),o.a.createElement("div",{className:"shadowMask absolute",style:{height:i-f-s,left:0,top:f+s,width:"100%"}}),o.a.createElement("div",{className:"shadowMask absolute",style:{height:s,left:d+p,top:f,width:a-d-p}})),o.a.createElement("div",{className:"absolute cropperAdditional"},c))))}}])&&g(n.prototype,r),i&&g(n,i),t}(o.a.Component),C=n("ykrh");function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=e.showAnimation,n=e.auxData,i=e.index,a=e.onClick,c=e.spotlightCenter;Object(r.useEffect)((function(){Object(h.a)(120,T({view:72,viewParameter:3050,element:1260},n))}),[]);var l=parseFloat((.1*(i+1)).toFixed(2)),u={animation:t?"spotlightDotPop 0.6s ease-out ".concat(l,"s both"):"none"};return o.a.createElement(C.a,{x:c.x,y:c.y,onClick:function(e){e&&(e.stopPropagation(),e.preventDefault()),Object(h.a)(101,T({view:72,viewParameter:3050,element:1260},n)),a(i)},style:u})}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=15;function A(e){var t=e.auxData,n=e.index,i=e.onClick,a=e.spotlightCenter;return Object(r.useEffect)((function(){Object(h.a)(120,k({view:72,viewParameter:3050,element:1260},t))}),[]),o.a.createElement("button",{className:"absolute no-border p0 spotlightButton",key:n,onClick:function(e){e&&(e.stopPropagation(),e.preventDefault()),Object(h.a)(101,k({view:72,viewParameter:3050,element:1260},t)),i(n)},style:{left:a.x,top:a.y,backgroundColor:"transparent"}},o.a.createElement(s.u,{height:R,shape:"circle",width:R},o.a.createElement("div",{className:"bg-white",style:{height:R,width:R,cursor:"pointer"}})))}var D=n("UmN8");function L(e){var t=e.cropArea,n=t.x,r=t.y,o=t.w,i=t.h,a=e.scaledWidth,c=e.scaledHeight;return{h:Math.floor(i*c),w:Math.floor(o*a),x:Math.floor(n*a),y:Math.floor(r*c)}}function M(e){var t=e.cropArea,n=t.x,r=t.y,o=t.w,i=t.h,a=e.cropSource,c=[];return n>=0&&r>=0&&o>=0&&i>=0&&(c=c.concat(["x=".concat(n),"y=".concat(r),"w=".concat(o),"h=".concat(i)])),a&&(c=c.concat("cropSource=".concat(a))),c.length?"?".concat(c.join("&")):""}function N(e){var t=e.pinId,n=M({cropArea:e.cropArea,cropSource:e.cropSource});return"/pin/".concat(t,"/visual-search/").concat(n)}var B=function(e){var t=e.showAnimation,n=e.pinId,r=e.imageSignature,i=e.imageSize,a=e.currentSpotlightIdx,c=e.spotlightAreas,l=e.handleSpotlightClick;return o.a.createElement(D.a,{name:"web_flashlight_improvements_v1"},(function(e){var u=e.group;return c.map((function(e,c){if(c===a)return null;var s=L({cropArea:e,scaledWidth:i.w,scaledHeight:i.h}),p={x:s.x+s.w/2,y:s.y+s.h/2},d={pin_id:n,image_signature:r,visual_objects:JSON.stringify([{x:e.x,y:e.y,w:e.w,h:e.h}])},f="".concat(p.x).concat(p.y);return["enabled_dots","employees"].includes(u)?o.a.createElement(j,{showAnimation:t,auxData:d,index:c,key:f,onClick:l,spotlightCenter:p}):o.a.createElement(A,{auxData:d,index:c,key:f,onClick:l,spotlightCenter:p})}))}))},U=n("ggpB");function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e,t){return Object.keys(e).reduce((function(n,r){return n+Math.abs(e[r]-t[r])}),0)<=4},Y=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=H(t).call(this,e),n=!o||"object"!==F(o)&&"function"!=typeof o?V(r):o,W(V(V(n)),"handleChange",(function(e){var t=e.origCrop;(0,n.props.onChange)({origCrop:t,cropSource:ve.CUSTOM_CROP})})),W(V(V(n)),"handleSpotlightClick",(function(e){var t=n.props,r=t.imageSize;(0,t.onChange)({origCrop:L({cropArea:t.spotlightAreas[e],scaledWidth:r.w,scaledHeight:r.h}),cropSource:ve.SPOTLIGHT_DOT})}));var i=n.props,a=i.imageSize,c=i.initialCropArea,l=i.spotlightAreas.findIndex((function(e){return K(c,L({cropArea:e,scaledWidth:a.w,scaledHeight:a.h}))}));return n.state={currentSpotlightIdx:l},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.imageSize,n=e.initialCropArea,r=e.spotlightAreas.findIndex((function(e){return K(n,L({cropArea:e,scaledWidth:t.w,scaledHeight:t.h}))}));this.setState({currentSpotlightIdx:r})}},{key:"render",value:function(){var e=this,t=this.props,n=t.showAnimation,r=t.imageSize,i=t.initialCropArea,a=t.spotlightAreas,c=t.imageSignature,l=t.pinId,u=this.state.currentSpotlightIdx,s=a&&!!a.length;return o.a.createElement(D.a,{name:"web_flashlight_improvements_v1"},(function(t){var p=t.group;return o.a.createElement(P,{imageSize:r,initialCropArea:i,isFancy:["enabled_cropper","employees"].includes(p),onChange:e.handleChange,onContextMenu:function(e){e.stopPropagation(),Object(U.a)("auth.context_menu_open.pin_visual_search")}},s&&o.a.createElement(B,{showAnimation:n,pinId:l,imageSignature:c,imageSize:r,currentSpotlightIdx:u,spotlightAreas:a,handleSpotlightClick:e.handleSpotlightClick}))}))}}])&&z(n.prototype,r),i&&z(n,i),t}(r.Component);W(Y,"defaultProps",{spotlightAreas:[]});var q=n("xiPO"),Q=n("mzhd"),X=n("3KWM"),J=n("Zw0F"),Z=n("Y2BC");var $=Object(p.compose)(Object(Z.b)({name:"VisualLiveSearchProductFeedResource",key:"feedResource",options:function(e){return e.resourceOptions}}),u.withRouter)((function(e){var t=e.feedResource,n=e.resourceOptions.pin_id,i=e.router,a=t.data,c=t.isAtEnd,u=t.isLoaded,p=t.isFetching,d=t.fetchMore,f=Object(r.useRef)(null),m=Object(J.a)("web_flashlight_polka").anyEnabled;return Object(r.useEffect)((function(){m||i.replace("/pin/".concat(n,"/visual-search/"))}),[]),u?o.a.createElement(s.c,{display:"flex",maxWidth:"100%",ref:f},a&&o.a.createElement(q.default,{columnWidth:X.e,comp:function(e){var t=e.data,n=e.itemIdx;return o.a.createElement(Q.a,{componentType:13176,pin:t,slotIndex:n,surface:"RelatedProductsFeed",viewParameter:3166,viewType:1})},isFetching:p,items:a,loadItems:function(){p||c||d()},paddingStyle:"simplified",viewParameterType:144,scrollContainer:function(){return f.current||window}})):o.a.createElement(s.c,{display:"flex",alignSelf:"center",justifyContent:"center"},o.a.createElement(s.G,{accessibilityLabel:l.a._("Loading related products","Label for loading spinner"),show:!0}))})),ee=n("ZwJW");function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ae=function(e){function t(){var e,n,r,i,a,c,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,s=new Array(u),p=0;p<u;p++)s[p]=arguments[p];return r=this,i=(e=re(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==te(i)&&"function"!=typeof i?ie(r):i,a=ie(ie(n)),l=function(e){var t=e.data,r=e.itemIdx,i=n.props,a=i.resourceOptions.image_signature,c=i.visualLiveSearchResource,l=c&&c.data&&c.data.search_identifier,u="".concat(window.location.pathname,"products/").concat(window.location.search);return"story"===t.type?o.a.createElement(ee.a,{story:t,dangerouslySetActionUrl:u}):o.a.createElement(Q.a,{contextLogData:{viewData:{search_identifier:l},search_identifier:l,image_signature:a},pin:t,slotIndex:r,surface:"FlashlightResultGrid",viewParameter:3050,viewType:72})},(c="renderItem")in a?Object.defineProperty(a,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.visualLiveSearchResource,n=e.onSearchIdChange,r=t&&t.data&&t.data.search_identifier;r&&n(r)}},{key:"componentDidUpdate",value:function(e){var t=e.visualLiveSearchResource.data,n=this.props.visualLiveSearchResource.data,r=n&&n.search_identifier,o=t&&t.search_identifier;r&&r!==o&&this.props.onSearchIdChange(r)}},{key:"render",value:function(){var e=this.props.visualLiveSearchResource,t=e.data,n=e.isFetching,r=e.fetchMore,i=t&&t.results,a=t&&t.search_identifier;return o.a.createElement(s.c,null,i&&a&&o.a.createElement(s.c,null,o.a.createElement(s.v,{columnWidth:X.e,comp:this.renderItem,gutterWidth:X.d,items:i,loadItems:r,minCols:1,scrollContainer:function(){return window}})),o.a.createElement(s.G,{accessibilityLabel:l.a._("Loading search results...","Accessibility label for loading visual search results"),show:n||!a}))}}])&&ne(n.prototype,r),i&&ne(n,i),t}(r.PureComponent),ce=Object(p.compose)(Object(Z.b)({name:"VisualLiveSearchResource",options:function(e){return e.resourceOptions},key:"visualLiveSearchResource"}))(ae),le=n("Q6EP"),ue=n.n(le),se=n("8rWZ"),pe=n("V+Hv");function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ge(e,t,n[t])}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve={SPOTLIGHT_DOT:1,STELA_DOT:4,DEFAULT_CROP:5,CUSTOM_CROP:6},we=function(e){var t=e.images,n=e.image_signature,r=t["564x"]&&t.orig,o=r.url,i=r.width,a=r.height;return i>564&&(a*=564/i,i=564),{width:i,height:a,url:o,imageSignature:n}},Oe=function(e){var t,n=e.initialCropArea,r=e.pin;if(n)t=be({},n);else{var o=r.visual_objects,i=we(r),a=i.width,c=i.height;if(o&&o.length){var l=o[0];t=L({cropArea:{x:l.x,y:l.y,w:l.w,h:l.h},scaledWidth:a,scaledHeight:c})}else{var u=a/6,s=c/6;t={x:u,y:s,w:a-2*u,h:c-2*s}}}return{x:Math.floor(t.x),y:Math.floor(t.y),w:Math.floor(t.w),h:Math.floor(t.h)}},_e=0,Ee="",Se=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=me(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==de(o)&&"function"!=typeof o?he(r):o,ge(he(he(n)),"state",{searchId:""}),ge(he(he(n)),"getResourceOptions",(function(e){var t,n,r,o,i,a,c,l,u=e.pin,s=e.cropArea,p=e.width,d=e.height,f=e.cropSource;return{pin_id:u.id,image_signature:u.image_signature,crop:(t={cropArea:s,scaledWidth:p,scaledHeight:d},n=t.cropArea,r=n.x,o=n.y,i=n.w,a=n.h,c=t.scaledWidth,l=t.scaledHeight,{x:r/c,y:o/l,w:i/c,h:a/l}),crop_source:f}})),ge(he(he(n)),"saveFlashlightImageContainerRef",(function(e){n.flashlightImageContainerRef=e})),ge(he(he(n)),"handleCropperChange",(function(e){var t=e.origCrop,r=e.cropSource,o=n.props,i=o.pinId,a=o.router;N({cropArea:t,pinId:i,cropSource:r})!==window.location.pathname+window.location.search&&a.replace({pathname:"/pin/".concat(i,"/visual-search/"),query:be({},t,{cropSource:r}),search:M({cropArea:t,cropSource:r}),state:{internalNavigation:!0}})})),ge(he(he(n)),"handleSearchIdChange",(function(e){n.setState({searchId:e})})),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialCropArea,n=e.pinResource.data,r=e.pinId,o=e.router;if(!t&&n){var i=N({cropArea:Oe({initialCropArea:t,pin:n}),pinId:r});o.replace(i)}this.flashlightImageContainerRef&&Ee===r&&(this.flashlightImageContainerRef.scrollTop=_e),Object(h.a)(13,{view:72,viewParameter:3050,viewData:{pin_id:r}})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){ue()(e.initialCropArea,this.props.initialCropArea)||this.setState({searchId:""})}},{key:"componentWillUnmount",value:function(){var e=this.props.pinId;this.flashlightImageContainerRef&&(_e=this.flashlightImageContainerRef.scrollTop,Ee=e)}},{key:"renderSpinner",value:function(){return o.a.createElement(s.G,{accessibilityLabel:l.a._("Loading visual search...","Accessibility label for loading visual search page"),show:!0})}},{key:"renderFlashlight",value:function(){var e=this,t=this.props,n=t.pinResource.data,a=t.initialCropArea,c=t.initialCropSource,u=t.router,p=t.view;if(!n)return null;var d=we(n),m=d.width,y=d.height,h=d.url,b=Oe({initialCropArea:a,pin:n}),g=c||ve.DEFAULT_CROP,v=this.getResourceOptions({pin:n,cropArea:b,width:m,height:y,cropSource:g}),w=m+20,O=!(u.location&&u.location.state&&u.location.state.internalNavigation);return o.a.createElement(r.Fragment,null,o.a.createElement(i.a,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"}},o.a.createElement(s.c,{width:"100%",paddingY:3,paddingX:9,display:"flex",alignItems:"center"},o.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:{position:"absolute"}}},o.a.createElement(f,{pinId:n.id})),o.a.createElement(s.c,{flex:"grow"},"products"===p?o.a.createElement(s.K,{size:"xl",bold:!0,align:"center"},l.a._("Products","Header explaining results of flashlight products search")):o.a.createElement(D.a,{name:"web_flashlight_improvements_v1"},(function(e){var t=e.anyEnabled;return o.a.createElement(s.K,{size:"xl",bold:!0,align:"center"},t?l.a._("More Ideas","Header explaining results of flashlight search"):l.a._("Visually similar results","Header explaining results of flashlight search"))}))))),o.a.createElement(pe.a,null,(function(t){return"products"===p?o.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:{marginTop:60}}},o.a.createElement($,{resourceOptions:v})):o.a.createElement(s.c,{display:"flex",paddingX:12},o.a.createElement("div",{style:{position:"fixed",width:w,height:"inherit",overflow:"auto",top:t+60,bottom:0,marginBottom:10},ref:e.saveFlashlightImageContainerRef},o.a.createElement("div",{"data-test-id":"flashlight-enabled-image",style:{width:m,height:y}},o.a.createElement(s.u,{height:y,shape:"rounded",width:m},o.a.createElement(D.a,{name:"web_flashlight_improvements_v1"},(function(t){var r=t.anyEnabled;return o.a.createElement(Y,{showAnimation:O,imageSignature:n.image_signature,imageSize:{h:y,w:m},initialCropArea:b,onChange:e.handleCropperChange,pinId:n.id,spotlightAreas:r?n.visual_objects&&n.visual_objects.slice(1)||[]:n.visual_objects})})),o.a.createElement(s.p,{alt:n.description,naturalHeight:y,naturalWidth:m,src:h})))),o.a.createElement("div",{style:{marginLeft:w+16,width:"100%",position:"relative",top:60}},o.a.createElement(ce,{resourceOptions:v,onSearchIdChange:e.handleSearchIdChange})))})))}},{key:"render",value:function(){var e=this.props.pinResource.isLoaded,t=this.state.searchId;return o.a.createElement(se.a,{view:72,objectId:t},o.a.createElement("div",null,e?this.renderFlashlight():this.renderSpinner()))}}])&&fe(n.prototype,a),c&&fe(n,c),t}(r.Component),Pe=Object(p.compose)(u.withRouter,Object(Z.b)({name:"PinResource",key:"pinResource",options:function(e){return{id:e.pinId,field_set_key:"detailed",fetch_visual_search_objects:!0}}}))(Se),Ce=n("owVk"),Te=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return!isNaN(e)}))};t.default=Object(p.compose)(Object(Ce.a)({name:"Flashlight",resourceDependencies:function(e,t){return[{name:"PinResource",options:{id:t.id,field_set_key:"detailed",fetch_visual_search_objects:!0}}]}}))((function(e){var t=e.params,n=e.location,r=e.route.props.showProductsFeed,i=t.id,a=n.query,c=parseInt(a.x,10),l=parseInt(a.y,10),u=parseInt(a.w,10),s=parseInt(a.h,10),p=parseInt(a.cropSource,10)||void 0;return o.a.createElement(Pe,{pinId:i,initialCropArea:Te(c,l,u,s)?{x:c,y:l,w:u,h:s}:void 0,initialCropSource:p,view:r?"products":"flashlight"})}))},"/mke":function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=(n("OWio"),{backgroundColor:"rgba(0, 0, 0, .06)"}),a={backgroundColor:"rgba(51, 51, 51, 1.0)"},c={backgroundColor:"rgba(255, 255, 255, 1.0)"},l={backgroundColor:"rgba(239, 239, 239, 1.0)"},u={backgroundColor:"rgba(142 ,142, 142, 1.0)"},s={backgroundColor:"rgba(230, 0, 35, 1.0)"},p={transparent:{backgroundColor:"transparent"},transparentDarkGray:{backgroundColor:"rgba(51, 51, 51, .8)"},transparentHovered:i,transparentFocused:i,transparentActive:{backgroundColor:"rgba(0, 0, 0, .1)"},transparentDarkGrayHovered:a,transparentDarkGrayFocused:a,transparentDarkGrayActive:{backgroundColor:"rgba(51, 51, 51, 1.0)"},white:{backgroundColor:"rgba(255, 255, 255, .9)"},whiteHovered:c,whiteFocused:c,whiteActive:{backgroundColor:"rgba(255, 255, 255, 1.0)"},lightGray:{backgroundColor:"rgba(239, 239, 239, .9)"},lightGrayHovered:l,lightGrayFocused:l,lightGrayActive:{backgroundColor:"rgba(239, 239, 239, 1.0)"},gray:{color:"rgba(142 ,142, 142, .9)"},grayHovered:u,grayFocused:u,grayActive:{backgroundColor:"rgba(142 ,142, 142, 1.0)"},red:{backgroundColor:"rgba(230, 0, 35, .9)"},redActive:s,redFocused:s,redHovered:s},d=n("+U6O");function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={xs:24,sm:32,md:40,lg:48,xl:56},h={alignItems:"center",borderRadius:"50%",display:"flex",justifyContent:"center"},b={boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)",outline:0},g={transparent:"gray",gray:"white",lightGray:"gray",white:"gray",transparentDarkGray:"white",red:"white"};function v(e){var t=e.active,n=void 0!==t&&t,r=e.bgColor,i=void 0===r?"transparent":r,a=e.focused,c=void 0!==a&&a,l=e.hovered,u=void 0!==l&&l,s=e.icon,m=e.iconColor,v=void 0===m?g[i]:m,w=e.size,O=void 0===w?"md":w,_=e.title,E=void 0===_?"":_,S=e.iconSize||y[O]/2,P={height:y[O],width:y[O]},C=f({},h,p[i],n?p["".concat(i,"Active")]:{},c?b:{},c?p["".concat(i,"Focused")]:{},!u||c||n?{}:p["".concat(i,"Active")]);return o.a.createElement("div",{style:f({},P,C)},o.a.createElement(d.c,{shape:"circle"},o.a.createElement(d.n,{accessibilityLabel:"",color:v,icon:s,size:S,title:E})))}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return T}));var T=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=E(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==w(o)&&"function"!=typeof o?P(r):o,C(P(P(n)),"state",{active:!1,focused:!1,hovered:!1}),C(P(P(n)),"handleBlur",(function(){return n.setState({focused:!1})})),C(P(P(n)),"handleFocus",(function(){n.setState({focused:!0})})),C(P(P(n)),"handleMouseDown",(function(){n.setState({active:!0})})),C(P(P(n)),"handleMouseEnter",(function(){n.setState({hovered:!0})})),C(P(P(n)),"handleMouseLeave",(function(){n.setState({active:!1,hovered:!1})})),C(P(P(n)),"handleMouseUp",(function(){n.setState({active:!1})})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.accessibilityExpanded,n=e.accessibilityHaspopup,r=e.accessibilityLabel,i=e.bgColor,a=e.icon,c=e.iconColor,l=e.iconSize,u=e.onClick,s=e.size,p=e.wrappingPogStyle,d=this.state,f=d.active,m=d.focused,y=d.hovered;return o.a.createElement("button",{"aria-expanded":t,"aria-haspopup":n,"aria-label":r,className:"LegoGestalt_IconButton",onBlur:this.handleBlur,onClick:function(e){return u&&u({event:e})},onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,title:r,type:"button"},o.a.createElement("div",{style:O({},p||{})},o.a.createElement(v,{active:f,bgColor:i,focused:m,hovered:y,icon:a,iconColor:c,iconSize:l,size:s,title:r})))}}])&&_(n.prototype,r),i&&_(n,i),t}(o.a.Component)},"19Gw":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("GyhR"),o=n.n(r),i=n("Qo1m"),a=n("yXM0"),c=n("z/1d"),l=n("+U6O");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function t(){var e,n,r,o,a,c,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,d=new Array(s),m=0;m<s;m++)d[m]=arguments[m];return r=this,n=!(o=(e=p(t)).call.apply(e,[this].concat(d)))||"object"!==u(o)&&"function"!=typeof o?f(r):o,a=f(f(n)),c="statsList",l=n.props.isVideo?[{iconType:"play",displayText:i.a._("Video views","Label for views of a video pin on closeup page"),field:"video_views",align:"start"},{iconType:"clock",displayText:i.a._("Avg. time","Label for average time of a video pin on closeup page"),field:"video_average_time",align:"center",valueFormat:"TIME"},{iconType:"angled-pin",displayText:i.a._("Saves","Label for saves of a video pin on closeup page"),field:"save",align:"end"}]:[{iconType:"eye",displayText:i.a._("Impressions","Label for impressions of a pin on closeup page"),field:"impression",align:"start"},{iconType:"angled-pin",displayText:i.a._("Saves","Label for saves of a pin on closeup page"),field:"save",align:"center"},{iconType:"arrow-up-right",displayText:i.a._("Link clicks","Label for click-throughs of a pin on closeup page"),field:"clickthrough",iconSize:10,align:"end"}],c in a?Object.defineProperty(a,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l,n}var n,r,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"renderValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"COUNT";return Number.isInteger(e)?"TIME"===t?Object(a.a)(e):o.a.createElement(c.a,{value:e,shortform:!0,shortformMaximumFractionDigits:1}):"-"}},{key:"render",value:function(){var e=this,t=this.props,n=t.isVideo,r=t.stats,i=t.isStoryPin,a=t.show90Days;if(!r)return null;var c=a?"90d":"30d",u=(n||i)&&r.all_time?r.all_time:r[c];return u&&0!==Object.keys(u).length?o.a.createElement(l.c,{display:"flex"},this.statsList.map((function(t,n){var r=t.align,i=t.iconType,a=t.iconSize,c=void 0===a?12:a,s=t.field,p=t.displayText,d=t.valueFormat;return o.a.createElement(l.c,{key:n,column:4,display:"flex",justifyContent:r,alignItems:"center"},o.a.createElement(l.c,{display:"inlineBlock",marginRight:1},o.a.createElement(l.n,{accessibilityLabel:p,color:"darkGray",icon:i,size:c})),o.a.createElement(l.K,{inline:!0,size:"sm"},e.renderValue(u[s],d)))}))):null}}])&&s(n.prototype,r),m&&s(n,m),t}(r.Component)},"1Rck":function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,c=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?c="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(c="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==c){var l=e.displayName||e.name,u="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==c?"\n  "+c:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=o),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",(function(){return a})),r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},"1ZRU":function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("sl5z"),a=n("+U6O"),c="#0f0",l="#00f",u="#999";function s(e){var t=e.children,n=e.group,r=e.isEligible,i=e.name,s=e.performsActivate?c:l;return r||(s=u),o.a.createElement(a.c,{position:"relative"},t,o.a.createElement(a.c,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 2px 2px ".concat(s),borderRadius:5}}}),o.a.createElement(a.c,{position:"absolute",top:!0,left:!0,color:"lightGray"},i,": ",n))}var p=n("LuB0");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return v}));var g=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return r=this,i=(e=m(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==d(i)&&"function"!=typeof i?h(r):i,b(h(h(n)),"handleCustomActivate",(function(){var e=n.props,t=e.activateExperiment,r=e.isEligible,o=e.name;return r?t(o):""})),b(h(h(n)),"attachDebugging",(function(e){var t=n.props,r=t.activate,i=t.name,a=t.isEligible,c=t.highlighted,l=n.getGroup();return c?o.a.createElement(s,{group:l,isEligible:a,name:i,performsActivate:r},e):e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.activate,n=e.activateExperiment,r=e.isEligible,o=e.name;t&&r&&n(o)}},{key:"getGroup",value:function(){var e=this.props,t=e.group,n=e.overrideGroup;return"string"==typeof n?n:t}},{key:"render",value:function(){var e=this.props,t=e.activate,n=e.name,r=e.children,a=e.isEligible,c=this.getGroup(),l="Experiment(".concat(n,":").concat(c,")"),u=!!a&&(c.startsWith("enabled")||c.startsWith("employee")),s={group:a?c:"",anyEnabled:u,customActivate:a&&!t?this.handleCustomActivate:null};return this.attachDebugging(o.a.createElement(i.a,{name:l},r(s)))}}])&&f(n.prototype,r),a&&f(n,a),t}(r.PureComponent);function v(e){var t=e.name,n=Object(r.useContext)(p.c),i=n.debuggingEnabled,a=n.overriddenExperiments,c=n.highlightedExperiment,l=n.setExperimentVisible,u=i&&a&&"string"==typeof a[t]?a[t]:null,s=i&&(c===t||c===p.a);return Object(r.useEffect)((function(){if(i)return l(t,!0),function(){return l(t,!1)}}),[t,i]),o.a.createElement(g,Object.assign({},e,{overrideGroup:u,highlighted:s}))}b(g,"defaultProps",{activate:!0,isEligible:!0,overrideGroup:null,highlighted:!1})},"1kao":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n("+U6O");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a="rgb(226, 226, 226)",c="rgb(218, 218, 218)";function l(e){var t,n=e.active,l=void 0!==n&&n,u=e.borderRadius,s=e.children,p=e.focused,d=void 0!==p&&p,f=e.hovered,m=void 0!==f&&f,y=e.shape,h=e.hoverBgColor,b=e.bgColor,g=void 0===b?"transparent":b,v=e.size,w=l?{backgroundColor:"transparent"===g?"rgba(0, 0, 0, 0.1)":c}:null,O=!m||d||l?null:{backgroundColor:h||("transparent"===g?"rgba(0, 0, 0, 0.06)":a)},_=d?{backgroundColor:"transparent"===g?"rgba(0, 0, 0, 0.06)":a,boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:"0"}:null;if("circle"===y)switch(void 0===v?"lg":v){case"xs":t=24;break;case"sm":t=32;break;case"md":t=40;break;case"lg":t=48;break;case"xl":t=56;break;default:t=48}var E=t,S=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({backgroundColor:{transparent:"transparent",lightGray:"#efefef",white:"#fff",transparentDarkGray:"rgba(51, 51, 51, 0.8)"}[g]},O,w,_,u?{borderRadius:u}:{});return r.createElement(o.c,{shape:y,dangerouslySetInlineStyle:{__style:S},height:t,width:E},s)}},"2LZR":function(e,t,n){"use strict";function r(e,t){return e&&e[t]&&e[t].url}n.d(t,"a",(function(){return r}))},"3BJc":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=function(e){return{type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:{value:e}}};function o(e){var t=e.currentTime,n=e.isPromoted;return{type:"SET_CURRENT_VIDEO",payload:{pinId:e.pinId,isPromoted:n,currentTime:t}}}function i(e){return{type:"SET_IS_AUTOPLAY",payload:{isAutoplay:e}}}function a(e){var t=e.currentTime,n=e.isPromoted;return{type:"PAUSE_CURRENT_VIDEO",payload:{currentTime:t,pinId:e.pinId,isPromoted:n}}}function c(e){return{type:"SET_APP_FOCUS_STATE",payload:{appInFocus:e}}}},"3hnx":function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"o",(function(){return u})),n.d(t,"n",(function(){return s})),n.d(t,"l",(function(){return p})),n.d(t,"p",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return y})),n.d(t,"i",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g}));var r=171,o=85,i=40,a=20,c=8,l=4,u=106,s=133,p=16,d=5,f=1.25,m=.2,y=.1,h=10,b=246,g=197},4081:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("HcgI"),c=n("+U6O");t.a=Object(i.connect)((function(e,t){var n=e.pins,r=t.pinId;return{carousel_data:n[r]&&n[r].carousel_data}}))((function(e){var t=e.carousel_data,n=e.title;if(t){var r=t.carousel_slots,i=void 0===r?[]:r,l=t.index;i[l]&&i[l].title&&(n=i[l].title)}var u=t?{height:"40px",overflow:"hidden"}:{};return o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u},paddingY:1},o.a.createElement(c.K,{size:"sm",bold:!0},o.a.createElement(a.a,{text:n,options:{hashtags:{appendText:"".concat(n),source:"hashtag_pinrep"}}})))}))},"4OrY":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=80,o="…";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxLength,i=void 0===n?r:n,a=t.suffix,c=void 0===a?o:a;return e.length<=i?e:e.substring(0,i-1).replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,"")+c}},"4gpq":function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("oko/"),c=n("A/dm"),l=n("kR61"),u=n("k9eC"),s=n("NmcB"),p=n("2YES"),d=n("+U6O"),f=n("9Y9K");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){},O=function(e,t,n,r,o,i,a,c,u,p){if(!p){var d=o.carousel_slots,f=o.id;Object(s.a)(108,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}({},u,{objectId:t,component:c,view:a,viewParameter:i,eventData:{pinCarouselSlotEventData:{carouselSlotId:d[n]&&Number(d[n].id),carouselDataId:Number(f),carouselSlotIndex:n,toCarouselSlotIndex:r}}},Object(l.a)(e)||{}))}},_=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=h(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==m(o)&&"function"!=typeof o?g(r):o,v(g(g(n)),"state",{isHovered:!1}),v(g(g(n)),"handleMouseEnter",(function(){n.setState({isHovered:!0})})),v(g(g(n)),"handleMouseLeave",(function(){n.setState({isHovered:!1})})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.carouselIndex,n=e.carouselData,r=e.changeCarouselSlotIndex,i=e.handleCarouselSwipe,a=e.isCloseup,c=e.pin,l=e.pinId,s=e.contextLogData,p=e.requestContext,f=e.viewParameter,m=e.viewType,y=e.componentType,h=e.isEditMode,b=e.closeupImageHovered,g=void 0!==b&&b,v=e.variant;if(!n)return null;var _=this.state.isHovered,E=n.carousel_slots,S=void 0===E?[]:E,P=n.index,C=void 0!==t?t:P,T="default"===v,I=!a&&new u.c(p,"web_carousel_pip_improvements").enabled();p.experiments.flush();for(var j=I?10:T&&a||!a?8:16,k=a&&T||I?2:1,x={__style:{backgroundColor:_?"rgba(0, 0, 0, 0.05)":g?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.7)"}},R=T?"white":"#555",A=T?"rgba(255, 255, 255, 0.5)":"lightGray",D=[],L=function(e){var t=e===C;D.push(o.a.createElement(d.c,{key:l+e,marginRight:e!==S.length-1?k:0},o.a.createElement(d.P,{fullWidth:!1,shape:"circle",onTouch:function(t){var o=t.event;h||void 0===r||(o.preventDefault(),o.stopPropagation(),r(String(l),e)),void 0!==i&&i(e),O(c,l,C,e,n,f,m,y,s,h)}},o.a.createElement(d.c,{"data-test-id":"ellipsis-size",height:j,width:j,dangerouslySetInlineStyle:{__style:{backgroundColor:t?R:A}},shape:"circle"}))))},M=0;M<S.length;M+=1)L(M);return o.a.createElement(d.c,Object.assign({"data-test-id":"carousel-ellipsis",display:"flex"},T&&a&&!I?{shape:"pill",height:44,justifyContent:"center",alignItems:"center",paddingX:4,dangerouslySetInlineStyle:x}:{marginTop:1,marginLeft:h?2:-2,marginBottom:h?1:0,justifyContent:I?"center":"start",alignItems:I?"center":"stretch"},{onMouseEnter:T?this.handleMouseEnter:w,onMouseLeave:T?this.handleMouseLeave:w}),D)}}])&&y(n.prototype,r),i&&y(n,i),t}(o.a.Component);t.a=Object(f.compose)(Object(i.connect)((function(e,t){var n=e.pins,r=t.carouselData,o=n[t.pinId];return{pin:o,carouselData:r||Object(c.a)(o)}}),(function(e){return{changeCarouselSlotIndex:function(t,n){return e(Object(a.a)(t,n))}}})),p.e)(_)},"4mdS":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("GyhR"),o=n.n(r),i=n("6wLB"),a=n("HRzk"),c=n("yXM0"),l=n("+U6O");function u(e){return o.a.createElement(l.c,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"}},"data-test-id":"PinTypeIdentifier"},e)}function s(e){var t=e.pin,n=e.allowProductCarousel,r=e.allowShoppingPriceIndicator,o=Object(i.a)(t);if(o.isGif)return u("GIF");if(o.isStoryPin)return u("Story");if(o.isVideo){var l=t.videos,s=(l&&l.video_list&&l.video_list[Object.keys(l.video_list)[0]]||{}).duration,p=void 0===s?0:s;return u(Object(c.a)(p))}if(o.isProduct&&r){var d=t.rich_summary&&t.rich_summary.products&&t.rich_summary.products[0]&&t.rich_summary.products[0].offer_summary,f=d&&(d.price||d.max_price);return f?u(f):null}if(n){var m=t.product_pin_data&&t.product_pin_data.items&&t.product_pin_data.items[0],y=m&&Object(a.a)(t.images,m,t.carousel_data&&t.carousel_data.index)||{},h=y.carousel_slots,b=void 0===h?[]:h,g=y.index;return u("".concat((void 0===g?0:g)+1,"/").concat(b.length))}if(o.isCarousel){var v=t.carousel_data||{},w=v.carousel_slots,O=void 0===w?[]:w,_=v.index;return u("".concat((void 0===_?0:_)+1,"/").concat(O.length))}return null}},"5C2A":function(e,t,n){var r;!function(){"use strict";var o=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:o,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},"6wLB":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("/W2v"),o=n("zBQm"),i=function(){return{isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1}};function a(e){var t=e.access,n=e.attribution,a=e.buyable_product,c=e.carousel_data,l=e.embed,u=e.is_eligible_for_web_closeup,s=e.rich_summary,p=e.story_pin_data_id,d=e.videos,f=i();(c||Object(r.a)(e))&&(f.isCarousel=!0),u&&(f.isOneTap=!0),Object(o.i)(d)&&(f.isVideo=!0);var m=l||n&&n.embed||null;return m&&"gif"===m.type&&(f.isGif=!0),(a||s&&"product"===s.type_name)&&(f.isProduct=!0),s&&"recipe"===s.type_name&&(f.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(f.isPromoted=!0),(t||[]).includes("write")&&(f.isOwnPin=!0),p&&(f.isStoryPin=!0),f}},"8J6r":function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return e===t}function i(e){var t=arguments.length<=1||void 0===arguments[1]?o:arguments[1],n=null,r=null;return function(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return null!==n&&n.length===i.length&&i.every((function(e,r){return t(e,n[r])}))||(r=e.apply(void 0,i)),n=i,r}}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var c=0,l=o.pop(),u=a(o),s=e.apply(void 0,[function(){return c++,l.apply(void 0,arguments)}].concat(n)),p=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var a=u.map((function(n){return n.apply(void 0,[e,t].concat(o))}));return s.apply(void 0,r(a))};return p.resultFunc=l,p.recomputations=function(){return c},p.resetRecomputations=function(){return c=0},p}}t.__esModule=!0,t.defaultMemoize=i,t.createSelectorCreator=c,t.createStructuredSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?l:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}))};var l=t.createSelector=c(i)},"8rWZ":function(e,t,n){"use strict";var r=n("GyhR"),o=n("0mUz"),i=n("ximl");t.a=function(e){return r.createElement(i.a,Object.assign({},e,{timeSpentManager:o.a}))}},"92s0":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("GyhR"),o=n.n(r),i=n("iJ35"),a=n("buVl"),c=n("kR61"),l=n("lixz"),u=n("NmcB"),s=n("yJaP");function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t,n=e.additionalStyles,r=void 0===n?{}:n,d=e.children,f=e.collageChipId,m=e.componentType,y=e.contextLogData,h=e.elementType,b=e.pin,g=e.viewParameter,v=e.viewType,w=Object(s.b)(),O=b.carousel_data,_=b.id,E="/pin/".concat(f||_,"/");if(O){var S=O.carousel_slots,P=void 0===S?[]:S,C=O.id,T=O.index;E="/pin/".concat(_,"/"),t={carousel_slot_id:P[T]&&P[T].id,carousel_data_id:C,carousel_slot_index:T}}t=p({},t||{},Object(c.a)(b,y)||{});return o.a.createElement(i.b,{auxData:t,deeplinkUrls:Object(a.o)(_),forceRefresh:1,onClick:function(){Object(l.g)(13),Object(u.a)(101,p({},y,{component:m||w.componentType,element:h,objectId:_,view:v||w.viewType,viewParameter:g||w.viewParameter},Object(c.a)(b,y)||{}))},pinId:_,style:p({cursor:"zoom-in",display:"block"},r),to:E},d)}},"9SSN":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n.n(r),i=n("+U6O"),a=n("rVpF");function c(e,t){return{hidden:{opacity:0,transition:t?"opacity ".concat(t,"ms ease"):void 0},visible:{opacity:1,transition:e?"opacity ".concat(e,"ms ease"):void 0}}}function l(e){var t=e.children,n=e.fadeInDuration,r=void 0===n?0:n,l=e.fadeOutDuration,u=void 0===l?a.a:l,s=e.visibility;return"none"!==s&&t?o.a.createElement(i.c,{dangerouslySetInlineStyle:{__style:c(r,u)[s]}},t):null}},"A/dm":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("HRzk");function o(e){var t=e&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0];return t?Object(r.a)(e.images,t,e.carousel_data&&e.carousel_data.index):e.carousel_data}},AdUJ:function(e,t,n){"use strict";var r=n("GyhR");t.a=Object(r.createContext)(0)},Alt3:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("jCHc"),a=n("9SSN"),c=n("+U6O"),l={SELECTED:"#e60023",NOT_SELECTED:"#efefef"};function u(e){var t=e.selected,n=void 0!==t&&t;return o.a.createElement(c.c,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:n?l.SELECTED:l.NOT_SELECTED,borderRadius:s,boxShadow:"inset 0 0 0 3px #fff",zIndex:1}}})}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var s=16,p={wrapper:{borderRadius:s,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},primaryContentContainer:{marginBottom:"auto"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"},savedOverlay:{backgroundColor:"rgba(0, 0, 0, 0.33)"}};function d(e){var t=e.children,n=e.savedOverlayVisibility,r=void 0===n?"none":n,l=e.visualOverlayVisibility,s=void 0===l?"none":l,d=e.primaryContent,f=e.primaryContentVisibility,m=void 0===f?"none":f,y=e.secondaryContent,h=e.secondaryContentVisibility,b=void 0===h?"none":h,g=e.accessoryContent,v=e.accessoryContentVisibility,w=void 0===v?"none":v,O=e.actionBar,_=e.actionBarVisibility,E=void 0===_?"none":_,S=e.footer,P=e.selectionState,C=void 0===P?"no-selection":P,T=e.debugContent,I=e.signalDebuggerContent,j=e.obscuredPinOverlay;return o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:p.wrapper},"data-test-id":"pinWrapper",overflow:"hidden",position:"relative"},"no-selection"!==C&&o.a.createElement(u,{selected:"selected"===C}),o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:p.wrapper},overflow:"hidden",position:"relative"},t,o.a.createElement(a.a,{visibility:s},o.a.createElement(i.a,{additionalStyles:p.visualOverlay})),o.a.createElement(a.a,{visibility:r},o.a.createElement(i.a,{additionalStyles:p.savedOverlay})),g&&o.a.createElement(a.a,{visibility:w},o.a.createElement(i.a,null,g)),y&&o.a.createElement(a.a,{visibility:b},o.a.createElement(i.a,null,y)),d&&o.a.createElement(a.a,{visibility:m},o.a.createElement(i.a,null,d)),O&&o.a.createElement(a.a,{visibility:E},o.a.createElement(i.a,null,o.a.createElement(c.c,{position:"absolute",left:!0,right:!0,bottom:!0},O))),T&&o.a.createElement(i.a,null,T),I),S,j&&o.a.createElement(c.c,null,j))}},AsWu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)(e);if(!n.length)return void t.preventDefault();var r,o=t.shiftKey,a=n[0],c=n[n.length-1];if(e===document.activeElement){if(!o)return;r=c}c!==document.activeElement||o||(r=a);a===document.activeElement&&o&&(r=c);if(r)return t.preventDefault(),void r.focus();var l=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==l||"Chrome"==l[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var u=n.indexOf(document.activeElement);u>-1&&(u+=o?-1:1);if(void 0===n[u])return t.preventDefault(),void(r=o?c:a).focus();t.preventDefault(),n[u].focus()};var r,o=n("RCVt"),i=(r=o)&&r.__esModule?r:{default:r};e.exports=t.default},BsUa:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n.n(r),i=n("92s0"),a=n("+U6O"),c={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}};function l(e){var t=e.pin,n=e.enableCloseupLink,r=(t.aggregated_pin_data||{}).pin_tags_chips,l=r&&r.length>=3?r.slice(0,3):[];return o.a.createElement(a.c,{display:"flex",dangerouslySetInlineStyle:{__style:c.chipContainer}},l.map((function(e){var r=e.images["750x"]||{},l=o.a.createElement(a.p,{alt:"",fit:"cover",naturalHeight:r.height,naturalWidth:r.width,src:r.url});return o.a.createElement(a.c,{dangerouslySetInlineStyle:{__style:c.chip},"data-test-id":"collageChip",key:e.id},o.a.createElement(a.c,{dangerouslySetInlineStyle:{__style:c.chipInner},position:"relative"},o.a.createElement(a.c,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0},o.a.createElement(a.u,{height:"100%",wash:!0,width:"100%"},n?o.a.createElement(i.a,{additionalStyles:{width:"100%",height:"100%"},collageChipId:e.id,pin:t},l):l))))})))}},CYxK:function(e,t,n){"use strict";function r(e){return Boolean(e.promoted_is_removable)}n.d(t,"a",(function(){return r}))},CtGn:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("GyhR");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){var t=e.children,n=o(Object(r.useState)(!1),2),i=n[0],a=n[1],c=o(Object(r.useState)(!1),2),l=c[0],u=c[1],s=o(Object(r.useState)(!1),2),p=s[0],d=s[1];return t({active:i,focused:l,hovered:p,onBlur:function(){return u(!1)},onFocus:function(){return u(!0)},onMouseDown:function(){return a(!0)},onMouseEnter:function(){return d(!0)},onMouseLeave:function(){d(!1),a(!1)},onMouseUp:function(){return a(!1)}})}},CwDa:function(e,t,n){"use strict";var r=n("GyhR"),o=n("Mr4W"),i=n("Ivf5"),a=n("A/dm"),c=n("dg2R"),l=n("NmcB");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},HybridSearchHero:{impressionType:"hybridSearchHeroImpressions",idType:"hybridSearchHero",eventType:7308},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573}},b=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,p=new Array(a),f=0;f<a;f++)p[f]=arguments[f];return r=this,i=(e=d(t)).call.apply(e,[this].concat(p)),n=!i||"object"!==u(i)&&"function"!=typeof i?m(r):i,y(m(m(n)),"trackImpression",(function(){try{n.node=Object(o.findDOMNode)(m(m(n))),n.node instanceof HTMLElement&&c.c.start(n.node).onExitViewport(n.logImpression).setDebugId(n.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}})),y(m(m(n)),"logImpression",(function(e){var t,r=n.props,o=r.carousel_data,i=r.impressionType,a=r.trackCarousel,c=r.contextLogData,u=r.viewData,p=r.viewType,d=r.viewParameter,f=r.componentType,m=r.objectIdStr,b=r.loggingId,g=r.slotIndex,v=r.impressionAuxFields,w=h[i],O=w.idType,_=e.forcedExit&&"removed"===e.forcedExit?0:void 0,E=s((y(t={endTime:e.endTime},O,b),y(t,"slotIndex",g),y(t,"time",e.startTime),y(t,"renderDuration",e.endTime-e.startTime),t),v,{forcedExit:_});if(a||Object(l.a)(w.eventType,s({viewData:u||{},view:p,viewParameter:d,component:f,objectIdStr:m,eventData:y({},w.impressionType,[E])},c)),o&&a){var S=o.carousel_slots,P=o.index,C=o.id;Object(l.a)(7352,s({viewData:u||{},view:p,viewParameter:d,component:f,objectIdStr:m,eventData:{pinCarouselSlotImpressions:[s({},E,{carouselDataId:Number(C),carouselSlotId:S[P]&&Number(S[P].id),slotIndex:P})]}},c))}})),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this.props.inImpressionExp&&!c.c.inExperiment&&c.c.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}},{key:"componentDidUpdate",value:function(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}},{key:"componentWillUnmount",value:function(){this.node instanceof HTMLElement&&c.c.stop(this.node)}},{key:"render",value:function(){return r.Children.only(this.props.children)}}])&&p(n.prototype,i),a&&p(n,a),t}(r.Component);t.a=Object(i.connect)((function(e,t){var n=e.pins[t.loggingId||""]||{};return{carousel_data:Object(a.a)(n)}}),(function(){return{}}))(b)},E1Qe:function(e,t,n){"use strict";var r=n("hvnN"),o=n.n(r);t.a=o.a.shape({access:o.a.arrayOf(o.a.string),ad_match_reason:o.a.number,aggregated_pin_data:o.a.shape({aggregated_stats:o.a.shape({done:o.a.number,likes:o.a.number,saves:o.a.number}),pin_tags:o.a.arrayOf(o.a.shape({pin_tag_key:o.a.string.isRequired,x_percent:o.a.number.isRequired,y_percent:o.a.number.isRequired}))}),attribution:o.a.shape({embed:o.a.shape({src:o.a.string})}),board:o.a.shape({followed_by_me:o.a.bool,id:o.a.string,url:o.a.string,name:o.a.string}),buyable_product:o.a.shape({display_active_max_price:o.a.string,display_active_min_price:o.a.string,short_description:o.a.string,title:o.a.string}),debug_info_html:o.a.string,description:o.a.string,domain:o.a.string,dominant_color:o.a.string,done_by_me:o.a.bool,embed:o.a.shape({src:o.a.string,type:o.a.string}),id:o.a.string,images:o.a.shape({"236x":o.a.shape({url:o.a.string,height:o.a.number}),"474x":o.a.shape({url:o.a.string,height:o.a.number})}),image_signature:o.a.string,is_quick_promotable:o.a.bool,is_eligible_for_web_closeup:o.a.bool,is_native:o.a.bool,link:o.a.string,native_creator:o.a.shape({username:o.a.string,full_name:o.a.string,id:o.a.string,image_small_url:o.a.string}),per_pin_analytics:o.a.shape({clickthrough:o.a.number,closeup:o.a.number,id:o.a.string,impression:o.a.number,repin:o.a.number,total_engagement:o.a.number,type:o.a.string}),pinner:o.a.shape({explicitly_followed_by_me:o.a.bool,full_name:o.a.string,id:o.a.string,image_small_url:o.a.string}),promoter:o.a.shape({username:o.a.string,full_name:o.a.string,image_small_url:o.a.string}),recommendationReason:o.a.shape({reason:o.a.string,board:o.a.shape({id:o.a.string,name:o.a.string,url:o.a.string}),interest:o.a.shape({id:o.a.string}),pin:o.a.shape({id:o.a.string})}),repin_count:o.a.number,rich_summary:o.a.shape({display_name:o.a.string}),source_interest:o.a.shape({name:o.a.string,url_name:o.a.string,id:o.a.string}),tracked_link:o.a.string,title:o.a.string,type:o.a.string,videos:o.a.shape({}),saved:o.a.bool})},EQo2:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("IqQH"),a=n("PNko"),c=n.n(a),l=n("/Mjl"),u=n("+U6O");function s(e){var t=e.onError,n=e.onLoad,r=e.pin,i=r.title,a=void 0===i?"":i,c=r.dominant_color,s=r.images,p=void 0===s?{}:s,d="".concat(16/9*100,"%"),f=p["236x"].width>p["236x"].height?p["736x"]:p["236x"];return o.a.createElement(u.c,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:d}}},o.a.createElement(u.c,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:l.a.storyPinImage}}},o.a.createElement(u.p,{alt:a,color:c,naturalHeight:f.height,naturalWidth:f.width,onError:t,onLoad:n,src:f.url,fit:"cover"})))}var p=n("UmN8"),d=n("3hnx");t.a=function(e){var t,n,r,a,l=e.cropProductPin,f=e.highResOnly,m=e.lowResOnly,y=e.onError,h=e.onLoad,b=e.pin,g=e.saved,v=void 0!==g&&g,w=e.animateGif,O=b.carousel_data,_=b.description,E=void 0===_?"":_,S=b.dominant_color,P=b.id,C=b.images;if(O)return o.a.createElement(i.a,{onError:y,onLoad:h,highResOnly:f,lowResOnly:m,pinId:P});if(C){var T=f&&(C["736x"]||C.orig||C["474x"])||C["236x"];r=T.height,a=T.width,t=T.url,n=m||f?"".concat(T.url," 1x"):["".concat(C["236x"].url," 1x"),C["474x"]&&"".concat(C["474x"].url," 2x"),C["736x"]&&"".concat(C["736x"].url," 3x"),C.orig&&"".concat(C.orig.url," 4x")].filter(Boolean).join(", ")}if(w){var I=Math.max(b.embed&&b.embed.width||0,236),j=Math.max(b.embed&&b.embed.height||0,236),k=b.embed?b.embed.src:"";k&&(r=j,a=I,t=k,n="")}return o.a.createElement(u.c,{minHeight:120,display:"flex",alignItems:"center"},o.a.createElement(u.c,{flex:"grow"},o.a.createElement("div",{className:c()({savedGradient:v})},b.story_pin_data_id?o.a.createElement(s,{pin:b,onError:y,onLoad:h}):o.a.createElement(p.a,{name:"web_image_loading_optimization"},(function(e){var i=e.group;return o.a.createElement(u.c,{height:l?d.a:void 0,width:l?d.b:void 0},o.a.createElement(u.p,{alt:E,color:S,fit:l?"cover":"none",naturalHeight:r,naturalWidth:a,onError:y,onLoad:h,src:t,srcSet:n,loading:i.includes("lazy")?"lazy":"auto",importance:i.includes("low")?"low":"auto"}))})))))}},FGWo:function(e,t,n){"use strict";var r=n("GyhR"),o=n("Ivf5"),i=(n("hvnN"),n("dBWR")),a=n("XXWR");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(t){return{experience:t.experiences.eligibleExperiences[e]}}}function m(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=arguments.length>4?arguments[4]:void 0;return function(o){function f(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),n=this,r=u(f).call(this,e),t=!r||"object"!==c(r)&&"function"!=typeof r?p(n):r,d(p(p(t)),"state",{}),d(p(p(t)),"setExtraContextState",(function(e){return t.setState({extraContext:e})})),t}var m,y,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,o),m=f,(y=[{key:"componentDidMount",value:function(){this.dispatchPlacementMount(!1)}},{key:"UNSAFE_componentWillUpdate",value:function(n,r){var o=n.dispatch,c=n.experience,l=t;if("function"==typeof t){var u=r.extraContext||{};l=t(n,u)}if(!Object(a.d)(c)&&"function"==typeof t&&l&&Object.keys(l).length){var s=t(this.props,this.state);JSON.stringify(s)!==JSON.stringify(l)&&o(Object(i.c)(e,l))}!c||this.props.experience&&c.id===this.props.experience.id||o(Object(i.i)(e,l))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(Object(i.k)(e))}},{key:"dispatchPlacementMount",value:function(n){var r=this.props.dispatch,o={};o="function"==typeof t?t(this.props,this.state):Object.assign({},t),r(Object(i.j)(e,o,n))}},{key:"render",value:function(){var e=this.props.experience;return r.createElement(n,Object.assign({},this.props,{setPlacementExtraContext:this.setExtraContextState,experience:Object(a.d)(e)?e:null}))}}])&&l(m.prototype,y),h&&l(m,h),f}(r.Component)}var y={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return function(r){var i=f(e);n=Object.assign({},y,n);var a=m(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,r);return Object(o.connect)(i)(a)}}},FSbA:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return p}));var r,o=n("ePT2"),i=n("NoZx");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(a(r={},i.a.BOARD_ACTIVITY,"BoardActivityReactionResource"),a(r,i.a.BOARD_ACTIVITY_COMMENT,"BoardActivityCommentReactionResource"),r);function l(e,t){return{type:"ACTIVITY_ITEM_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}}}function u(e,t,n){return function(r){var c=i.c[t],l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({activityId:e},n);return o.a.create(c,l).callUpdate().then((function(e){var t=e.resource_response.data;return r({type:"ACTIVITY_ITEM_UPDATED",payload:{data:t}}),t}))}}function s(e,t,n,r){return function(i){if(n!==r){var a=c[t],u={activityId:e,reactionType:r},s=o.a.create(a,u);0===r?s.callDelete({showError:!1}):s.callUpdate({showError:!1}),0!==n&&i(l(e,!1,n)),0!==r&&i(l(e,!0,r))}}}function p(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return function(a){var u=c[n];if(!r&&i>0){a(l(e,!1,i)),a(l(e,!0,t));var s={activityId:e,reactionType:i},p=o.a.create(u,s),d={activityId:e,reactionType:t},f=o.a.create(u,d);p.callDelete({showError:!1}).then((function(){f.callCreate({showError:!1})}))}else{var m={activityId:e,reactionType:t},y=o.a.create(u,m);r?y.callDelete({showError:!1}):y.callCreate({showError:!1}),a(l(e,!r,t))}}}},GB3e:function(e,t,n){},HRzk:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return l}));var a=["236x","474x","564x","736x"];function c(e){var t=a.map((function(t){var n=Math.min.apply(Math,i(e.map((function(e){return e.images[t]&&e.images[t].height||1/0})))),r=Math.min.apply(Math,i(e.map((function(e){return e.images[t]&&e.images[t].width||1/0}))));return{imageKey:t,height:n,width:r}}));return e.map((function(e){return t.forEach((function(t){var n=t.imageKey,i=t.height,a=t.width;e.images[n]&&(e=r({},e,{images:r({},e.images,o({},n,r({},e.images[n],{height:i,width:a})))}))})),e}))}function l(e,t,n){for(var r=[{images:e}],o=t&&t.additional_images,i=0;i<o.length;i+=1)r.push({images:o[i]&&o[i].canonical_images});return{carousel_slots:c(r),index:n||0}}},HW6o:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Mr4W"),a=n.n(i),c=n("4+0X");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=new Map,y=null,h=function(e){e.forEach((function(e){var t=m.get(e.target);t&&t(e)}))},b=function(e,t,n){var r=t?[0,.5,1]:[0,1],o={root:document.querySelector("#mainContainer"),rootMargin:"-64px 0px 0px 0px",threshold:r};y=y||new window.IntersectionObserver(h,o),m.set(e,n),y.observe(e)},g=function(e){return m.has(e)};t.a=function(e){var t=function(t){function n(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,u=new Array(i),p=0;p<i;p++)u[p]=arguments[p];return r=this,o=(e=s(n)).call.apply(e,[this].concat(u)),t=!o||"object"!==l(o)&&"function"!=typeof o?d(r):o,f(d(d(t)),"seen",!1),f(d(d(t)),"flushTimeout",null),f(d(d(t)),"attachDenzelNavigateListener",(function(){t.denzelNavigateListener=c.a.instance.subscribe("site","navigateStarted",(function(e,n,r,o){var i=new RegExp("/pin/[\\w|-]+/$");!o&&r&&"string"==typeof r.url&&i.test(r.url)&&t.leave()}))})),f(d(d(t)),"detachDenzelNavigateListener",(function(){t.denzelNavigateListener&&(t.denzelNavigateListener.unsubscribe(),delete t.denzelNavigateListener)})),f(d(d(t)),"enter",(function(e){var n=e.intersectionRatio>0||e.isIntersecting;t.seen=n,t.seen&&(t.props.onVisibilityChanged(!0),t.attachDenzelNavigateListener())})),f(d(d(t)),"leave",(function(){var e=t._node;e&&g(e)&&t.seen&&(t.props.onVisibilityChanged(!1),t.seen=!1,t.detachDenzelNavigateListener())})),f(d(d(t)),"observe",(function(){try{t._node=a.a.findDOMNode(d(d(t)))}catch(r){return}if(t._node){var e=t.props.inAdsDesktopVideoExperiment,n=t._node;b(n,e,(function(r){if(m.has(n)){var o=e?r.intersectionRatio>=.5:r.intersectionRatio>0||r.isIntersecting,i=t.props.trackFullVisible?r.intersectionRatio>=1:o,a=t.props.trackFullVisible?0===r.intersectionRatio:!i;!t.seen&&i?t.enter(r):t.seen&&a&&t.leave()}}))}})),t}var r,i,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,t),r=n,(i=[{key:"componentDidMount",value:function(){this.observe()}},{key:"componentWillUnmount",value:function(){var e=this._node;e&&(this.leave(),function(e){y.unobserve(e),m.delete(e)}(e))}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}])&&u(r.prototype,i),h&&u(r,h),n}(r.Component);return f(t,"displayName","WithVisibilityChanged(".concat(e.displayName||e.name,")")),t}},HcgI:function(e,t,n){"use strict";var r=n("GyhR"),o=n("Q6EP"),i=n.n(o),a=n("iJ35");function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l="__HashtagFlag__",u=4,s=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,p=function(e,t){return"/search/pins/?q=".concat(encodeURIComponent(e),"&rs=").concat(t)};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return O}));var b,g,v,w=(v=function(e,t){for(var n=t.appendText||"",o=t.source||"hashtag_pinrep",i=[],d=[],f={},m=0,y=function(e){return function(t,n){if(t===l&&d.length){var i=d.shift();return m+=1,r.createElement(a.b,{to:p(i,o),key:"hashtag-".concat(e,".").concat(n)},r.createElement("span",{className:"pinHashtag"},i))}return t}},h=0;h<e.length;h+=1){var b=e[h];if("string"==typeof b){var g=b.replace(s,(function(e){return d.push(e),f[e]=!0,l})).split(new RegExp("(".concat(l,")"))).map(y(h));i=c(i).concat(c(g))}else i.push(b)}var v=[];return n&&n.replace(s,(function(e,t){return!f[e]&&m<u&&(m+=1,v.push(r.createElement("span",{key:"appended"+t}," ",r.createElement(a.b,{to:p(e,o)},r.createElement("span",{className:"pinHashtag"},e)))),f[e]=!0),e})),i=c(i).concat(v)},(g="hashtags")in(b={})?Object.defineProperty(b,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[g]=v,b),O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,y(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(o=[{key:"shouldComponentUpdate",value:function(e){return!i()(this.props,e)}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.options;if("string"==typeof t&&""===t.trim())return t;for(var o=[t],i=Object.keys(w),a=0;a<i.length;a++){var c=i[a];c in n&&(o=(0,w[c])(o,n[c]))}return r.createElement("span",null,o)}}])&&f(n.prototype,o),a&&f(n,a),t}(r.Component)},IaXd:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("GyhR"),o=n("NmcB"),i=n("yJaP");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object(i.b)(),c=n.componentType,l=n.contextLogData,u=n.viewParameter,s=n.viewType;return Object(r.useCallback)((function(){Object(o.a)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({component:c,view:s,viewParameter:u},l,t||{}))}),[e,c,l,u,s])}},IqQH:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("A/dm"),c=n("Qo1m"),l=n("CwDa"),u=n("UmN8"),s=n("3hnx"),p=n("+U6O");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return r=this,i=(e=m(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==d(i)&&"function"!=typeof i?h(r):i,b(h(h(n)),"state",{showBadge:!0}),b(h(h(n)),"renderBadge",(function(){var e=n.props,t=e.carouselData,r=e.isCloseup,i=e.showCarouselBadge;if(!t)return null;var a=n.state.showBadge,c=t.carousel_slots,l=t.index,u=a?.8:0;return!r&&i?o.a.createElement(p.c,{display:"flex",justifyContent:"center",alignItems:"center",color:"darkGray",position:"absolute",right:!0,height:35,width:35,marginRight:5,marginTop:5,shape:"rounded",dangerouslySetInlineStyle:{__style:{zIndex:1,opacity:u,transition:"opacity .3s"}}},o.a.createElement(p.K,{color:"white",size:"md"},"".concat(l+1,"/").concat(c.length))):null})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.hideBadgeTimeout=setTimeout((function(){return e.setState({showBadge:!1})}),3e3)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state.showBadge,r=e.carouselData,o=this.props.carouselData;if(r&&o){var i=r.index,a=o.index;n&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout((function(){return t.setState({showBadge:!1})}),3e3)),i!==a&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}}},{key:"componentWillUnmount",value:function(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}},{key:"render",value:function(){var e=this.props,t=e.isCloseup,n=e.carouselIndex,r=e.closeupHeight,i=e.closeupWidth,a=void 0===i?0:i,d=e.cropProductPin,f=e.carouselData,m=e.highResOnly,y=e.lowResOnly,h=e.onError,b=e.onLoad,g=e.pinId,v=e.isEditMode;if(!f)return null;var w,O=f.carousel_slots,_=void 0===O?[]:O,E=f.index,S=void 0!==n?n:E;return w=t?a:!t&&d?s.b:m?474:236,o.a.createElement(p.c,{height:r||"100%",width:w,overflow:"hidden"},!v&&this.renderBadge(),o.a.createElement(l.a,{trackCarousel:!0,key:"carousel-impression-key-".concat(S),impressionType:"Pin",loggingId:g,slotIndex:E,viewParameter:72,viewType:1},o.a.createElement(p.c,{position:"absolute",height:r||"100%",width:w,overflow:"hidden"})),o.a.createElement(p.c,{width:w*_.length,dangerouslySetInlineStyle:{__style:{left:S*w*-1+"px",transition:"left .3s"}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative"},_.map((function(e,n){return function(e,t,n,r,i,a,l,d,f,m,y){var h,b,g,v,w=e.images,O=e.details,_=void 0===O?"":O;d?(h=f||0,b=m||0,g=w&&(w["564x"]&&w["564x"].url||w["736x"]&&w["736x"].url||w["236x"]&&w["236x"].url)):r?(h=474,b=w&&Math.min(h/.8,h/(w["564x"].width/w["564x"].height)),g=w&&w["564x"].url):(b=w&&w["236x"].height,h=w&&w["236x"].width,g=w&&w["236x"].url),v=i?"".concat(w["236x"].url," 1x"):r?"".concat(w["564x"].url," 1x"):[w["474x"]&&"".concat(w["474x"].url," 2x"),w["736x"]&&"".concat(w["736x"].url," 3x"),w.orig&&"".concat(w.orig.url," 4x")].filter(Boolean).join(", ");var E=_||"".concat(c.a._("carousel image","Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed")," ").concat(n);return o.a.createElement(p.c,Object.assign({key:"carousel-slot-".concat(t,"-").concat(n)},y?{}:{height:b},y?{}:{width:h}),o.a.createElement(u.a,{name:"web_image_loading_optimization"},(function(e){var t=e.group;return o.a.createElement(p.c,Object.assign({},y?{height:s.a}:{},y?{width:s.b}:{}),o.a.createElement(p.p,{alt:E,fit:y?"cover":"none",naturalHeight:b,naturalWidth:h,onError:a,onLoad:l,src:g,srcSet:v,loading:t.includes("lazy")?"lazy":"auto",importance:t.includes("low")?"low":"auto"}))})))}(e,g,n,m,y,h,b,t,a,r,d)}))))}}])&&f(n.prototype,r),i&&f(n,i),t}(r.Component);b(g,"defaultProps",{showCarouselBadge:!0});t.a=Object(i.connect)((function(e,t){var n=e.pins,r=t.carouselData,o=n[t.pinId];return{carouselData:r||Object(a.a)(o)}}),(function(){return{}}))(g)},"JU/q":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="favorited"},Kb0Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("GyhR"),o=n.n(r),i=n("+U6O");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={__path:"M8.134 8.116a1.25 1.25 0 0 0-1.768 0L4.25 10.232 2.134 8.116A1.25 1.25 0 0 0 .366 9.884L2.483 12 .366 14.116a1.25 1.25 0 0 0 1.768 1.768l2.116-2.117 2.116 2.117a1.248 1.248 0 0 0 1.768 0 1.25 1.25 0 0 0 0-1.768L6.018 12l2.116-2.116a1.25 1.25 0 0 0 0-1.768M24 8v8a2.5 2.5 0 0 1-2.5 2.5h-8A2.5 2.5 0 0 1 11 16V8a2.5 2.5 0 0 1 2.5-2.5h8A2.5 2.5 0 0 1 24 8"},f=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return r=this,o=(e=l(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==a(o)&&"function"!=typeof o?s(r):o,p(s(s(n)),"state",{hovered:!1}),p(s(s(n)),"handleMouseEnter",(function(e){return n.setState({hovered:!0})})),p(s(s(n)),"handleMouseLeave",(function(e){return n.setState({hovered:!1})})),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.bold,n=e.icon,r=e.text,a=e.description,c=e.compact,l=Array.isArray(r)?r.join(""):r;return o.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o.a.createElement(i.c,{alignItems:"start",color:this.state.hovered?"lightGray":"transparent",display:"flex",direction:"row",overflow:"hidden",paddingX:4,paddingY:2,marginStart:-1,marginEnd:-1,title:l},!c&&n&&o.a.createElement(i.c,{flex:"none",padding:1},"unfollow"===n?o.a.createElement(i.n,{accessibilityLabel:"",color:"darkGray",dangerouslySetSvgPath:d,size:16}):o.a.createElement(i.n,{accessibilityLabel:"",color:"darkGray",icon:n,size:16})),o.a.createElement(i.c,{flex:"grow",display:"flex",direction:c?"row":"column",padding:1,width:"100%",alignItems:c?"center":"start"},o.a.createElement(i.K,{bold:t,size:c?"sm":"md",color:"darkGray"},r),o.a.createElement(i.c,{display:"flex",alignItems:"center"},!c&&a&&o.a.createElement(i.c,{marginTop:1},o.a.createElement(i.K,{color:"darkGray",overflow:"normal"},a))))))}}])&&c(n.prototype,r),f&&c(n,f),t}(r.PureComponent);p(f,"defaultProps",{bold:!0})},L43L:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("GyhR"),o=n.n(r),i=n("QUnS"),a=n.n(i),c=n("+U6O"),l=function(e){var t=e.fill,n=e.width,r=e.color,i=e.isLego,a=void 0!==i&&i,l="yellow"===r?"#e2780d":"#333",u="half"===t?o.a.createElement("svg",{height:n,width:n,viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fill:l,d:"M12.00,0.00 L12.00,0.00 C11.40,0.00 10.79,0.35 10.57,1.06 L8.48,7.92 L1.49,7.92 C0.07,7.92 -0.54,9.75 0.59,10.62 L6.30,15.03 L4.16,22.04 C3.73,23.44 5.34,24.57 6.49,23.68 L12.00,19.43 L12.00,0.00 Z"}),o.a.createElement("path",{fill:"lightgray",d:"M12.00,0.00 L12.00,0.00 C12.60,0.00 13.21,0.35 13.43,1.06 L15.52,7.92 L22.51,7.92 C23.93,7.92 24.55,9.75 23.41,10.62 L17.70,15.03 L19.84,22.04 C20.27,23.44 18.66,24.57 17.51,23.68 L12.00,19.43 L12.00,0.00 Z"})):o.a.createElement("svg",{height:n,width:n,viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fill:"full"===t?l:"lightgray",d:"M13.43,1.06 L15.52,7.92 L22.51,7.92 C23.93,7.92 24.54,9.75 23.41,10.62 L17.70,15.03 L19.84,22.04 C20.27,23.44 18.66,24.57 17.51,23.68 L12.00,19.43 L6.49,23.68 C5.34,24.57 3.73,23.44 4.16,22.04 L6.30,15.03 L0.59,10.62 C-0.54,9.75 0.07,7.92 1.49,7.92 L8.48,7.92 L10.58,1.06 C11.01,-0.35 12.99,-0.35 13.43,1.06"}));return o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{marginRight:a?"3px":0}},display:"inlineBlock"},u)};function u(e){var t=e.max_rating,n=e.rating,r=e.width,i=e.color,c=e.isLego,u=void 0!==c&&c,s=[],p=function(e,t){return 5*(t=t<=e?t:e)/e}(parseFloat(t)||5,parseFloat(n)||0);if(isNaN(p))return null;var d=Math.floor(p),f=p-d;return a()(d,(function(e){return s.push(o.a.createElement(l,{fill:"full",width:r,key:e,color:i,isLego:u}))})),f>=.75?s.push(o.a.createElement(l,{fill:"full",width:r,key:s.length,color:i,isLego:u})):f>=.25&&s.push(o.a.createElement(l,{fill:"half",width:r,key:s.length,color:i,isLego:u})),a()(5-s.length,(function(){return s.push(o.a.createElement(l,{fill:"empty",width:r,key:s.length,color:i,isLego:u}))})),o.a.createElement(o.a.Fragment,null,s)}},LCmp:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=80,o="…";function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;if(!e)return"";if(e.length<=n)return e;if(" "!==e[n-1]&&" "===e[n])t=e.substring(0,n);else{var a=e.lastIndexOf(" ",n);t=e.substring(0,a)}return(t=t.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+i}},NmHc:function(e,t,n){"use strict";var r=n("GyhR"),o=n("iJ35"),i=n("+U6O");t.a=function(e){var t=e.pinId,n=e.sourceUrl,a=e.domain,c=e.onClick,l=e.bgColor,u=e.size,s=e.iconColor;return n?r.createElement(o.b,{external:!0,onClick:c,pinId:t,stopPropagation:!0,to:n},r.createElement(i.o,{bgColor:l,icon:"arrow-up-right",accessibilityLabel:a,size:u,iconColor:s})):null}},QUnS:function(e,t,n){var r=n("SVx8"),o=n("9mHT"),i=n("MQR1"),a=9007199254740991,c=4294967295,l=Math.min;e.exports=function(e,t){if((e=i(e))<1||e>a)return[];var n=c,u=l(e,c);t=o(t),e-=c;for(var s=r(u,t);++n<e;)t(n);return s}},RCVt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[].slice.call(e.querySelectorAll("*"),0).filter(a)};var r=/input|select|textarea|button|object/;function o(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;var n=window.getComputedStyle(e);return t?"visible"!==n.getPropertyValue("overflow"):"none"==n.getPropertyValue("display")}function i(e,t){var n=e.nodeName.toLowerCase();return(r.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e;t&&t!==document.body;){if(o(t))return!1;t=t.parentNode}return!0}(e)}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&i(e,!n)}e.exports=t.default},TRIq:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("HvLx"),a=n("Qo1m"),c=n("iEzj"),l=n("+U6O");t.a=c.a.makeSendShareButton((function(e){var t=e.handleSendShareFlyoutButtonClick;e.viewType;return o.a.createElement("div",{className:"pinRepSendShareFlyoutButton"},o.a.createElement(l.d,{onClick:function(e){var n=e.event;n&&n.stopPropagation&&n.stopPropagation(),Object(i.a)(t)()},text:a.a._("Send","Send a pin"),color:"gray",accessibilityLabel:a.a._("Send","Accessible label to send a pin")}))}))},UmN8:function(e,t,n){"use strict";var r=n("fxqt");n("GyhR"),n("1ZRU"),n("2YES");n.d(t,"a",(function(){return r.a}))},"V+Hv":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("GyhR"),o=n("AdUJ").a;function i(e){return(0,e.children)(Object(r.useContext)(o))}function a(){return Object(r.useContext)(o)}},VI9K:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i}));var r=function(e){return{type:"MOST_RECENT_PIN",payload:{id:e}}},o=function(e){return{type:"MOST_RECENT_PLP",payload:{plpPinId:e}}},i=function(e){return{type:"MOST_RECENT_PIN_IMAGE",payload:{image_signature:e}}}},Wiy7:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var o=function(e,t){return e.length===t.length&&e.every((function(e,n){return function(e,t){if("object"===r(e)&&"object"===r(t)){var n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&n.every((function(n){return e[n]===t[n]}))}return e===t}(e,t[n])}))},i=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return function(n){var r=[];return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=this,l=r.find((function(e){return e.context===c&&t(e.args,i)}));if(l)return l.result;var u={context:c,args:i,result:n.apply(this,i)};return r.push(u),e&&r.length>e&&r.shift(),u.result}}},c=a(1),l=a()},"Ww6/":function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=(n("GB3e"),n("Fpqi")),c=n("PNko"),l=n.n(c),u=n("/Mjl"),s=n("+U6O");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=e.debugImpressionStarted,n=e.debugImpressionLogged,o=e.slotIndex,i=n||t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},n&&!t?{opacity:.1}:{},t?{backgroundColor:"#adebad"}:{},{height:"100%",width:"100%"}):null;return r.createElement("div",{style:i},(t||n)&&r.createElement(s.c,{position:"absolute",padding:2,color:"darkGray",dangerouslySetInlineStyle:{__style:{zIndex:u.a.debugPinImpressions}}},r.createElement(s.K,{size:"xl",color:"white"},o)),e.children)}var f=n("Uc2O"),m=n("m2OL"),y=n("rSK6"),h=n("Qo1m"),b=n("exzK"),g=n("iJ35"),v=n("NmHc"),w=n("hvnN"),O=n.n(w),_=n("fifU"),E=n("Mce2"),S=n("s3m5"),P=n("NoZx"),C=n("buVl"),T=n("UmN8"),I=n("k9eC"),j=n("lixz"),k=n("NmcB"),x=n("4OrY");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=23,F=15,z=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return o=this,i=(e=L(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==R(i)&&"function"!=typeof i?N(o):i,B(N(N(n)),"state",{hovered:!1,focused:!1,active:!1}),B(N(N(n)),"handleFocus",(function(){n.setState({focused:!0})})),B(N(N(n)),"handleMouseDown",(function(){n.setState({active:!0})})),B(N(N(n)),"handleMouseUp",(function(){n.setState({active:!1})})),B(N(N(n)),"handleMouseEnter",(function(){n.setState({hovered:!0})})),B(N(N(n)),"handleMouseLeave",(function(){n.setState({active:!1,hovered:!1})})),B(N(N(n)),"renderRightArrowClickthrough",(function(){var e=n.props,t=e.backgroundColor,o=e.borderRadius,i=e.denseViewSelected,a=e.domain,c=e.textColor,l=e.maxHeight,u=i?F:U,p=Object(x.a)(a,{maxLength:u});return r.createElement(s.c,{padding:2,color:t,display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:o}},maxHeight:l},r.createElement(s.c,{display:"flex",flex:"none"},r.createElement(s.n,{icon:"arrow-up-right",accessibilityLabel:h.a._("link","Website url link"),size:14,color:c})),r.createElement(s.c,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},r.createElement(s.K,{bold:!0,size:"sm",color:c,truncate:!0},p)))})),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.borderRadius,n=e.bottom,o=e.hoverStyle,i=e.isEligibleForWebCloseup,a=e.onClick,c=e.pinId,l=e.position,u=e.sourceUrl,p=e.paddingX;if(!u)return null;var d=this.state.hovered||this.state.focused||this.state.active?o:{};return r.createElement(s.c,{position:l,bottom:n},r.createElement(s.c,{alignItems:"end",display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1,padding:2},r.createElement(s.c,{minWidth:0,paddingX:p},!i&&r.createElement(s.c,{position:"relative",dangerouslySetInlineStyle:{__style:A({borderRadius:t},d)},onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp},r.createElement(g.b,{external:!0,onClick:a,pinId:c,stopPropagation:!0,to:u},this.renderRightArrowClickthrough())))))}}])&&D(n.prototype,o),i&&D(n,i),t}(r.Component);B(z,"defaultProps",{textColor:"darkGray",backgroundColor:"lightGray",borderRadius:4,position:"absolute",bottom:!0,hoverStyle:{},paddingX:1});var H=n("2YES"),G=n("FSbA"),V=n("9Y9K"),W=n("zBQm");function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Z(e,t,n[t])}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=Object(r.lazy)((function(){return n.e("NuxOneClickSaveButtonCommon").then(n.bind(null,"/zC8"))})),ee=Object(r.lazy)((function(){return Promise.all([n.e(17),n.e("PersistentOneClickSaveCommon")]).then(n.bind(null,"d94/"))})),te=Object(r.lazy)((function(){return Promise.all([n.e(10),n.e(17),n.e(44),n.e("PinBetterSaveCommon")]).then(n.bind(null,"qoD0"))})),ne=Object(r.lazy)((function(){return n.e("PinPromoteButtonCommon").then(n.bind(null,"Is9E"))})),re=Object(r.lazy)((function(){return Promise.all([n.e(17),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"24KF"))})),oe=Object(r.lazy)((function(){return Promise.all([n.e(10),n.e(36),n.e("PinSaveButtonCommon")]).then(n.bind(null,"odTJ"))})),ie=Object(r.lazy)((function(){return n.e("PinRepSendShareFlyoutButtonCommon").then(n.bind(null,"pi5b"))})),ae=Object(r.lazy)((function(){return n.e("BoardActivityPinRepLikeButtonCommon").then(n.bind(null,"1pwd"))})),ce=function(e){var t=e.style,n=J({},void 0===t?{}:t,{zIndex:u.a.pinActionWrapper});return o.a.createElement(s.c,Object.assign({},e,{dangerouslySetInlineStyle:{__style:n}}))},le=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=q(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==K(o)&&"function"!=typeof o?X(r):o,Z(X(X(n)),"state",{isReactionBarShowing:!1}),Z(X(X(n)),"onToggleFlyout",(function(){var e=n.props,t=e.isFlyoutOpen;(0,e.onToggleFlyout)(!t)})),Z(X(X(n)),"handleOnSourceImageClick",(function(){var e=n.props,t=e.imageSignature,r=e.requestContext,o=e.slotIndex;Object(j.g)(13),new I.c(r,"smb_pin_stats_from_business_profile").enabled(),n.handleClickLogging(35,{grid_index:o,image_signature:t})})),Z(X(X(n)),"handleToggleHover",(function(e){n.props.onToggleFlyout(!1,e)})),Z(X(X(n)),"handleToggleSubmenu",(function(e,t){n.props.onToggleFlyout(e,t,"save")})),Z(X(X(n)),"handleDropdownClose",(function(){n.props.onToggleFlyout(!1)})),Z(X(X(n)),"handleClickthroughLogging",(function(){var e=n.props,t=e.componentType,r=e.contextLogData,o=e.pin,i=e.slotIndex,a=e.viewType,c=e.viewParameter,l=o.id;Object(k.a)(12,J({},r,{view:a,viewParameter:c,component:t,objectId:l,grid_index:i})),n.handleClickLogging(162)})),Z(X(X(n)),"handleSaveButtonClick",(function(){n.handleClickLogging(0)})),Z(X(X(n)),"handleLikeButtonClick",(function(e){var t=e.event;t&&t.stopPropagation&&(t.stopPropagation(),n.toggleReaction())})),Z(X(X(n)),"handleLikeButtonTouch",(function(e){e&&e.stopPropagation&&(e.stopPropagation(),n.toggleReaction())})),Z(X(X(n)),"toggleReaction",(function(){var e=n.props,t=e.boardActivity,r=e.updateReaction,o=e.reactionByMe,i=e.pin,a=0;0===o&&(a=1),r(t&&t.id||i.id,P.a.BOARD_ACTIVITY,o,a)})),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(i=[{key:"getViewInfo",value:function(){var e=this.props,t=e.viewType,n=e.showEditPinButton,r=5===t,o=2===t,i=4===t;return{isBoardView:r,isSearchView:o,isProfileView:i,isOwnProfileView:i&&n,isOwnBoardView:(r||164===t)&&n,isOwnPinSearchView:o&&n}}},{key:"cropImageStyles",value:function(){var e=this.props,t=e.imageHeight,n=e.pin,r=e.truncatePinHeight,o={},i=n.story_pin_data_id;if(n.image_crop&&r&&!i&&(0!==n.image_crop.min_y||1!==n.image_crop.max_y)){var a=n.image_crop.min_y,c=n.image_crop.max_y;o={marginTop:a>0?-1*a*t+"px":"0px",marginBottom:c<1?Math.round(-1*(1-c)*t)+"px":"0px"}}return o}},{key:"handleClickLogging",value:function(e,t){var n=this.props,r=n.componentType,o=n.contextLogData,i=n.viewParameter,a=n.viewType,c=n.pin.id;Object(k.a)(101,J({},o,t,{component:r,view:a,viewParameter:i,element:e,objectId:c}))}},{key:"renderSendShareButton",value:function(e){var t=this,n=this.props,r=n.images,i=n.pin.id,a=n.viewType;return o.a.createElement(E.a,{id:"share-button"},o.a.createElement(_.a,null,o.a.createElement(ie,{imageSrc:r&&r["236x"].url,onClick:function(){return t.handleClickLogging(98)},onToggleFlyout:this.onToggleFlyout,onFlyoutDismiss:this.handleDropdownClose,pinId:i,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:this.props.isFlyoutOpen,viewType:a,backgroundColor:"transparentDarkGray",iconColor:"white",iconSize:e})))}},{key:"renderEditButton",value:function(e){var t=this.props,n=t.pin,r=n.id,i=n.carousel_data,a=t.viewParameter,c=t.viewType;return o.a.createElement(E.a,{id:"edit-button"},o.a.createElement(_.a,null,o.a.createElement(re,{component:0,pinId:r,onToggleModal:this.handleToggleHover,view:c,viewParameter:a,carouselSlotCurrentIndex:i&&i.index,style:e})))}},{key:"renderEditAndSendRow",value:function(e,t){var n={bgColor:"transparentDarkGray",iconColor:"white",size:"md"};return o.a.createElement(ce,{padding:1,position:"absolute",top:!0,left:!0,display:"flex"},e&&o.a.createElement(s.c,{padding:1},this.renderSendShareButton("md")),t&&o.a.createElement(s.c,{padding:1},this.renderEditButton(n)))}},{key:"renderPrimaryButtons",value:function(){var e=this,t=this.props,n=t.hideSaveButton,r=t.inNewUserOneTapExperiment,i=t.onSave,a=t.pin,c=t.showRepinButton,l=t.showPromoteButton,u=t.showCondensedInfo,p=t.showButtons,d=t.viewer,f=t.saveOptions,m=t.viewParameter,y=t.showClickthroughButton,h="controlled"===f.type,b=f&&"persistentOneClickSave"===f.type,g=h&&f.saved&&f.save,v=c||l,w=f&&"none"!==f.type?f.renderPinSaveTooltip:void 0;if(!(g||p&&v||w||b))return y?o.a.createElement(s.c,{position:"absolute",bottom:!0,color:"transparentDarkGray",right:!0,marginBottom:2,marginRight:2,shape:"pill"},o.a.createElement(s.c,{paddingX:3,paddingY:1},o.a.createElement(s.K,{color:"white",bold:!0,size:"xs"},"Open"))):null;if(n)return null;var O=null,S=o.a.createElement(E.a,{id:"pin-save-button"},o.a.createElement(_.a,null,o.a.createElement(oe,{onClickCallback:function(){e.handleClickLogging(0)},onToggleModal:this.handleToggleHover,oneTapSave:h?f:void 0,pin:a,renderPinSaveTooltip:w})));l?O=o.a.createElement(E.a,{id:"promote-button"},o.a.createElement(_.a,null,o.a.createElement(ne,{pin:a}))):"inline"===f.type?O=o.a.createElement(E.a,{id:"better-save"},o.a.createElement(_.a,null,o.a.createElement(te,{initialSelection:f&&f.initialSelection,useMasonryFlyout:!0,onSave:function(){f&&f.onSave&&f.onSave(),i&&i()},onToggleFlyout:this.handleToggleSubmenu,onToggleModal:this.handleToggleHover,pin:a,renderPinSaveTooltip:w,viewParameter:m,renderSavedStatus:null}))):"persistentOneClickSave"===f.type?O=o.a.createElement(_.a,null,o.a.createElement(ee,{onToggleModal:this.handleToggleHover,pin:a,saveOptions:f})):(g||c&&d.isAuth)&&(O=r?o.a.createElement(E.a,{id:"nux-one-click-save"},o.a.createElement(_.a,null,o.a.createElement($,{onClickCallback:this.handleSaveButtonClick,pin:a}))):S),u&&(O=S);var P="inline"!==f.type||u?"auto":"100%";return o.a.createElement(ce,{padding:2,position:"absolute",top:!0,right:!0,width:P},O)}},{key:"renderGradientOverlay",value:function(e){var t=this.props.showButtons;return o.a.createElement(s.c,{position:"relative"},e,t&&o.a.createElement(s.c,{bottom:!0,left:!0,height:"100%",position:"absolute",right:!0,top:!0,width:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",opacity:.3}}}))}},{key:"renderClickThrough",value:function(e){var t=this.props,n=t.denseViewSelected,r=t.domain,i=t.isEligibleForWebCloseup,a=t.pin.id,c=t.sourceUrl;return o.a.createElement(z,{denseViewSelected:n,domain:r,isEligibleForWebCloseup:i,sourceUrl:c,pinId:a,position:e,textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})}},{key:"renderHolisticHoverOwnPinViewCondensed",value:function(){var e=this.props,t=e.pin.id,n=e.domain,r=e.sourceUrl,i=e.showEditPinButton,a={size:"md",iconColor:"white",bgColor:"transparentDarkGray"},c=J({pinId:t,domain:n,sourceUrl:r,bgColor:"transparentDarkGray"},a);return o.a.createElement(ce,{padding:1,width:"100%",position:"absolute",bottom:!0,left:!0,display:"flex",alignItems:"center",justifyContent:"around"},o.a.createElement(s.c,{padding:1},o.a.createElement(s.c,{width:40,height:40},o.a.createElement(v.a,Object.assign({},c,{onClick:this.handleClickthroughLogging})))),o.a.createElement(s.c,{padding:1},i&&this.renderEditButton(a)),o.a.createElement(s.c,{padding:1},this.renderSendShareButton("md")))}},{key:"renderHolisticHoverOwnPinView",value:function(){var e=this.props,t=e.showSendButton,n=e.showEditPinButton,r=e.pin.id,i=e.domain,a=e.isEligibleForWebCloseup,c=e.sourceUrl,l={iconColor:"white",bgColor:"transparentDarkGray",size:"sm"};return o.a.createElement(ce,{padding:1,position:"absolute",bottom:!0,left:!0,display:"flex",width:"100%",alignItems:"center",height:50},o.a.createElement(s.c,{width:"".concat(65,"%")},o.a.createElement(z,{domain:i,isEligibleForWebCloseup:a,sourceUrl:c,pinId:r,position:"relative",textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})),o.a.createElement(s.c,{width:"".concat(35,"%"),display:"flex",justifyContent:"end"},n&&o.a.createElement(s.c,{padding:1},this.renderEditButton(l)),t&&o.a.createElement(s.c,{padding:1},this.renderSendShareButton("sm"))))}},{key:"renderReactionButton",value:function(e,t){var n=this,r=this.props.denseViewSelected;return o.a.createElement(E.a,{id:"board-reactions-button"},o.a.createElement(_.a,null,o.a.createElement(T.a,{name:"group_boards_reactions",activate:!1},(function(t){var i=t.anyEnabled,a=t.customActivate;return o.a.createElement(ae,{pin:e,activateReactionsExperiment:a,inReactionsExperiment:i,onShowReactionsBar:function(){n.setState({isReactionBarShowing:!0})},onHideReactionsBar:function(){n.setState({isReactionBarShowing:!1})},supportsReactionBar:!r})}))))}},{key:"renderSecondaryButtons",value:function(){return this.props.showCondensedInfo?this.renderHolisticHoverOwnPinViewCondensed():this.renderHolisticHoverOwnPinView()}},{key:"renderTopButtons",value:function(){var e=this.props,t=e.pin,n=e.showReactions,i=e.showButtons,a=e.reactionByMe,c=this.state.isReactionBarShowing,l=null;if(n){var u=0!==a;if(i){var s=c?"100%":null;l=o.a.createElement(r.Fragment,null,o.a.createElement(ce,{width:s,position:"absolute",top:!0,left:!0,padding:2},this.renderReactionButton(t,a)),this.renderSecondaryButtons())}else u&&(l=o.a.createElement(ce,{position:"absolute",top:!0,left:!0,padding:2},this.renderReactionButton(t,a)))}else l=o.a.createElement(r.Fragment,null,i&&this.renderSecondaryButtons(),this.renderPrimaryButtons());return l}},{key:"render",value:function(){var e=this.props,t=e.currentlyPlayingVideo,n=e.children,i=e.isEligibleForAnalyticsCloseup,a=e.pin,c=a.carousel_data,u=a.id,p=a.videos,d=e.selection,f=e.showButtons,m=e.viewParameter,y=e.viewType,h=e.componentType,v=this.cropImageStyles(),w=!!p&&!!p.video_list,O=(p&&p.video_list&&p.video_list[Object.keys(p.video_list)[0]]||{}).duration,_=void 0===O?0:O;return o.a.createElement(s.c,{"data-test-id":c?"carousel-pin":"",position:"relative"},f&&c&&o.a.createElement(b.a,{pinId:u,componentType:h,viewParameter:m,viewType:y}),o.a.createElement(g.b,{deeplinkUrls:Object(C.o)(u),onClick:this.handleOnSourceImageClick,forceRefresh:1,extraData:{isReact:!0,reactData:this.props.pin,searchOptions:this.props.searchOptions},style:{cursor:"zoom-in",display:"block",position:"relative"},to:Object(W.b)(u,i||!1)},o.a.createElement(s.u,{shape:"rounded",wash:!0},o.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:v},minHeight:55},this.renderGradientOverlay(n))),o.a.createElement(s.c,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0})),d!==lt.NO_SELECTION&&o.a.createElement("div",{className:l()("pinSelectionBorder",{selected:d===lt.SELECTED})}),o.a.createElement(r.Fragment,null,this.renderTopButtons(),f||!w||t?null:o.a.createElement(ce,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},o.a.createElement(S.a,{duration:_}))))}}])&&Y(n.prototype,i),a&&Y(n,a),t}(o.a.Component);Z(le,"defaultProps",{onToggleFlyout:function(){},pinsBoardEditableByViewer:!1,showCondensedInfo:!1,showOnPinAnalyticsNUX:!1,showPromoteButton:!1});var ue=Object(i.connect)((function(e,t){var n=t.pin.id,r=t.boardActivity,o=e.ui.app?e.ui.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},i=Object(W.j)(n,o),a=r&&r.id||n,c=e.activityItems[a],l=0;return c&&null!==c.reaction_by_me&&void 0!==c.reaction_by_me&&(l=c.reaction_by_me),{currentlyPlayingVideo:i,reactionByMe:l}}),(function(e,t){return{updateReaction:Object(V.bindActionCreators)(G.c,e)}}))(le),se=n("vl7u");function pe(e){var t=e.feedbackType,n=e.topic,r=e.pinner||{},i=r.full_name,a="topic"===t,c=!a&&"followed"===t,l="/".concat(r.username,"/"),u=Object(se.g)(n),p="/search/pins/?q=".concat(encodeURIComponent(u),"&rs=image_only_attribution"),d=a?p:l,f={topic:h.a._("From {topic}","attribution on pin rep"),followed:h.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:h.a._("Picked for you","attribution on pin rep"),pfy:h.a._("Picked for you","attribution on pin rep")}[t];if(!f)return null;if(c||a){var m=0===f.indexOf("{"),y=a?n:i,b=m?f.slice(f.indexOf("}")+1):f.slice(0,f.indexOf("{"));return m?o.a.createElement(s.c,{display:"inlineBlock",marginTop:1},o.a.createElement(g.b,{to:d},o.a.createElement(s.K,{bold:!0,inline:!0,size:"xs",truncate:!0},y)),o.a.createElement(s.K,{inline:!0,size:"xs"},b)):o.a.createElement(s.c,{display:"inlineBlock",marginTop:1},o.a.createElement(s.K,{inline:!0,size:"xs"},b),o.a.createElement(g.b,{to:d},o.a.createElement(s.K,{bold:!0,inline:!0,size:"xs",truncate:!0},y)))}return o.a.createElement(s.c,{display:"inlineBlock",marginTop:1},o.a.createElement(s.K,{inline:!0,size:"xs"},f))}var de=n("Irlq");function fe(e){var t=e.pin,n=e.feedbackType,r=e.imageOnlyAttribution,i=e.isHovering,a=e.isVideo,c=e.onClickThrough,l=e.sourceUrl,u=Object(C.o)(t.id),p=t.attribution||{},d=p.author_url||p.provider_url,f=p.author_name,m=p.rich_site_name||p.provider_name,y=f?Object(de.b)(h.a._("by {{ authorName }}","attribution on pin rep"),{authorName:f}):m,b=!y&&t.has_required_attribution_provider?t.domain:y,v=d||l,w=v&&b,O=i&&!w&&r&&!a&&!t.is_native&&"followed"!==n,_=(t.source_interest||{}).name,E="io-topic-attr-"+_;return o.a.createElement(o.a.Fragment,null,w&&o.a.createElement(s.c,{paddingY:1},o.a.createElement(s.K,{size:"sm",bold:!0},o.a.createElement(g.b,{deeplinkUrls:u,external:!0,onClick:c,pinId:t.id,stopPropagation:!0,style:{color:"#898989"},to:v},b))),r&&n&&o.a.createElement(s.c,{"data-test-id":E}),O&&n&&o.a.createElement(pe,{feedbackType:n,pinner:t.pinner,topic:_}))}var me=n("xP02");function ye(e){var t=e.avatarUrl,n=e.creditNameLink,r=e.name,i=void 0===r?"":r;return n?o.a.createElement(g.b,{className:"underlineLink",stopPropagation:!0,to:n},o.a.createElement(s.a,{name:i,src:t,size:"sm"})):o.a.createElement(s.a,{name:i,src:t,size:"sm"})}function he(e){var t=e.name,n=e.creditNameLink;return o.a.createElement(s.c,null,n?o.a.createElement(g.b,{className:"underlineLink",stopPropagation:!0,to:n},o.a.createElement(s.K,{truncate:!0,size:"xs",bold:!0},t)):o.a.createElement(s.K,{truncate:!0,size:"xs",bold:!0},t))}function be(e){var t=e.title,n=e.link;return t?o.a.createElement(s.c,null,n?o.a.createElement(g.b,{className:"underlineLink",stopPropagation:!0,to:n},o.a.createElement(s.K,{truncate:!0,size:"xs"},t)):o.a.createElement(s.K,{truncate:!0,size:"xs"},t)):null}var ge=n("VI9K"),ve=32,we=function(e){return!!e.promoter&&!e.is_downstream_promotion};var Oe=Object(i.connect)(null,(function(e){return{setMostRecentPin:function(t){return e(Object(ge.b)(t))}}}))((function(e){var t,n,r,i,a,c,l=e.hideTitle,u=e.pin,p=e.viewType,d=e.viewParameter,f=e.setMostRecentPin,m=u.board,y=u.promoter,b=u.pinner||{},v=we(u),w=u.promoter||b;v&&y?(t="/".concat(y.username,"/"),n=h.a._("Promoted by"),i=y.full_name,c=y.image_small_url):(t=m&&m.url,n=b.full_name,i=m&&m.name&&"protected"!==m.privacy?m.name:"",c=b.image_small_url,r="/".concat(b.username,"/"),a=m?m.url:"");var O=!v&&!!y,_=o.a.createElement(s.c,{display:"flex",direction:"row",alignItems:"center",marginLeft:-1,marginRight:-1},o.a.createElement(s.c,{paddingX:1},o.a.createElement(me.a,{user:w,username:w&&w.username,avatarSize:ve,isDarkPromoter:O,pinId:u.id,viewParameter:d},o.a.createElement(ye,{avatarUrl:c,creditNameLink:r,name:n}))),o.a.createElement(s.c,{paddingX:1,overflow:"hidden"},o.a.createElement(he,{creditNameLink:r,name:n}),!l&&o.a.createElement(be,{link:a,title:i})));return!t||r||a?_:o.a.createElement(g.b,{className:"underlineLink",stopPropagation:!0,onClick:function(){f(u.id),Object(k.a)(101,{view:p,viewParameter:d,element:v?283:27,objectId:u.id})},to:t},_)})),_e=Object(r.lazy)((function(){return n.e("BoardActivityPinRepReactionsCommon").then(n.bind(null,"sB4Q"))})),Ee=function(e){return e&&e.board_activity&&e.board_activity.id||e.id};var Se=function(e){var t=e.pin,n=e.feedbackType,r=e.hideAttribution,i=e.imageOnlyAttribution,a=e.isHovering,c=e.imageOnly,l=e.isVideo,p=e.onClickThrough,d=(e.onReactionReplyClick,e.showCredits),f=e.showPinReactionsReply,m=e.sourceUrl,y=e.viewParameter,h=e.viewType,b=t.promoter||!c&&(d||"followed"===n),g=t.board&&t.board.should_show_board_activity,v=b&&!r;("promoted"===n||t.promoter&&!t.is_downstream_promotion)&&(v=!0);var w=Ee(t);return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,{pin:t,feedbackType:n,imageOnlyAttribution:i,isHovering:a,isVideo:l,onClickThrough:p,sourceUrl:m}),(b||g)&&o.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:{zIndex:u.a.max,position:"relative"}},paddingY:1},!g&&v&&o.a.createElement(Oe,{hideTitle:!!g,pin:t,viewParameter:y,viewType:h}),g&&o.a.createElement(s.c,{position:"relative","data-test-id":"board-activity-reactions",minHeight:16},o.a.createElement(_.a,null,o.a.createElement(_e,{pinId:t.id,activityId:w,showReply:f})))))},Pe=n("HcgI"),Ce=Object(i.connect)((function(e,t){var n=e.pins,r=t.pinId;return{carousel_data:n[r]&&n[r].carousel_data}}))((function(e){var t=e.carousel_data,n=e.description;if(t){var r=t.carousel_slots,i=void 0===r?[]:r,a=t.index;i[a]&&i[a].details&&(n=i[a].details)}var c=t?{height:"39px",overflow:"hidden"}:{};return o.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:c},paddingY:1},o.a.createElement(s.K,{size:"sm",bold:!0},o.a.createElement(Pe.a,{text:n,options:{hashtags:{appendText:"".concat(n),source:"hashtag_pinrep"}}})))})),Te=n("EQo2"),Ie=Object(i.connect)((function(e,t){var n=e.pins,r=t.pinId;return{carousel_data:n[r]&&n[r].carousel_data}}))((function(e){var t,n=e.carousel_data,r=e.pinId,i=e.sourceUrl,a=e.pinDeeplinkUrls,c=e.handleOneTapLogging,l="one-tap-desktop",u=i;if(n){var s=n.carousel_slots,p=void 0===s?[]:s,d=n.id,f=n.index;p[f]&&p[f].link&&(u=p[f].link),t={carousel_slot_id:p[f]&&p[f].id,carousel_data_id:d,carousel_slot_index:f},l+="-carousel"}return o.a.createElement(T.a,{name:"web_grid_immersive"},(function(e){var n=e.anyEnabled;return o.a.createElement(T.a,{name:"ads_desktop_whitespace_gaps"},(function(e){var i=e.anyEnabled;return o.a.createElement("div",{"data-test-id":!n&&i?"oneTapPromotedPin":"otpp"},o.a.createElement(E.a,{id:l},o.a.createElement(g.b,{auxData:t&&t,className:"oneTapNavigateLink",deeplinkUrls:a,external:!0,onClick:c,pinId:r,stopPropagation:!0,to:u})))}))}))}));function je(e){var t,n,r=e.buyableProduct,i=e.showProductInfo,a=e.richSummary;if(!i)return null;if(r){var c=r.display_active_min_price,l=r.display_active_max_price;n=r.is_available,t=c===l?c:"".concat(c," - ").concat(l)}else if(a&&(a.products||[]).length>0){var u=a.products[0].offer_summary||{},p=u.availability;t=u.price,1===p?n=!0:2===p&&(n=!1)}return t?o.a.createElement(s.c,{display:"flex",paddingY:1},o.a.createElement(s.c,{marginRight:2},o.a.createElement(s.K,{size:"sm"},t)),void 0!==n&&o.a.createElement(s.K,{size:"sm",color:n?"darkGray":"gray"},n?h.a._("In stock","A product Pin that is available"):h.a._("Out of stock","A product Pin that is out of stock"))):null}var ke=76;var xe=function(e){var t=e.chips;return o.a.createElement(s.c,{display:"flex",direction:"row",justifyContent:"between"},t.map((function(e){var t=e.images["750x"]||{};return o.a.createElement(s.c,{marginTop:1,key:e.id},o.a.createElement(g.b,{stopPropagation:!0,to:"/pin/".concat(e.id,"/")},o.a.createElement(s.u,{shape:"rounded",width:ke,height:ke,wash:!0},o.a.createElement(s.p,{alt:"",naturalHeight:t.height,naturalWidth:t.width,src:t.url,fit:"cover"}))))})))},Re=n("mnfC"),Ae=n("E1Qe"),De=n("19Gw"),Le=n("4081"),Me=n("cNuv"),Ne=n("k3nM"),Be=n("bUMO"),Ue=n("mcMS");function Fe(e){var t=e.richSummary;return o.a.createElement(s.c,{display:"flex"},!!t.display_cook_time&&o.a.createElement(s.c,{alignItems:"center",display:"flex"},o.a.createElement(s.n,{icon:"clock",accessibilityLabel:h.a._("cooking time","time it takes to cook a recipe"),color:"darkGray",size:10,inline:!0}),o.a.createElement(s.c,{paddingX:1},o.a.createElement(s.K,{inline:!0,size:"sm"},!!t.display_cook_time&&Object(Be.a)(Object(Ue.b)(t.display_cook_time))))))}var ze=n("TRIq"),He=n("LCmp"),Ge=n("q579"),Ve=n("FGWo"),We=n("kR61"),Ke=n("dmID"),Ye=n("wHKh"),qe=n("3BJc"),Qe=n("JsRk"),Xe=n("kIql"),Je=n("hCBh");function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ot(e,t,n[t])}))}return e}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return lt}));var it=Object(r.lazy)((function(){return n.e("PinFeedbackButtonCommon").then(n.bind(null,"w8LQ"))})),at=Object(r.lazy)((function(){return n.e("PinFeedbackConfirmationCommon").then(n.bind(null,"+LSA"))})),ct=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,"dmID"))})),lt={NO_SELECTION:"NO_SELECTION",SELECTED:"SELECTED",UNSELECTED:"UNSELECTED"},ut=function(e){var t=e.aggregated_pin_data.creator_analytics,n=e.creator_analytics,r=e.story_pin_data_id;return!n||!!!r&&t?t:n},st=(O.a.number,O.a.number,O.a.number,O.a.shape({}),O.a.string,O.a.bool,O.a.bool,O.a.func,O.a.shape({title:O.a.oneOfType([O.a.string,O.a.arrayOf(O.a.node)]),subTitle:O.a.oneOfType([O.a.string,O.a.arrayOf(O.a.node)])}),O.a.bool,O.a.bool,O.a.bool,O.a.bool,O.a.bool,O.a.shape({type:O.a.oneOf(["promoted","followed","topic","pfyBoard","pfy","search","newsHub","default"]).isRequired,data:O.a.shape({})}),O.a.bool,O.a.bool,O.a.func,O.a.func,Ae.a.isRequired,O.a.bool,O.a.shape({push:O.a.func.isRequired}),O.a.shape({type:O.a.oneOf(["classic","inline","controlled","persistentOneClickSave"]).isRequired}),O.a.shape({boardId:O.a.string,localPinId:O.a.string,sectionId:O.a.string,title:O.a.string,url:O.a.string}),O.a.shape({query:O.a.string.isRequired,scope:O.a.string.isRequired}),O.a.oneOf([lt.NO_SELECTION,lt.SELECTED,lt.UNSELECTED]),H.b,O.a.bool,O.a.bool,O.a.bool,O.a.bool,O.a.number.isRequired,O.a.bool,O.a.shape({id:O.a.string,isAuth:O.a.bool,isPartner:O.a.bool,username:O.a.string}),O.a.number,O.a.number,function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,o=(e=tt(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==Ze(o)&&"function"!=typeof o?rt(r):o,ot(rt(rt(n)),"state",{isHovering:!1,flyoutShown:!1,flyoutSource:"send",isNewlySaved:!1,savedInfo:n.props.savedInfo}),ot(rt(rt(n)),"onPinRepClick",(function(e){var t=n.props,r=t.pin,o=r.id,i=r.is_promoted,a=t.requestContext,c=t.router,l=t.viewer,u=t.setCurrentVideo,s=t.videosAutoplaying,p=Object(W.b)(o,n.isEligibleForAnalyticsCloseup());Object(W.j)(o,s)&&(0===n.currentVideoCurrentTime||n.currentVideoCurrentTime)&&u({pinId:o,isPromoted:i,currentTime:n.currentVideoCurrentTime});var d=e.target;if(d&&d.nodeName&&d.parentElement){var m=new f.b(n.context.userAgent.raw,n.context.userAgent.platform);if(m.shouldDeepLink(document.referrer,n.context.userAgent,l.isAuth))return e.preventDefault(),void m.navigateToDeepLink(n.context.unauthId,Object(C.o)(o));var y=d.parentElement,h=d.nodeName,b=y.nodeName,g=y.parentElement&&y.parentElement.nodeName;"A"!==h&&"A"!==b&&"BUTTON"!==h&&"BUTTON"!==b&&"A"!==g&&"BUTTON"!==g&&(new I.c(a,"smb_pin_stats_from_business_profile").enabled(),e.metaKey||e.ctrlKey?(e.preventDefault(),window.open(p)):c.push(p))}})),ot(rt(rt(n)),"getComponentType",(function(){return n.props.componentType||0})),ot(rt(rt(n)),"getSourceURL",(function(){var e=n.props.pin,t=e.link;return e.tracked_link||t})),ot(rt(rt(n)),"getPinTypes",(function(){var e=n.props.pin,t=e.attribution,r=e.buyable_product,o=e.carousel_data,i=e.embed,a=e.is_collage_pin,c=e.is_eligible_for_web_closeup,l=e.rich_summary,u=e.videos,s=[];o&&s.push("carousel"),c&&s.push("oneTap"),Object(W.i)(u)&&s.push("video");var p=i||t&&t.embed||null;return p&&"gif"===p.type&&s.push("gif"),p&&p.src&&!p.type&&s.push("embeddedVideo"),(r||l&&"product"===l.type_name)&&s.push("product"),l&&"recipe"===l.type_name&&s.push("recipe"),a&&s.push("collage"),s})),ot(rt(rt(n)),"feedbackHelpers",Object(y.a)({i18n:h.a,interpolateNamedTemplate:de.b})),ot(rt(rt(n)),"handleSave",(function(){n.setState({isHovering:!0})})),ot(rt(rt(n)),"handleOneTapLogging",(function(){var e=n.props,t=e.contextLogData,r=e.pin.id,o=a.a.getInstance(),i=o.getViewFromContext();n.handleClickthroughLogging(!0),Object(k.a)(13,$e({},t,{closeup_navigation_type:"web_closeup",objectId:r,component:0,view:3})),o.addViewToContext(i)})),ot(rt(rt(n)),"_getPrefetchCompletionPercent",(function(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";var t=window.prefetchCompletion[e],n=t.downloadedAssets,r=t.totalAssets;return r?(n/r*100).toFixed(3).toString():"-1"})),ot(rt(rt(n)),"handleClickthroughLogging",(function(e){var t=n.props,r=t.contextLogData,o=t.pin,i=o.id,a=o.link,c=t.slotIndex,l=t.viewType,u=t.viewParameter;Object(k.a)(12,$e({},r,{view:l,viewParameter:u,component:n.getComponentType(),objectId:i,grid_index:c,pin_id:i,prefetch_percentage_complete:e?n._getPrefetchCompletionPercent(a):null}))})),ot(rt(rt(n)),"handleReactionReplyClick",(function(e){return function(){return n.props.router.push(e)}})),ot(rt(rt(n)),"handleToggleFlyout",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=!(!e&&!t);n.setState({flyoutShown:e,isHovering:o,flyoutSource:r})})),ot(rt(rt(n)),"handleMouseOver",(function(){n.state.isHovering||n.setState((function(){return{isHovering:!0}}))})),ot(rt(rt(n)),"handleMouseLeave",(function(){n.state.isHovering&&n.setState((function(){return{isHovering:!1}}))})),ot(rt(rt(n)),"handleCurrentVideoCurrentTimeChanged",(function(e){var t=n.props,r=t.pin,o=t.videosAutoplaying,i=r.id;Object(W.j)(i,o)&&(n.currentVideoCurrentTime=e.time)})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,e),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.savedInfo&&t.savedInfo!==e.savedInfo?{isNewlySaved:!0,savedInfo:e.savedInfo}:null}}],(r=[{key:"getTruncatedString",value:function(e){var t=this.props.pin.is_promoted?60:50;return e&&Object(He.a)(e.trim(),t)||""}},{key:"getPinTitle",value:function(){var e=this.props.pin,t=e.carousel_data,n=e.title,r=e.buyable_product,o=e.rich_summary,i=o&&"mobile application"!==o.type_name;if(this.isOwnPin&&!t)return"";if(t){var a=t.carousel_slots,c=void 0===a?[]:a,l=t.index;if(c[l]&&c[l].title)return c[l].title.trim()}return this.getTruncatedString(n||i&&o.display_name||r&&r.title)}},{key:"getFeedbackType",value:function(){var e=this.props,t=e.feedback,n=e.viewParameter,r=e.pin;return this.feedbackHelpers.getFeedbackType({board:r.board,feedback:t,viewParameter:n,pin:r,pinner:r.pinner})}},{key:"isEligibleForAnalyticsCloseup",value:function(){var e=this.props,t=e.requestContext,n=e.viewParameter,r=e.viewer,o=92===n,i=43===n,a=!1;return this.isOwnPin&&r.isPartner&&!o&&!i&&(a=new I.c(t,"smb_pin_stats_from_business_profile").enabledWithNoActivation()),a}},{key:"render",value:function(){var e=this,t=this.props,n=t.boardCount,r=t.carouselIndex,i=t.contextLogData,a=t.createdAt,c=t.debugImpressionLogged,p=t.debugImpressionStarted,f=t.denseViewSelected,y=t.experience,b=t.feedback,g=t.feedbackText,v=t.isHomefeedContextualMenuTooltipExperience,w=t.isNewOrResurrectedNonPartner,O=t.isSocialSeasonalBoard,S=t.hideAttribution,P=t.hideFeedbackButton,j=t.showCondensedInfo,k=t.showFeedbackOverlay,x=t.isShareable,R=t.hideHover,A=t.hideSaveButton,D=t.lowResOnly,L=t.highResOnly,M=t.onError,N=t.onLoad,B=t.pin,U=t.pinsBoardEditableByViewer,F=t.saveOptions,z=t.savedInfo,H=t.searchOptions,G=t.selection,V=void 0===G?lt.NO_SELECTION:G,K=t.showImageOnly,Y=t.slotIndex,q=t.truncatePinHeight,Q=t.viewer,X=t.viewParameter,J=t.viewType,Z=t.showCredits,$=t.showFeedback,ee=t.showProductInfo,te=t.showPinReactionsReply,ne=t.showPinStats,re=t.showSavedInfo,oe=t.undoAction,ie=t.undoText,ae=t.requestContext,ce="boolean"==typeof K?K:w,le=w,se=B.ad_match_reason,pe=B.aggregated_pin_data,de=B.board,fe=B.board_activity,me=B.buyable_product,ye=B.carousel_data,he=B.creator_analytics,be=B.debug_info_html,ge=B.description,ve=void 0===ge?"":ge,we=B.domain,_e=B.dominant_color,Ee=B.grid_title,ke=B.id,Ae=B.image_signature,Be=B.images,Ue=B.is_quick_promotable,He=B.is_eligible_for_web_closeup,Ve=B.pinner,qe=void 0===Ve?{}:Ve,Qe=B.promoted_is_removable,Xe=B.promoter,Ze=B.recommendation_reason,et=B.rich_summary,tt=B.source_interest,nt=B.category,rt=this.state,ot=rt.flyoutShown,st=rt.flyoutSource,pt=rt.isHovering,dt=rt.isNewlySaved,ft=this.getSourceURL(),mt=((y||{}).display_data||{}).lite,yt=(this.isOwnPin||this.canDelete)&&!mt,ht=!mt&&x,bt=$e({},i,Object(We.a)(B,i)),gt=((pe||{}).aggregated_stats||{}).done,vt=(pe||{}).pin_tags_chips,wt=Be&&Be["236x"].height,Ot=Be&&Be["236x"].width,_t=this.getPinTypes(),Et=Object(W.g)(B),St=Object(Ke.getEligiblePinTypes)(_t),Pt=St.isCarousel,Ct=St.isOneTap,Tt=St.isRecipe,It=St.isStoryPin,jt=St.isVideo,kt=It?"":this.getTruncatedString(Ee),xt=this.getPinTitle(),Rt=this.getTruncatedString(ve),At=ce,Dt=!At&&"string"==typeof Ee&&!ye,Lt=!At&&!xt&&!Dt,Mt=!(At||!xt||Dt||O),Nt=l()("PinRep","Module","Pin","hasAttribution","summary","fullWidth",{flyoutShown:ot}),Bt=Object(Ye.i)(B),Ut=_t.length>0,Ft=!Ct&&!Pt&&jt||Tt&&!Pt&&(!B.rich_summary||!B.rich_summary.aggregate_rating||!B.rich_summary.aggregate_rating.review_count),zt=!O&&Mt&&xt.length>0,Ht=!O&&Lt&&Rt.length>0,Gt=!zt&&!Ht&&O,Vt=O&&_t.includes("gif"),Wt=Q.isAuth&&Q.isEmployee&&be,Kt=0!==Object.keys(he||{}).length||0!==Object.keys(pe||{}).length&&0!==Object.keys(pe.creator_analytics||{}).length,Yt=F||(!yt&&void 0!==n&&n>1?{type:"inline"}:{type:"classic"}),qt=Q.isAuth&&ht&&x&&!Gt,Qt="persistentOneClickSave"===Yt.type,Xt=Yt&&Yt.savedInfo&&Yt.savedInfo.title||"",Jt=this.getFeedbackType(),Zt=we;if(ye){var $t=r||ye.index||0,en=ye.carousel_slots,tn=void 0===en?[]:en,nn=tn[$t]&&tn[$t].link||"";Zt=(Zt=nn&&Ge.a.parse(nn).hostname)&&Zt.replace("www.","")||we}var rn=B.is_native||B.promoter||!At&&(Z||"followed"===Jt),on=B.board&&B.board.should_show_board_activity,an=on&&rn&&!S,cn=1===Y&&!!v,ln=new I.c(ae,"px_pinstats_90_day_default_on_grid").enabled();return o.a.createElement(s.c,{position:"relative"},o.a.createElement("div",{className:Nt,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,"data-test-id":"pin","data-test-pin-id":B.id},z&&re&&o.a.createElement(E.a,{id:"savedInfo"},o.a.createElement(s.c,{width:"172px",marginTop:Qt?3:2,paddingY:3,paddingX:3,position:"absolute",left:!0,top:!0,dangerouslySetInlineStyle:{__style:{zIndex:u.a.saved}}},o.a.createElement(Re.a,{isNewlySaved:dt,name:Qt?Xt:z.title,url:Qt?Yt&&Yt.savedInfo&&Yt.savedInfo.url:z.url}))),o.a.createElement(d,{debugImpressionLogged:c,debugImpressionStarted:p,slotIndex:this.props.slotIndex},o.a.createElement("div",{className:l()("pinWrapper",$&&"disableHover"),"data-test-id":"pinWrapper",onClick:this.onPinRepClick},an&&on&&o.a.createElement(s.c,{marginBottom:2},o.a.createElement(Oe,{hideTitle:!!on,pin:B,viewParameter:X,viewType:J})),He&&o.a.createElement(Ie,{pinDeeplinkUrls:Object(C.o)(ke),handleOneTapLogging:this.handleOneTapLogging,pinId:ke,sourceUrl:ft}),o.a.createElement(T.a,{name:"web_nux_one_tap_save",isEligible:Q.isAuth&&Object(Je.d)({user:Q,days:7})},(function(t){var n=t.anyEnabled;return o.a.createElement(ue,{boardActivity:fe,buyableProduct:me,componentType:e.getComponentType(),contextLogData:bt,denseViewSelected:f,description:ve,domain:Zt,dominantColor:_e,doneCount:gt,hideSaveButton:A,imageHeight:wt,imageSignature:Ae,images:Be,imageWidth:Ot,showReactions:on,isEligibleForWebCloseup:He,isEligibleForAnalyticsCloseup:e.isEligibleForAnalyticsCloseup(),inNewUserOneTapExperiment:n,onSave:e.handleSave,onToggleFlyout:e.handleToggleFlyout,pin:B,pinsBoardEditableByViewer:U,pinTitle:xt,requestContext:ae,saveOptions:Yt,searchOptions:H,selection:V,showButtons:!!(pt&&!R||ot),showCondensedInfo:j,showEditPinButton:yt,showPromoteButton:Ue,showRepinButton:!Ue&&!Qe,showSendButton:qt,slotIndex:Y,sourceUrl:ft,truncatePinHeight:q,viewer:Q,viewParameter:X,viewType:J,isFlyoutOpen:ot&&"save"!==st},o.a.createElement(T.a,{name:"ads_desktop_video_ads",isEligible:jt,activate:!1},(function(t){var n=t.anyEnabled;return!jt||!n&&Et?o.a.createElement(Te.a,{lowResOnly:D,highResOnly:L,onLoad:N,onError:M,pin:B,saved:!!z,animateGif:Vt}):o.a.createElement(Ne.a,{inAdsDesktopVideoExperiment:n,isExperimentalPinRep:!1,lowResOnly:D,highResOnly:L,onLoad:N,onError:M,pin:B,saved:!!z,onTimeChange:e.handleCurrentVideoCurrentTimeChanged,viewType:J,viewParameter:X,currentTimeFromPinRep:e.currentVideoCurrentTime})})))})),!!vt&&!j&&vt.length>=3&&o.a.createElement(xe,{chips:vt.slice(0,3)}),Gt&&o.a.createElement(s.c,{marginTop:2,marginBottom:3,width:"100%"},o.a.createElement(s.c,{width:228,margin:"auto"},o.a.createElement(ze.a,{onFlyoutDismiss:function(){return e.handleToggleFlyout(!ot&&"save"!==st)},onToggleFlyout:function(){return e.handleToggleFlyout(!ot&&"save"!==st)},pinId:B.id,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:ot&&"save"!==st,viewType:J}))),(!At||Jt)&&!j&&!Gt&&(Ut||ne||zt||Ht||ee||a||Dt||Wt||Jt)&&o.a.createElement(s.c,{display:"flex",direction:"row",marginTop:1},o.a.createElement(s.c,{paddingX:2,flex:"grow",width:"100%"},ne&&Kt&&o.a.createElement(De.a,{stats:ut(B),isVideo:jt,isStoryPin:!!B.story_pin_data_id,show90Days:ln}),a&&!Et&&o.a.createElement(s.c,{paddingY:1},o.a.createElement(s.K,{color:"darkGray",size:"xs"},h.a.getHumanizedTimesince(a))),Ut&&!Ft&&o.a.createElement(s.c,{"data-test-id":"pin-type",minHeight:Pt&&Ct?40:24},o.a.createElement(_.a,null,o.a.createElement(ct,{componentType:0,viewParameter:X,viewType:J,pinId:ke,pin:B,types:_t}))),o.a.createElement(s.c,{display:"flex",justifyContent:"between"},o.a.createElement(s.c,{column:12},!!B.story_pin_data_id&&o.a.createElement(s.c,{paddingY:1},o.a.createElement(Me.a,{icon:"story-pin",pinId:ke})),o.a.createElement(je,{buyableProduct:me,richSummary:et,showProductInfo:ee}),Dt&&kt.length>0&&o.a.createElement(s.c,{paddingY:1},o.a.createElement(s.K,{size:"sm",bold:!0},o.a.createElement(Pe.a,{text:kt,options:{hashtags:{appendText:kt,source:"hashtag_pinrep"}}}))),Mt&&xt.length>0&&o.a.createElement(Le.a,{title:xt,pinId:ke}),Lt&&Rt.length>0&&o.a.createElement(Ce,{description:Rt,pinId:ke}),Tt&&o.a.createElement(Fe,{richSummary:et}),o.a.createElement(Se,{feedbackType:Jt,hideAttribution:S,imageOnly:At,imageOnlyAttribution:le,isHovering:pt,isVideo:jt,onClickThrough:this.handleClickthroughLogging,onReactionReplyClick:this.handleReactionReplyClick,pin:B,showCredits:Z,showPinReactionsReply:te,sourceUrl:ft,viewParameter:X,viewType:J}))),Wt&&o.a.createElement(s.c,{paddingY:1},o.a.createElement("pre",null,be))),o.a.createElement(s.c,{display:"flex",direction:"column",alignItems:"center"},!P&&Jt&&o.a.createElement(s.c,{"data-test-id":"feedback-button",display:"flex",justifyContent:"end",position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:u.a.max}},width:24,height:24},o.a.createElement(_.a,null,o.a.createElement(it,{ad_match_reason:se,bestPinImgSrc:Bt,board:de,feedbackData:b&&b.data||{},feedbackType:Jt,hideDownload:jt,isHomefeedContextualMenuTooltip:cn,pinDescription:Rt,pinTitle:xt,pinId:ke,pinCategory:nt,pinImage:Be&&Be["236x"].url,pinner:qe,promoter:Xe,recommendationReason:Ze,reportPin:Object(m.a)({pin:B,viewParameter:X,viewType:J}),sourceInterest:tt,viewParameter:X,viewType:J})))))))),o.a.createElement(T.a,{name:"web_homefeed_control_panel_nag",activate:!1},(function(e){var t=e.anyEnabled;return o.a.createElement(T.a,{name:"web_homefeed_control_panel_pin_feedback"},(function(e){var n=e.anyEnabled;return!!$&&o.a.createElement(_.a,null,o.a.createElement(at,{feedbackText:g,feedbackType:Jt,pinId:ke,pinImage:Be&&Be["236x"].url,undoAction:oe,undoText:ie,isHomefeedControlPanelExp:t||n,showFeedbackOverlay:k}))}))})))}},{key:"canDelete",get:function(){return(this.props.pin.access||[]).includes("delete")}},{key:"isOwnPin",get:function(){return(this.props.pin.access||[]).includes("write")}}])&&et(n.prototype,r),i&&et(n,i),t}(o.a.Component));ot(st,"contextTypes",{unauthId:O.a.string.isRequired,userAgent:O.a.shape({platform:O.a.string.isRequired,platformVersion:O.a.arrayOf(O.a.number),raw:O.a.string.isRequired})}),ot(st,"defaultProps",{pinsBoardEditableByViewer:!1,showCondensedInfo:!1,truncatePinHeight:!0,showSavedInfo:!0});t.b=Object(V.compose)(Qe.withRouter,Xe.a,Object(Ve.a)(12),H.e,Object(i.connect)((function(e,t){var n,r=e.boards,o=e.experiences,i=e.pins,a=e.ui,c=e.viewer,l=t.pin,u=l.id,s=l.board,p=i[u],d=c.isAuth?c.boardCount:void 0,f=s&&s.id,m=r.content[f],y=m&&(m.access||[]).includes("write"),h=r.isSocialSeasonalBoard,b=void 0!==h&&h,g=c.isAuth&&(Object(Je.d)({user:c})||Object(Je.e)({user:c}))&&!c.isPartner;if(p){var v=p.carousel_data;n=v&&v.index}var w=o&&o.eligibleExperiences&&o.eligibleExperiences[1000116]&&501093===o.eligibleExperiences[1000116].experience_id,O=a.app?a.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}};return{isSocialSeasonalBoard:b,boardCount:d,carouselIndex:n,isHomefeedContextualMenuTooltipExperience:w,feedbackText:p&&p.feedbackText,hideSaveButton:p&&p.pinner&&p.pinner.blocked_by_me,isNewOrResurrectedNonPartner:g,isShareable:!m||"secret"!==m.privacy,pinsBoardEditableByViewer:y,savedInfo:p&&p.savedInfo,showFeedback:p&&p.showFeedback,showFeedbackOverlay:p&&p.showFeedbackOverlay,undoAction:p&&p.undoAction,undoText:p&&p.undoText,videosAutoplaying:O}}),(function(e,t){return{setCurrentVideo:function(t){return e(Object(qe.c)(t))}}})))(st)},Y2BC:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g}));var r=n("GyhR"),o=n("Ivf5"),i=n("jlBG"),a=n("E56J"),c=(n("hvnN"),n("YD1u")),l=n("7Iyi");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y="-end-";function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("function"==typeof e?e(t):e)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"function"==typeof e?e(t):e}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.key;function i(t){var r,o,i,l,u={},s={fetching:u,data:u},p={};function d(e,a,c){return e&&(r=e),a&&(o=a),c&&(i=c),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}({},r,m({dispatch:t},n,o),i)}return function(t,n){var o=t.resources,i=t.history,f=o.fetching,m=o.data,b=!(r&&Object(c.a)(r,n)),g=!(f===s.fetching&&m===s.data);if(!b&&!g&&l)return l;var v=h(e.options,n);if(b&&!g&&l)return d(n);var w=f[e.name]||u,O=s.fetching[e.name]||u,_=m[e.name]||u,E=s.data[e.name]||u;p[e.name]||(0===Object.keys(_).length?a.a.increment("webapp.withResource.no-cache",.05,{resource:e.name,cache_size:0,level:"warn",v:2,xFoundKeys:null,xExpectedKey:v}):v in _?a.a.increment("webapp.withResource.cache-hit",.05,{resource:e.name,cache_size:Object.keys(_).length,level:"success",v:2}):a.a.increment("webapp.withResource.populated-cache-miss",.05,{resource:e.name,cache_size:Object.keys(_).length,level:"error",v:2,xFoundKeys:JSON.stringify(Object.keys(_)),xExpectedKey:v})),p[e.name]=!0;var S=w!==O||_!==E||w[v]!==O[v]||_[v]!==E[v];if(!b&&!S&&l)return l;if(b&&!S&&l)return d(n);s={fetching:f,data:m};var P=_[v]||{},C=P.data,T=P.error,I=P.nextBookmark,j=P.isPrefetch,k=P.prefetchHasBeenRead,x=Boolean(w[v]),R=Boolean(_[v]);return d(n,{data:C,error:T,isAtEnd:R&&!x&&I===y,isFetching:x,isLoaded:R,nextBookmark:I,isPrefetch:j,prefetchHasBeenRead:k},{history:i})}}return function(a){var c=function(o){function i(){var n,r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var c=arguments.length,s=new Array(c),d=0;d<c;d++)s[d]=arguments[d];return o=this,a=(n=p(i)).call.apply(n,[this].concat(s)),r=!a||"object"!==u(a)&&"function"!=typeof a?f(o):a,m(f(f(r)),"state",{isRefreshing:!1}),m(f(f(r)),"optionsKey",h(e.options,r.props)),m(f(f(r)),"fetchDisabled",(function(e){return!!t.dangerouslyDisableFetch&&t.dangerouslyDisableFetch(e||r.props)})),m(f(f(r)),"loadData",(function(n){r.fetchDisabled(n)||n.dispatch(Object(l.a)(e.name,b(e.options,n),t.moduleRenderOptions,t.headers,t.traceLoggerHandlerName))})),m(f(f(r)),"fetchMore",(function(){var n=r.props.dispatch;r.fetchDisabled()||n(Object(l.d)(e.name,b(e.options,r.props),t.moduleRenderOptions,t.headers,t.traceLoggerHandlerName))})),m(f(f(r)),"refreshData",(function(){r.fetchDisabled()||(r.loadData(r.props),r.setState({isRefreshing:!0}))})),r}var c,y,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,o),c=i,(y=[{key:"UNSAFE_componentWillMount",value:function(){var r=this.props,o=r.dispatch,i=r.history,a=r[n];a.isLoaded&&t.enabledRouteRefresh&&i.current&&"POP"!==i.current.action&&!this.fetchDisabled()?this.setState({isRefreshing:!0}):a.isLoaded&&i.current&&"POP"!==i.current.action&&t.acceptPrefetch&&a.isPrefetch&&!a.prefetchHasBeenRead&&!this.fetchDisabled()&&o(Object(l.h)(e.name,b(e.options,this.props)))}},{key:"componentDidMount",value:function(){var e=this.props[n],r=this.state.isRefreshing;!1!==t.allowStale&&e.isLoaded&&!r||this.loadData(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var r=this.props[n],o=this.state.isRefreshing,i=h(e.options,t);i!==this.optionsKey&&(this.loadData(t),this.optionsKey=i),o&&r.data!==t[n].data&&this.setState({isRefreshing:!1})}},{key:"render",value:function(){var e=this.props[n],t=this.state.isRefreshing;return e.fetchMore=this.fetchMore,e.refreshData=this.refreshData,e.isRefreshing=t,r.createElement(a,this.props)}}])&&s(c.prototype,y),g&&s(c,g),i}(r.Component);return m(c,"WrappedComponent",a),m(c,"displayName","WithResource[".concat(e.name,"](").concat(a.displayName||a.name,")")),Object(o.connectAdvanced)(i)(c)}}},Yu3F:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n.n(r),i=n("ce8s"),a=n("1kao"),c=n("+U6O");function l(e){var t=e.accessibilityLabel,n=e.bgColor,r=e.hoverBgColor,l=e.children,u=e.onClick;return o.a.createElement(i.a,{accessibilityLabel:t,onClick:u,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"}},(function(e){var t=e.active,i=e.focused,u=e.hovered;return o.a.createElement(a.a,{active:t,bgColor:n,focused:i,hovered:u,hoverBgColor:r,shape:"pill"},o.a.createElement(c.c,{display:"flex",alignItems:"center",justifyContent:"center",padding:1},l))}))}},YvLn:function(e,t,n){},Zw0F:function(e,t,n){"use strict";var r=n("GyhR");function o(e){return e.startsWith("enabled")||e.startsWith("employee")}function i(e,t){var n=t.activate,i=void 0===n||n,a=t.activateExperiment,c=t.group,l=t.userIsEligible,u=void 0===l||l;Object(r.useEffect)((function(){i&&u&&a(e)}),[e,i,u]);var s=Object(r.useCallback)((function(){u&&a(e)}),[a,u,e]);return{group:u?c:"",anyEnabled:u&&o(c),customActivate:u&&!i?s:function(){}}}var a=n("2YES");function c(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(a.d)().experiments,r=i(e,{activate:!0,activateExperiment:function(e){n.v2ActivateExperiment(e)},group:n.v2GetGroup(e)||"",userIsEligible:t});return{group:r.group,anyEnabled:r.anyEnabled}}n.d(t,"a",(function(){return c}))},ZwJW:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("jCHc"),a=n("9SSN"),c=n("iJ35"),l=n("Evf7"),u=n.n(l),s=n("+U6O"),p={priceIndentifier:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"}};function d(e){var t=e.productPin,n=e.isTopRow,r=t.title,i=t.description,a=t.images["474x"],c=a.height,l=a.width,d=a.url,f=t.rich_summary,m=void 0===f?{}:f,y=u()(m,["products","0","offer_summary","price"]);return o.a.createElement(s.u,{wash:!0,height:n?217:168,width:n?236:117},o.a.createElement(s.p,{alt:r||i,fit:"cover",naturalHeight:c,naturalWidth:l,src:d}),y&&o.a.createElement(s.c,{margin:1,paddingY:1,paddingX:2,bottom:!0,left:!0,position:"absolute"},o.a.createElement(s.c,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:p.priceIndentifier}},y)))}var f=n("lixz"),m=n("Alt3"),y=n("NmcB");function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return w}));var v={container:{borderRadius:m.a,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}};function w(e){var t,n,l,u=e.dangerouslySetActionUrl,p=e.story,m=p.action,b=p.objects,w=p.story_type,O=p.subtitle,_=m.text,E=m.url,S=g(Object(r.useState)(!1),2),P=S[0],C=S[1],T=Object(r.useCallback)((function(){return C(!0)}),[C]),I=Object(r.useCallback)((function(){return C(!1)}),[C]),j=b[0].domain;["search_product_collage_story","shop_article_story"].includes(w)?(t=2,n=43):"shop_brand_story"===w?(t=1,n=92,l=j&&{commerce_data:JSON.stringify({domain:j})}):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(w)&&(t=72,n=3050),Object(r.useEffect)((function(){["search_product_collage_story","shop_article_story"].includes(w)&&Object(f.d)({name:"ShoppingSearchPivot"}),Object(y.a)(170,h({element:372,component:200,view:t,viewParameter:n,story_type:w},l||{}))}),[]);var k,x,R=O?5:3;if("shop_brand_story"===w){var A=m.user;k=A&&A.image_medium_url,x=A&&A.full_name}return o.a.createElement(c.b,{to:u||E,onClick:function(){return Object(y.a)(101,h({element:372,component:200,view:t,viewParameter:n,story_type:w},l||{}))}},o.a.createElement(s.c,{overflow:"hidden",position:"relative",onMouseEnter:T,onMouseLeave:I,dangerouslySetInlineStyle:{__style:v.container}},o.a.createElement(s.c,{overflow:"hidden"},o.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:v.content}},o.a.createElement(d,{productPin:b[0],isTopRow:!0})),o.a.createElement(s.c,{display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:v.content}},o.a.createElement(d,{productPin:b[1]}),o.a.createElement(d,{productPin:b[2]}))),o.a.createElement(s.c,{color:"lightGray",display:"flex",paddingX:3,alignItems:"center",justifyContent:"center",paddingY:R},o.a.createElement(s.c,{justifyContent:"center",alignContent:"start",display:"flex",direction:"column",margin:2},O?o.a.createElement(s.c,{marginBottom:1},o.a.createElement(s.K,{align:"justify",color:"gray",size:"md"},O.format)):null,o.a.createElement(s.K,{align:"justify",bold:!0,size:"xl"},_))),x&&k&&o.a.createElement(s.c,{position:"absolute",left:!0,top:!0,margin:3},o.a.createElement(s.a,{name:x,size:"lg",src:k,outline:!0})),o.a.createElement(a.a,{visibility:P?"visible":"none"},o.a.createElement(i.a,{additionalStyles:v.visualOverlay}))))}},ZyOe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dumpClassLists=function(){0};var r={},o={};t.add=function(e,t){return n=e.classList,i="html"==e.nodeName.toLowerCase()?r:o,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(i,e),n.add(e)}));var n,i},t.remove=function(e,t){return n=e.classList,i="html"==e.nodeName.toLowerCase()?r:o,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(i,e),0===i[e]&&n.remove(e)}));var n,i}},aaO7:function(e,t,n){"use strict";function r(e,t,n,r){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:n,undoText:r}}}function o(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function i(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function a(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function c(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c}))},bUMO:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n.n(r),i=n("Qo1m"),a=n("z/1d"),c=n("Irlq");function l(e){var t=e.m,n=e.h,r=e.rm,l=e.rh;return t&&(!n||l<=0)?Object(c.b)(i.a.ngettext("{{mins}} minute","{{mins}} minutes",r),{mins:o.a.createElement(a.a,{key:"recipe-minutes",maximumFractionDigits:2,value:r})}):n?Object(c.b)(i.a.ngettext("{{hrs}} hour","{{hrs}} hours",l),{hrs:o.a.createElement(a.a,{key:"recipe-hours",maximumFractionDigits:2,value:l})}):null}},bUcO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("GyhR"),a=m(i),c=m(n("Mr4W")),l=m(n("hvnN")),u=m(n("wndL")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("zJLp")),p=n("fGtH"),d=m(p),f=n("1Rck");function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=t.portalClassName="ReactModalPortal",b=t.bodyOpenClassName="ReactModal__Body--open",g=void 0!==c.default.createPortal,v=function(){return g?c.default.createPortal:c.default.unstable_renderSubtreeIntoContainer};function w(e){return e()}var O=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return n=o=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.removePortal=function(){!g&&c.default.unmountComponentAtNode(o.node),w(o.props.parentSelector).removeChild(o.node)},o.portalRef=function(e){o.portal=e},o.renderPortal=function(e){var n=v()(o,a.default.createElement(u.default,r({defaultStyles:t.defaultStyles},e)),o.node);o.portalRef(n)},y(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){p.canUseDOM&&(g||(this.node=document.createElement("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!g&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:w(e.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(p.canUseDOM){var r=this.props,o=r.isOpen,i=r.portalClassName;e.portalClassName!==i&&(this.node.className=i);var a=n.prevParent,c=n.nextParent;c!==a&&(a.removeChild(this.node),c.appendChild(this.node)),(e.isOpen||o)&&!g&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(p.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return p.canUseDOM&&g?(!this.node&&g&&(this.node=document.createElement("div")),v()(a.default.createElement(u.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){s.setElement(e)}}]),t}(i.Component);O.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.instanceOf(d.default),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func},O.defaultProps={isOpen:!1,portalClassName:h,bodyOpenClassName:b,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,parentSelector:function(){return document.body}},O.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,f.polyfill)(O),t.default=O},cNuv:function(e,t,n){"use strict";var r=n("GyhR");function o(e){var t=e.color,n=void 0===t?"#333":t,o=e.height,i=14*o/10;return r.createElement("svg",{width:i,height:o,viewBox:"3 3 18 18",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fill:n,d:"M20.571 8.573h-3.428V12h1.714v1.715h-1.714v3.428h-1.714V6.86h5.142v1.714zM12 17.144V6.86h1.714v10.285H12zm-1.714-8.571H5.143v6.857H8.57v-1.714H6.857V12h3.429v5.143H3.429V6.86h6.857v1.714zM5.143 3.43A5.143 5.143 0 0 0 0 8.573v6.857a5.143 5.143 0 0 0 5.143 5.143h13.714A5.143 5.143 0 0 0 24 15.43V8.573a5.143 5.143 0 0 0-5.143-5.143H5.143z"}))}var i=n("Qo1m"),a=n("L43L"),c=n("Y2BC"),l=n("+U6O"),u=20,s=12,p=1,d="M21,17.6119404 L21,9.15332448 C21,7.0136795 20.7772185,6.23779253 20.3588815,5.45557032 C19.9405445,4.67334809 19.3266519,4.05945552 18.5444297,3.64111848 C17.7622075,3.22278146 16.9863205,3 14.8466755,3 L6.3880595,3 C6.46224202,2.80834445 6.54669936,2.63211874 6.64111848,2.45557032 C7.05945552,1.67334809 7.67334809,1.05945552 8.45557032,0.64111848 C9.23779253,0.222781464 10.0136795,0 12.1533245,0 L17.8466755,0 C19.9863205,0 20.7622075,0.222781464 21.5444297,0.64111848 C22.3266519,1.05945552 22.9405445,1.67334809 23.3588815,2.45557032 C23.7772185,3.23779253 24,4.0136795 24,6.15332448 L24,11.8466755 C24,13.9863205 23.7772185,14.7622075 23.3588815,15.5444297 C22.9405445,16.3266519 22.3266519,16.9405445 21.5444297,17.3588815 C21.3678813,17.4533006 21.1916556,17.5377581 21,17.6119404 Z M6.15332448,6 L11.8466755,6 C13.9863205,6 14.7622075,6.22278146 15.5444297,6.64111848 C16.3266519,7.05945552 16.9405445,7.67334809 17.3588815,8.45557032 C17.7772185,9.23779253 18,10.0136795 18,12.1533245 L18,17.8466755 C18,19.9863204 17.7772185,20.7622075 17.3588815,21.5444297 C16.9405445,22.3266518 16.3266519,22.9405445 15.5444297,23.3588815 C14.7622075,23.7772186 13.9863205,24 11.8466755,24 L6.15332448,24 C4.0136795,24 3.23779253,23.7772186 2.45557032,23.3588815 C1.67334809,22.9405445 1.05945551,22.3266518 0.64111849,21.5444297 C0.222781467,20.7622075 0,19.9863204 0,17.8466755 L0,12.1533245 C0,10.0136795 0.222781467,9.23779253 0.64111849,8.45557032 C1.05945551,7.67334809 1.67334809,7.05945552 2.45557032,6.64111848 C3.23779253,6.22278146 4.0136795,6 6.15332448,6 Z";var f=Object(c.b)({name:"PinResource",key:"detailedPin",options:function(e){return{id:e.pinId,field_set_key:"detailed"}}})((function(e){var t=e.detailedPin.data,n=t?t.story_pin_data.page_count:null;return r.createElement(l.c,{display:"flex",alignItems:"center",height:u},r.createElement(l.n,{dangerouslySetSvgPath:{__path:d},accessibilityLabel:i.a._("Story Pin Icon","Icon indicating this Pin is a story"),size:s,color:"darkGray"}),n&&r.createElement(l.c,{marginLeft:p},r.createElement(l.K,{inline:!0,size:"xs",bold:!0},n)))}));n.d(t,"a",(function(){return h}));var m={__path:"M6 5h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm8 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1z"},y=function(e){switch(e){case"arrow-up-right":return i.a._("Promoted Pin","Icon indicating this Pin is promoted");case"play":return i.a._("Video Pin","Icon indicating this Pin is a video");case"gif":return i.a._("GIF Pin","Icon indicating this Pin is a GIF");case"tag":return i.a._("Product Pin","Icon indicating this Pin is a product");case"star":return i.a._("Recipe Pin","Icon indicating this Pin is a recipe");case"story-pin":return i.a._("Story Pin","Icon indicating this Pin is a story");case"collage":return i.a._("Collage Pin","Icon indicating this Pin is a collage");default:return""}};function h(e){var t,n=e.max_rating,i=e.icon,c=e.text,u=e.rating,s=e.pinId;if(i)switch(i){case"star":t=r.createElement(a.a,{rating:u||"",max_rating:n,width:10});break;case"gif":t=r.createElement(o,{height:10,color:"#333"});break;case"story-pin":t=r.createElement(f,{pinId:s});break;default:var p={accessibilityLabel:y(i),color:"darkGray",size:10,inline:!0};t=r.createElement(l.c,{display:"flex",alignItems:"center",marginRight:1},"collage"===i?r.createElement(l.n,Object.assign({dangerouslySetSvgPath:m},p)):r.createElement(l.n,Object.assign({icon:i},p)))}return r.createElement(l.c,{display:"flex",alignItems:"center"},t,c&&r.createElement(l.c,{marginLeft:1},r.createElement(l.K,{inline:!0,size:"sm"},c.trim().substring(0,25))))}},ce8s:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("CtGn");t.a=function(e){var t=e.accessibilityLabel,n=e.children,r=e.className,a=e.dataTestId,c=e.onClick,l=e.style;return o.a.createElement(i.a,null,(function(e){var i=e.active,u=e.focused,s=e.hovered,p=e.onBlur,d=e.onFocus,f=e.onMouseDown,m=e.onMouseEnter,y=e.onMouseLeave,h=e.onMouseUp;return o.a.createElement("button",{"data-test-id":a,"aria-label":t,style:l,onBlur:p,onFocus:d,onMouseDown:f,onMouseEnter:m,onMouseLeave:y,onMouseUp:h,onClick:c,className:r},n({active:i,focused:u,hovered:s}))}))}},ckdM:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n.n(r),i=n("V+Hv");function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=e.children,n=e.className,r=e.forwardRef,c=e.position,l=e.style,u=void 0===l?{}:l,s=Object(i.b)();return o.a.createElement("div",{className:n,ref:r,style:a({top:s},c?{position:c}:{},u)},t)}},dmID:function(e,t,n){"use strict";n.r(t);var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("4gpq"),c=n("cNuv"),l=n("lglE"),u=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};var s=n("/Mjl"),p=n("+U6O"),d=n("kR61");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"getEligiblePinTypes",(function(){return m})),n.d(t,"PinType",(function(){return y}));var m=function(e){return e.reduce((function(e,t){var n,r="story-pin"===t?"StoryPin":(n=t,u(Object(l.a)(n)));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},e,f({},"is".concat(r),!0))}),{isCarousel:!1,isEmbeddedVideo:!1,isGif:!1,isOneTap:!1,isProduct:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1})},y=function(e){var t=e.pin,n=e.pinId,r=e.types,i=t.promoter,l=m(r),u=l.isStoryPin,f=l.isOneTap,y=l.isCarousel,h=l.isEmbeddedVideo,b=l.isRecipe,g=l.isProduct,v=l.isGif;return f?y?o.a.createElement(p.c,{paddingY:1},o.a.createElement(p.c,{position:"relative",marginBottom:2,marginLeft:2,dangerouslySetInlineStyle:{__style:{zIndex:s.a.max}}},o.a.createElement(a.a,{pinId:n,variant:"legacy"})),o.a.createElement(c.a,{text:(i||{}).full_name,icon:"arrow-up-right"})):o.a.createElement(p.c,{paddingY:1},o.a.createElement(c.a,{text:(i||{}).full_name,icon:"arrow-up-right"})):y?o.a.createElement(a.a,{pinId:n,variant:"legacy"}):v?o.a.createElement(p.c,{paddingY:1},o.a.createElement(c.a,{icon:"gif"})):h?o.a.createElement(p.c,{paddingY:1},o.a.createElement(c.a,{icon:"play"})):g?o.a.createElement(p.c,{paddingY:1},o.a.createElement(c.a,{text:Object(d.b)(t),icon:"tag"})):b?t.rich_summary&&t.rich_summary.aggregate_rating&&t.rich_summary.aggregate_rating.review_count?o.a.createElement(p.c,{paddingY:1},o.a.createElement(c.a,{text:t.rich_summary.aggregate_rating.review_count.toString(),icon:"star",rating:t.rich_summary&&t.rich_summary.aggregate_rating?t.rich_summary.aggregate_rating.rating_value:"",max_rating:t.rich_summary&&t.rich_summary.aggregate_rating?t.rich_summary.aggregate_rating.best_rating:""})):null:u?o.a.createElement(p.c,{paddingY:1},o.a.createElement(c.a,{icon:"story-pin"})):null};t.default=Object(i.connect)((function(e,t){var n=e.pins,r=t.pinId,o=t.pin;return{pin:n[r]||o}}))(y)},dsNV:function(e,t){e.exports={ReasonToChoose:{UNKNOWN:0,REPIN_BOARD:1,RECOMMENDED_CATEGORY:2,COOKIE_MONSTER:3,USER_ACTIVITY:4,FOLLOWED_INTEREST:5,RECENT_FOLLOWED_INTEREST:59,REALTIME_P2B:6,REALTIME_P2B_CLOSEUP:22,RECOMMENDED_INTEREST:7,VISUALLY_SIMILAR:8,CLICKTHROUGH:9,BOARD_FOLLOW:35,RECENT_FOLLOWED_BOARD:61,USER_FOLLOW:45,RECOMMENDED_COMMERCE:10,EVERYTHING_FEED:11,RECOMMENDED_LOCAL_PIN:12,LOCAL_REPIN_BOARD:13,SEARCH:46,P2P:14,PROMOTED_PIN:15,P2P_USER_COMMERCE:16,COMMERCE_EDUCATION:17,LANDING_PAGE_PINS:18,FOLLOWING_FEED:19,POPULAR_FEED:20,P2P_COMMERCE:21,P2P_DYNAMIC_GRID:23,LANDING_PAGE_INTEREST_PINS:24,FRESH_PIN_FROM_PIN:25,FRESH_PIN_FROM_INTEREST:26,FRESH_PIN_FROM_BOARD:27,SIFTER_VIDEO_FROM_INTEREST:39,SIFTER_PRODUCTS:57,SIFTER_DISTRIBUTION_A:50,SIFTER_DISTRIBUTION_B:51,SIFTER_DISTRIBUTION_C:52,SIFTER_DISTRIBUTION_D:53,SIFTER_DISTRIBUTION_E:54,SIFTER_ACTIVATION_EXPERIMENT:58,SIFTER_FRESHMAKER_PIN_FROM_INTEREST:40,P2P_CLICKTHROUGH:28,P2P_CLOSEUP:29,P2P_LIKE:30,P2P_PIN_CREATE:31,LOCAL_CLICKTHROUGH:32,LOCAL_USER_ACTIVITY:33,INSTANT_PFY:34,INSTANT_PFY_NON_MATERIALIZABLE:36,DYNAMIC_INSERTION:37,DYNAMIC_INSERTION_BOARD_FOLLOW:38,HYPERLOCAL_INTEREST_BOARD:41,NUX_BOARD_FOLLOW_P2P:42,INDIRECT_DOMAIN_PIN:43,PIXIE_PINS_FOR_BOARD:44,FRESH_REPIN_BOARD:47,FRESH_CLICKTHROUGH:48,FRESH_USER_ACTIVITY:49,SCREENSHOT_SAVE:55,TEXT_EMBEDDINGS:56,FRESH_TEXT_EMBEDDINGS:67,PREFETCH_LOAD:60,DIVERSE_TOPICS:62,QUIZ_RESULTS:63,INTENTIONAL_DISTRIBUTION_TOPICS:64,INTENTIONAL_DISTRIBUTION_TOPICS_THIRD_PARTY:90,INTENTIONAL_DISTRIBUTION_TOPICS_STORY_PINS:91,INTENTIONAL_DISTRIBUTION_TOPICS_VIDEO:98,INTENTIONAL_DISTRIBUTION_GEMINI:73,INTENTIONAL_DISTRIBUTION_GEMINI_V5:120,INTENTIONAL_DISTRIBUTION_SHOP_STYLE_STL:74,INTENTIONAL_DISTRIBUTION_GRAPHSAGE:78,INTENTIONAL_DISTRIBUTION_REPIN_BOARD:80,INTENTIONAL_DISTRIBUTION_CLICKTHROUGH:81,INTENTIONAL_DISTRIBUTION_USER_ACTIVITY:82,INTENTIONAL_DISTRIBUTION_DOMAIN:86,INTENTIONAL_DISTRIBUTION_CREATOR_BASELINE:92,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_VIDEO:95,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN:100,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS:102,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_STORY_PIN:103,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_DIVERSITY:105,RECOMMENDED_TOPICS:65,PIXIE_RECENT_ACTION:66,NATIVE_CONTENT_TOPICS:68,BUBBLE_OPEN_TOPICS:69,TOPIC_BEST_PINS:70,DARK_PROMOTED_PIN:71,POST_EXPLORE_TOPICS:72,GRAPHSAGE_EMBEDDINGS:75,DEMOGRAPHIC_PFY:76,TOPIC_BEST_PINS_V2:77,DAILY_BEST_PINS:79,SHOPPING_STL:83,UNAUTH_PIXIE_P2B:84,UNAUTH_PIXIE_P2P:85,VIDEO_EMBEDDINGS:87,VIDEO_EMBEDDINGS_GEMINI_V5:121,NAVBOOST_P2P:88,NAVBOOST_PFY:89,GEMINI_V5_EMBEDDINGS_STATIC:93,GEMINI_V5_EMBEDDINGS_FRESH:94,GEMINI_V5_EMBEDDINGS_REALTIME:106,GEMINI_V5_EMBEDDINGS_STORYPIN:107,CURATED_VIDEO_INTEREST:96,GRAPHSAGE_PRODUCT_PINS:97,GRAPHSAGE_PRODUCT_PINS_LONGER_HISTORY:112,NUX_GRAPHSAGE:99,TOPIC_BEST_PINS_V3:101,GEMINI_INTERESTS_FRESH:104,GRAPHSAGE_USER_EMBEDDINGS_TO_PINS:108,GRAPHSAGE_USER_EMBEDDINGS_TO_ORGANIC_PINS:109,GRAPHSAGE_USER_EMBEDDINGS_TO_PRODUCT_PINS:110,LENS_CAMERA_VISUALLY_SIMILAR:111,GRAPHSAGE_VIDEO_PINS:113,RECBOOST_REPIN_BOARD:114,RECBOOST_CLICKTHROUGH:115,RECBOOST_USER_ACTIVITY:116,RECOMMENDED_BOARDS:117,RECOMMENDED_CREATOR_BOARDS:124,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGEED_INTERESTS_VIDEO:118,INTENTIONAL_DISTRIBUTION_MANUAL_INTERESTS_VIDEO:119,REPIN_CREATOR_BOARD:122,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS:123,FRESH_SIG_FROM_BOARD:125,RTC_IMPROVEMENT_TEST_1:501,RTC_IMPROVEMENT_TEST_2:502,RTC_IMPROVEMENT_TEST_3:503,RTC_IMPROVEMENT_TEST_4:504,RTC_IMPROVEMENT_TEST_5:505,RTC_IMPROVEMENT_TEST_6:506,RTC_IMPROVEMENT_TEST_7:507,RTC_IMPROVEMENT_TEST_8:508,RTC_IMPROVEMENT_TEST_9:509,RTC_IMPROVEMENT_TEST_10:510,RTC_IMPROVEMENT_TEST_11:511,RTC_IMPROVEMENT_TEST_12:512,RTC_IMPROVEMENT_TEST_13:513,RTC_IMPROVEMENT_TEST_14:514,RTC_IMPROVEMENT_TEST_15:515}}},e5Rh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("bUcO"),i=(r=o)&&r.__esModule?r:{default:r};t.default=i.default,e.exports=t.default},exzK:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("oko/"),c=n("A/dm"),l=n("Qo1m"),u=n("kR61"),s=n("NmcB"),p=n("+U6O");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},m=function(e,t,n,r,o,i,a,c,l,p){if(!p||!o){var f=o.carousel_slots,m=o.id;Object(s.a)(108,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({},l,{objectId:t,component:c,view:a,viewParameter:i,eventData:{pinCarouselSlotEventData:{carouselSlotId:f[n]&&Number(f[n].id),carouselDataId:Number(m),carouselSlotIndex:n,toCarouselSlotIndex:r}}},Object(u.a)(e)||{}))}},y=function(e,t,n,r,o,i){i||void 0===r||(e.preventDefault(),e.stopPropagation(),r(t,n)),void 0!==o&&o(n)};t.a=Object(i.connect)((function(e,t){var n=e.pins,r=t.carouselData,o=n[t.pinId];return{pin:o,carouselData:r||Object(c.a)(o)}}),(function(e){return{changeCarouselSlotIndex:function(t,n){return e(Object(a.a)(t,n))}}}))((function(e){var t=e.carouselIndex,n=e.carouselData,r=e.changeCarouselSlotIndex,i=e.handleCarouselSwipe,a=e.pin,c=e.pinId,u=e.contextLogData,s=e.viewParameter,d=e.viewType,h=e.componentType,b=e.isEditMode;if(!n)return null;var g=n.carousel_slots,v=n.index,w=void 0!==t?t:v,O=Math.max(0,w-1),_=Math.min(g.length-1,w+1);return o.a.createElement(p.c,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},o.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:function(e){y(e,c,O,r,i,b),m(a,c,w,O,n,s,d,h,u,b)},onKeyUp:function(e){y(e,c,O,r,i,b),m(a,c,w,O,n,s,d,h,u,b)},style:f.slider},w>0&&o.a.createElement(p.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(p.n,{color:"white",icon:"arrow-back",accessibilityLabel:l.a._("View Previous","Button to advance carousel to the previous image")}))),o.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:function(e){y(e,c,_,r,i,b),m(a,c,w,_,n,s,d,h,u,b)},onKeyUp:function(e){y(e,c,_,r,i,b),m(a,c,w,_,n,s,d,h,u,b)},style:f.slider},w<g.length-1&&o.a.createElement(p.c,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(p.n,{color:"white",icon:"arrow-forward",accessibilityLabel:l.a._("View Next","Button to advance carousel to the next image")}))))}))},fGtH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=void 0;var r,o=n("5C2A");var i=((r=o)&&r.__esModule?r:{default:r}).default,a=i.canUseDOM?window.HTMLElement:{};t.canUseDOM=i.canUseDOM;t.default=a},fxqt:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("GyhR"),o=n.n(r),i=n("1ZRU"),a=n("2YES");function c(e){var t=e.activate,n=e.children,r=e.isEligible,c=e.name;return o.a.createElement(a.a,null,(function(e){return o.a.createElement(i.a,{activate:t,activateExperiment:function(t){return e.experiments.v2ActivateExperiment(t)||""},group:e.experiments.v2GetGroup(c)||"",isEligible:r,name:c},n)}))}},gski:function(e,t,n){"use strict";var r=function(){};e.exports=r},hCBh:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n("rQW8"),o=28;function i(e){var t={},n=e.trim();n.length>0&&(t.full_name=n);var r=n.split(/ (.+)/);return""===r[0]&&r.shift(),r.length>0&&(t.first_name=r[0]||""),r.length>1&&(t.last_name=r[1]||""),t}function a(e){var t=e.user,n=e.days,i=void 0===n?o:n;if(!t||!t.createdAt)return!1;var a=new Date(t.createdAt),c=Object(r.i)(-i,a),l=new Date;return!Object(r.h)(l,c)}function c(e){var t=e.user,n=e.days,i=void 0===n?o:n;if(!t.resurrectionInfo)return!1;var a=t.resurrectionInfo.resurrectionDate,c=new Date,l=a?new Date(a):c,u=Object(r.d)(l,i);return Object(r.h)(u,c)}function l(e){return a(e)||c(e)&&!e.user.isPartner}function u(e){return e&&e[1000069]&&500417===e[1000069].experience_id}},iEzj:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("GyhR"),o=n.n(r),i=n("HvLx"),a=n("+7cn"),c=n("dsfX"),l=n("dMYx"),u=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(e,n){var r,c,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c=this,u=p(t).call(this,e,n),r=!u||"object"!==s(u)&&"function"!=typeof u?y(c):u,h(y(y(r)),"handleDismiss",(function(){(0,r.props.onFlyoutDismiss)()})),h(y(y(r)),"handleClick",Object(i.a)((function(e){e&&e.stopPropagation&&e.stopPropagation(),r.toggle()}))),h(y(y(r)),"flyoutProps",(function(e){var t=r.props,n=t.gridDescription,i=t.imageSrc,c=t.pinId,u=t.userId,s=t.board,p=t.sendType,d=t.fullName,f=t.profileUrl,m=t.viewParameter,y=t.viewType,h=t.onClick,b=void 0===h?function(){}:h,g=t.onExternalSend,v={description:n,id:c,imageUrl:i,name:"",type:l.a.PIN,url:"/pin/".concat(c,"/")},w=l.a.PIN;switch(p){case"user":v={description:n,id:u,imageUrl:i,name:d,type:l.a.PINNER,url:f},w=l.a.USER;break;case"board":v=s&&{description:s.description,id:s.id,imageUrl:s.imageUrl,name:s.name,type:l.a.BOARD,url:s.url},w=l.a.BOARD}return{anchor:r.flyoutAnchor,idealDirection:"down",onDismiss:r.handleDismiss,size:e,children:o.a.createElement(a.a,{classNames:"SendPin",isFlyout:!0,onHide:function(){b(),r.handleDismiss()},onExternalSend:g,sendType:w,sharedObject:v,viewParameter:m,viewType:y})}})),r.flyoutAnchor=void 0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),f(t,null,[{key:"makeSendShareButton",value:function(e){var t=this;return function(n){return o.a.createElement(t,Object.assign({ref:n.shareButtonRef,Subject:e},n))}}}]),f(t,[{key:"toggle",value:function(){(0,this.props.onToggleFlyout)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.Subject,r=t.inModal,i=t.isFlyoutOpen,a=t.shownWithinMasonry;return o.a.createElement("div",null,o.a.createElement("div",{ref:function(t){t&&(e.flyoutAnchor=t)}},o.a.createElement(n,Object.assign({handleSendShareFlyoutButtonClick:this.handleClick},this.props))),i&&(a?o.a.createElement(u.r,null,o.a.createElement(u.c,{dangerouslySetInlineStyle:r?{__style:{zIndex:c.a,position:"absolute"}}:void 0},o.a.createElement(u.k,Object.assign({},this.flyoutProps("lg"),{positionRelativeToAnchor:!1})))):o.a.createElement(u.k,this.flyoutProps("lg"))))}}]),t}(r.Component)},jCHc:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("GyhR"),o=n.n(r),i=n("+U6O");function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=e.children,n=e.additionalStyles,r=void 0===n?{}:n;return o.a.createElement(i.c,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:a({pointerEvents:"none"},r)}},t)}},jSHg:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},k3nM:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("HW6o"),c=n("Qo1m"),l=n("EQo2"),u=n("+U6O"),s={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},p={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},d={overlay:{__style:{backgroundColor:"#000",opacity:.8}}};function f(e){var t=e.backgroundImage,n=e.naturalHeight,r=e.naturalWidth,i=e.onRestartVideo,a=e.pinTitle;e.pin;return o.a.createElement(u.p,{alt:a||c.a._("pin image","image of a pin"),naturalHeight:n,naturalWidth:r,src:t},o.a.createElement(u.c,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:d.overlay}),o.a.createElement(u.c,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%"},o.a.createElement(u.P,{shape:"rounded"},o.a.createElement(u.c,{display:"flex",justifyContent:"center",padding:2},o.a.createElement(u.n,{accessibilityLabel:c.a._("Visit site","Button when pressed goes to pin's website"),color:"white",dangerouslySetSvgPath:p,size:25}),o.a.createElement(u.c,{margin:1}),o.a.createElement(u.K,{bold:!0,color:"white",size:"lg",truncate:!0},c.a._("Visit site","Button when pressed goes to pin's website")))),o.a.createElement(u.c,{margin:3}),o.a.createElement(u.P,{shape:"rounded",onTouch:i},o.a.createElement(u.c,{display:"flex",justifyContent:"center",padding:2},o.a.createElement(u.n,{accessibilityLabel:c.a._("Watch again","Button when pressed restarts the video"),color:"white",dangerouslySetSvgPath:s,size:25}),o.a.createElement(u.c,{margin:1}),o.a.createElement(u.K,{bold:!0,color:"white",size:"lg",truncate:!0},c.a._("Watch again","Button when pressed restarts the video"))))))}var m=n("XHfN"),y=n("zBQm"),h=n("3BJc");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=Object(i.connect)(void 0,(function(e,t){return{setCurrentVideo:function(t){return e(Object(h.c)(t))}}}))((function(e){var t=e.inAdsDesktopVideoExperiment,n=e.isAutoplay,i=e.currentTime,a=e.lowResOnly,s=e.highResOnly,p=e.onLoad,d=e.onError,h=e.saved,g=e.onTimeChange,v=e.isExperimentalPinRep,w=e.pin,O=e.playing,_=e.setCurrentVideo,E=e.viewType,S=e.viewParameter,P=b(Object(r.useState)(!1),2),C=P[0],T=P[1],I=b(Object(r.useState)(!0),2),j=I[0],k=I[1],x=Object(y.g)(w),R=x&&!w.is_eligible_for_web_closeup,A=v&&x&&w.is_eligible_for_web_closeup,D=!x||R||!v,L=!O;t&&(L=j,n&&O&&j&&k(!1));var M=(w.images["236x"]||{}).url,N=w.id,B=w.is_promoted,U=Object(r.useCallback)((function(e){var t=e.event;t.preventDefault(),t.stopPropagation(),_({pinId:N,isPromoted:B,currentTime:0}),T(!1)}),[]),F=Object(r.useCallback)((function(){T(A)}),[A]);if(!w.videos||!w.videos.video_list.V_HLSV4)return null;var z=w.videos.video_list.V_HLSV4||{},H=z.height,G=z.thumbnail,V=z.width,W=z.url,K=w.videos.id,Y=[{type:"video/m3u8",src:W}];return C?o.a.createElement(u.c,null,o.a.createElement(f,{backgroundImage:M,naturalHeight:H,naturalWidth:V,pin:w,onRestartVideo:U})):L?o.a.createElement(u.c,null,o.a.createElement(l.a,{lowResOnly:a,highResOnly:s,onLoad:p,onError:d,pin:w,saved:h})):o.a.createElement(u.c,null,o.a.createElement(m.a,{contextLogData:{component:0,view:E,viewParameter:S,objectId:w.id,video_id:K},accessibilityMaximizeLabel:c.a._("Maximize","Maximize button on video"),accessibilityMinimizeLabel:c.a._("Minimize","Minimize button on video"),accessibilityMuteLabel:c.a._("Mute","Mute button on video"),accessibilityPauseLabel:c.a._("Pause","Pause button on video"),accessibilityPlayLabel:c.a._("Play","Play button on video"),accessibilityUnmuteLabel:c.a._("Unmute","Unmute button on video"),aspectRatio:V/H,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:i||-1},loop:D,onTimeChange:g,playing:O,poster:M||G,src:Y,videoStartTime:i,volume:0,onEnded:F}))}));function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=Object(a.a)(g),C=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=O(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==v(o)&&"function"!=typeof o?E(r):o,S(E(E(n)),"handleVisibilityChanged",(function(e){var t=n.props,r=t.currentTimeFromPinRep,o=t.pin,i=t.setCurrentVideo,a=t.pauseAutoplay,c=t.videosAutoplaying,l=o.id,u=o.is_promoted,s=Object(y.c)(l,c),p=Object(y.j)(l,c),d=Object(y.a)(l,c);e?u?i({pinId:l,isPromoted:u,currentTime:s||r||n.currentVideoCurrentTime}):d&&i({pinId:l,isPromoted:u,currentTime:s||r||n.currentVideoCurrentTime}):!e&&p&&a({pinId:l,isPromoted:u,currentTime:r||n.currentVideoCurrentTime})})),S(E(E(n)),"handleVideoTimeChange",(function(e){var t=n.props,r=t.pin,o=t.onTimeChange,i=t.videosAutoplaying,a=r.id;Object(y.j)(a,i)&&(n.currentVideoCurrentTime=e.time),o&&o(e)})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.onLoad&&this.props.onLoad()}},{key:"componentDidUpdate",value:function(e){var t=e.appInFocus,n=this.props,r=n.appInFocus,o=n.currentTimeFromPinRep,i=n.pauseAutoplay,a=n.pin,c=n.setCurrentVideo,l=n.videosAutoplaying,u=a.id,s=a.is_promoted,p=Object(y.j)(u,l),d=Object(y.c)(u,l);r!==t&&!r&&p?(this.pausedDueToBrowserOutOfFocus=!0,i({pinId:u,isPromoted:s,currentTime:o||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&r&&(this.pausedDueToBrowserOutOfFocus=!1,c({pinId:u,isPromoted:s,currentTime:d||o||this.currentVideoCurrentTime}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.currentTimeFromPinRep,n=e.pauseAutoplay,r=e.pin,o=e.videosAutoplaying,i=r.id,a=r.is_promoted;Object(y.j)(i,o)&&n({pinId:i,isPromoted:a,currentTime:t||this.currentVideoCurrentTime})}},{key:"render",value:function(){var e=this.props,t=e.isAutoplay,n=e.pin,r=e.videosAutoplaying,i=e.viewParameter,a=e.viewType,c=e.highResOnly,l=e.lowResOnly,u=e.onError,s=e.onLoad,p=e.saved,d=e.inAdsDesktopVideoExperiment,f=e.isExperimentalPinRep,m=n.id,h=Object(y.c)(m,r),b=Object(y.j)(m,r)&&t;return o.a.createElement(P,{currentTime:h,inAdsDesktopVideoExperiment:d,isAutoplay:t,viewParameter:i,viewType:a,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:n,playing:b,trackFullVisible:!1,highResOnly:c,lowResOnly:l,onError:u,onLoad:s,saved:p,isExperimentalPinRep:f})}}])&&w(n.prototype,r),i&&w(n,i),t}(o.a.Component);t.a=Object(i.connect)((function(e,t){return{appInFocus:e.ui.app.appInFocus,isAutoplay:e.ui.app.isAutoplay,videosAutoplaying:e.ui.app?e.ui.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}}}}),(function(e,t){return{pauseAutoplay:function(t){return e(Object(h.a)(t))},setCurrentVideo:function(t){return e(Object(h.c)(t))}}}))(C)},kIql:function(e,t,n){"use strict";var r=n("Ivf5");t.a=Object(r.connect)((function(e){return{viewer:e.viewer}}))},kR61:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n("Evf7"),o=n.n(r);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){return!!e&&(e.shopping_flags||[]).includes(2)},l=function(e){var t=o()(e,"link_domain.official_user.full_name");if(t)return t;var n=o()(e,"rich_summary.site_name");if(n)return n;if(e.domain)return"Uploaded by user"===e.domain?((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name:e.domain;var r=o()(e,"via_pinner.full_name");return e.is_repin&&r?r:void 0},u=function(e){if(e){var t=e.shopping_flags||[];return!t.includes(10)&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images&&t.push(10),t}return[]},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=u(e),r=i({},t.commerce_data);n.includes(2)&&(r.pin_is_shop_the_look=!0),n.includes(1)&&(r.is_available=!0),n.includes(5)&&(r.is_product_pin_v2=!0),n.includes(6)&&(r.is_rich_product_pin=!0),n.includes(10)&&(r.is_organic_product_carousel=!0);var o=JSON.stringify(r);if("{}"!==o)return{commerce_data:o}}return null}},m2OL:function(e,t,n){"use strict";var r=n("ptua"),o=n("rUah"),i=n("zBQm");t.a=function(e){var t,n=e.pin,a=e.viewParameter,c=e.viewType,l=n.id,u=n.videos,s=Object(i.f)(n),p=Object(i.g)(n);if(Object(i.i)(u)&&u){var d=u.video_list,f=d[Object.keys(d)[0]];t=f&&f.duration}return function(){r.a.instance.dispatch(Object(o.b)({id:l,isProduct:s,isPromoted:p,videoDuration:t,viewParameter:a,viewType:c,type:"pin"}))}}},mcMS:function(e,t,n){"use strict";function r(e){var t=e.m,n=void 0===t?0:t,r=e.h,o=void 0===r?0:r;return{m:n,h:o,rm:o>0?0:n,rh:o<=0?o:n>45?o+1:n>15?o+.5:o}}function o(e){var t=Math.floor(e/3600);return r({m:Math.floor(e%3600/60),h:t})}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},mnfC:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=(n("YvLn"),n("PNko")),a=n.n(i),c=n("Qo1m"),l=n("iJ35"),u=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y={color:"white",size:"xl"},h=function(e){function t(){var e,n,r,o,i,a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];return r=this,n=!(o=(e=d(t)).call.apply(e,[this].concat(u)))||"object"!==s(o)&&"function"!=typeof o?m(r):o,i=m(m(n)),c={showBoardName:!1},(a="state")in i?Object.defineProperty(i,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[a]=c,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout((function(){e.setState({showBoardName:!0})}),950)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e,t,n=this.state.showBoardName,r=this.props,i=r.isNewlySaved,s=r.name,p=r.url;if(i&&!n)e=o.a.createElement(u.K,y,c.a._("Saved!","Indication that a pin has been saved"));else{var d=o.a.createElement(u.K,Object.assign({},y,{bold:!0,truncate:!0}),s);e=p?o.a.createElement(l.b,{to:p},d):d}return i&&(t=n?"board":"saved"),o.a.createElement("div",{"data-test-id":"savedInfo",className:a()("SavedAnimation",t)},e)}}])&&p(n.prototype,r),i&&p(n,i),t}(o.a.Component);t.a=h},mzhd:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("UmN8"),a=n("Ivf5"),c=n("XwKk");function l(e){var t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}var u=n("CwDa"),s=n("E/Qu"),p=n("iJ35"),d=n("s3m5"),f=n("jSHg"),m=n("+U6O"),y={overlay:{__style:{backgroundColor:"#000",opacity:.4}}};function h(e){var t=e.pin,n=t.id,r=t.images,i=t.title,a=t.videos,c=t.video_status_message||{},l=r&&r["236x"],u=(a&&a.video_list[f.a.V_HLSV4]||{}).duration;return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.e,null,o.a.createElement(p.b,{to:"/pin/".concat(n)},o.a.createElement(m.c,{overflow:"hidden",position:"relative",shape:"rounded"},l&&o.a.createElement(m.p,{alt:i||"",color:"lightGray",naturalHeight:l.height,naturalWidth:l.width,src:l.url}),!!u&&o.a.createElement(m.c,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},o.a.createElement(d.a,{duration:u})),o.a.createElement(m.c,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:y.overlay}),o.a.createElement(m.c,{position:"absolute",top:!0,left:!0,padding:5,width:"100%"},o.a.createElement(m.K,{bold:!0,color:"white",size:"xl",overflow:"normal"},c.title),o.a.createElement(m.c,{marginTop:4},o.a.createElement(m.K,{color:"white",size:"sm",overflow:"normal"},c.subtitle)))),o.a.createElement(m.c,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1},o.a.createElement(m.c,{flex:"grow"},i&&o.a.createElement(m.c,{paddingY:1},o.a.createElement(m.K,{bold:!0,inline:!0,size:"sm"},i)))))))}var b=n("zBQm"),g=n("6wLB");function v(e){var t=e.inChangeTitlesExp,n=e.isGroupBoard,r=e.pin,o=e.surface,i=r.buyable_product,a=r.carousel_data,c=r.grid_title,l=r.rich_summary,u=r.title;if(t)return"BaseBoardPinGrid"===o?"":c||"";if(Object(g.a)(r).isOwnPin&&!n&&!a&&"UserProfilePinGrid"!==o)return"";if(a){var s=a.carousel_slots,p=void 0===s?[]:s,d=a.index;if(p[d]&&p[d].title)return p[d].title.trim()}var f=l&&"mobile application"!==l.type_name&&l.display_name,m=i&&i.title;return u||f||m||c||""}var w=["EngagementDetails","UserProfilePinGrid"];var O=["CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","STLProductsFeed"];var _=n("A/dm"),E={BaseBoardPinGrid:"boardPinView",UserProfilePinGrid:"profilePinView"};var S=n("rSK6"),P=n("Qo1m"),C=n("Irlq");var T=n("/W2v"),I=n("CYxK");function j(e){return o.a.createElement("div",{"data-test-id":"pointer-events-wrapper",style:{pointerEvents:"auto"}},e)}var k=n("fifU"),x=n("yJaP"),R=n("q579");function A(e,t){var n=e.carousel_data,r=e.domain||"";return n&&n.id&&(r=function(e,t){var n=t||e&&e.index||0,r=e&&e.carousel_slots||[],o=r[n]&&r[n].link||"";return o&&R.a.parse(o).hostname||""}(n,t)),r.replace("www.","")}var D=n("/mke"),L=n("b7z0"),M=n("IaXd"),N=n("kR61");function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var z={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"18px",height:"32px",maxWidth:"132px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},containerTruncated:{maxWidth:"87px"},text:{color:"#333333"}};function H(e){var t=e.pin,n=e.sourceLinkStyle,i=e.url,a=F(Object(r.useState)(!1),2),c=a[0],l=a[1],u=t.id,s=A(t),d=Object(N.a)(t)||{},f=Object(x.b)().slotIndex,y=Object(M.a)(12,B({grid_index:f,objectId:u},Object(N.a)(t)||{})),h=Object(M.a)(101,B({element:162,objectId:u},Object(N.a)(t)||{}));return"icon-only"===n?o.a.createElement(p.b,{auxData:d,onClick:function(){y(),h()},pinId:u,to:i},o.a.createElement(D.a,{accessibilityLabel:P.a._("link","Website url link"),bgColor:"white",icon:"arrow-up-right",iconColor:"darkGray",iconSize:12,size:"sm"})):o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:B({},z.container,c?z.containerHovered:{},"truncated-text"===n?z.containerTruncated:{})},"data-test-id":"pinrep-source-link",onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},position:"relative"},o.a.createElement(p.b,{onClick:function(){y(),h()},pinId:u,to:i},o.a.createElement(m.c,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:z.text},display:"flex",justifyContent:"between"},o.a.createElement(m.c,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3},o.a.createElement(m.n,{accessibilityLabel:P.a._("link","Website url link"),color:"darkGray",icon:"arrow-up-right",size:9})),o.a.createElement(m.c,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden"},o.a.createElement(L.b,{color:"darkGray",size:"sm",weight:"semibold",truncate:!0},s)))))}var G=Object(r.lazy)((function(){return Promise.all([n.e(17),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"24KF"))})),V=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,"qE0g"))})),W=Object(r.lazy)((function(){return n.e("PinRepSendShareLinkButtonCommon").then(n.bind(null,"hm37"))}));var K=Object(r.memo)((function(e){var t=e.feedbackData,n=e.feedbackType,r=e.onToggleFlyout,i=(e.onToggleModal,e.pin),a=e.pinTitle,c=e.setForcePrimary,l=e.showEditButton,u=e.showOverflowMenu,s=e.showShareButton,p=e.sourceLinkStyle,d=e.useDenseGroupBoardLayout,f=Object(x.b)(),y=f.viewParameter,h=f.viewType,b=i.carousel_data,g=i.id,v=i.tracked_link,w=i.link,O=v||w||"",_=!!O&&j(o.a.createElement(H,{pin:i,url:O,sourceLinkStyle:p})),E=s&&o.a.createElement(k.a,null,o.a.createElement(m.c,{"data-test-id":"send-share-link"},j(o.a.createElement(W,{pin:i,setForcePrimary:c})))),S=l&&o.a.createElement(k.a,null,o.a.createElement(m.c,{"data-test-id":"edit-button"},j(o.a.createElement(G,{carouselSlotCurrentIndex:b&&b.index,component:0,onToggleModal:r,pinId:g,style:{size:"sm"},view:h,viewParameter:y,useLegoStyles:!0}))));return d?o.a.createElement(m.c,{display:"flex",justifyContent:"between",alignItems:"center",padding:3},o.a.createElement("div",{style:{flexBasis:32}},_),E,S):o.a.createElement(m.c,{alignItems:"center",display:"flex",padding:3},o.a.createElement(m.c,{flex:"shrink"},_),o.a.createElement(m.c,{alignItems:"center",display:"flex",flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}}},o.a.createElement(m.c,{paddingX:u||l?2:0},E),u&&o.a.createElement(k.a,null,o.a.createElement(m.c,{"data-test-id":"overflow-menu-button"},j(o.a.createElement(V,{feedbackData:t,feedbackType:n,pin:i,pinTitle:a,setForcePrimary:c})))),S))})),Y=n("oko/"),q=n("NmcB");function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){var t=e.direction,n=e.swipeHandler,r={left:P.a._("View Previous","Button to advance carousel to the previous image"),right:P.a._("View Next","Button to advance carousel to the next image")};return o.a.createElement(m.c,Object.assign({position:"absolute",bottom:!0,top:!0},Q({},t,!0)),o.a.createElement(m.P,{fullWidth:!0,fullHeight:!0,onTouch:n},o.a.createElement(m.c,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%"},o.a.createElement(m.n,{accessibilityLabel:r[t],color:"white",icon:{left:"arrow-back",right:"arrow-forward"}[t]}))))}var J=Object(a.connect)(null,(function(e){return{changeCarouselSlotIndex:function(t,n){return e(Object(Y.a)(t,n))}}}))((function(e){var t=e.pin,n=e.changeCarouselSlotIndex,r=Object(x.b)(),i=r.componentType,a=r.viewParameter,c=r.viewType,l=Object(_.a)(t);if(!l)return null;var u=t.id,s=void 0===u?"":u,p=l.carousel_slots,d=l.index,f=l.id,y=function(e,n){Object(q.a)(108,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q(e,t,n[t])}))}return e}({objectId:s,component:i,view:c,viewParameter:a,eventData:{pinCarouselSlotEventData:{carouselSlotId:p[e]&&Number(p[e].id),carouselDataId:Number(f),carouselSlotIndex:e,toCarouselSlotIndex:n}}},Object(N.a)(t)||{}))};function h(e){return function(){var t="left"===e?d-1:d+1;n(s,t),y(d,t)}}return o.a.createElement(m.c,{height:"100%",position:"relative",width:"100%"},d>0&&j(o.a.createElement(X,{direction:"left",swipeHandler:h("left")})),d<p.length-1&&j(o.a.createElement(X,{direction:"right",swipeHandler:h("right")})))})),Z=32;function $(e){var t=e.avatarUrl,n=e.attributionNameLink,r=e.name,i=void 0===r?"":r,a=o.a.createElement(m.c,{height:"".concat(Z,"px"),width:"".concat(Z,"px")},o.a.createElement(m.a,{name:i,src:t}));return n?o.a.createElement(p.b,{className:"underlineLink",to:n},a):a}function ee(e){var t=e.attributionNameLink,n=e.name,r=e.regularWeight,i=o.a.createElement(L.b,{size:"sm",truncate:!0,weight:r?"normal":"semibold"},n);return o.a.createElement(m.c,null,t?o.a.createElement(p.b,{className:"underlineLink",to:t},i):i)}function te(e){var t=e.link,n=e.title;if(!n)return null;var r=o.a.createElement(m.K,{leading:"short",size:"sm",truncate:!0},n);return o.a.createElement(m.c,null,t?o.a.createElement(p.b,{className:"underlineLink",to:t},r):r)}var ne=n("xP02");function re(e){var t=e.board,n=e.pinner,r=void 0===n?{}:n,o=e.promoter,i="",a="",c="",l="",u="";return Object(g.a)(e).isPromoted&&o?(i=o.image_medium_url||o.image_small_url,c=o.full_name,l=P.a._("Promoted by","indicating the username of the person who promoted the pin"),u="/".concat(o.username,"/")):(i=r.image_medium_url||r.image_small_url,a="/".concat(r.username,"/"),l=r.full_name,u=t?t.url:""),{avatarUrl:i,attributionNameLink:a,attributionTitle:c,name:l,url:u}}var oe=n("VI9K"),ie=32;var ae=Object(a.connect)(null,(function(e){return{setMostRecentPin:function(t){e(Object(oe.b)(t))}}}))((function(e){e.feedbackData,e.feedbackType;var t=e.isDarkPromoter,n=e.pin,r=(e.pinTitle,e.setForcePrimary,e.setMostRecentPin),i=n.id,a=n.pinner,c=Object(g.a)(n).isPromoted,l=a||n.promoter,u=Object(M.a)(101,{element:c?283:27,objectId:i}),s=re(n),d=s.avatarUrl,f=s.attributionNameLink,y=s.attributionTitle,h=s.name,b=s.url,v=Object(x.b)(),w=v.viewParameter,O=v.viewType,_=b&&!f,E=o.a.createElement(m.c,{alignItems:"center",display:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:"-3px",marginRight:"-3px"}}},o.a.createElement(m.c,{flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}}},o.a.createElement(ne.a,{avatarSize:ie,isDarkPromoter:t,pinId:i,user:l,username:l&&l.username,viewParameter:w,viewType:O},o.a.createElement($,{attributionNameLink:f,avatarUrl:d,name:h}))),o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},flex:"grow",overflow:"hidden"},o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:{marginBottom:"2px"}}},o.a.createElement(ee,{attributionNameLink:f,name:h,regularWeight:!y})),o.a.createElement(te,{title:y})));return _?o.a.createElement(p.b,{className:"underlineLink",onClick:function(){r(i),u()},to:b},E):E})),ce=n("k9eC"),le=n("2YES"),ue=n("9Y9K");function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=6,de=10;var fe=Object(ue.compose)(Object(a.connect)((function(e,t){var n=e.pins[t.pinId]||{};return{carouselData:Object(_.a)(n),pin:n}}),(function(e){return{changeCarouselSlotIndex:function(t,n){return e(Object(Y.a)(t,n))}}})),le.e)((function(e){var t=e.carouselData,n=e.changeCarouselSlotIndex,r=e.pin,i=e.pinId,a=e.requestContext,c=Object(x.b)(),l=c.componentType,u=c.viewParameter,s=c.viewType,p=t||{},d=p.carousel_slots,f=void 0===d?[]:d,y=p.id,h=p.index,b=new ce.c(a,"web_carousel_pip_improvements").enabled();a.experiments.flush();var g=b?de:pe,v=function(e){return function(t){var o=t.event;o.preventDefault(),o.stopPropagation(),void 0!==n&&(n(i,e),Object(q.a)(108,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){se(e,t,n[t])}))}return e}({component:l,eventData:{pinCarouselSlotEventData:{carouselDataId:Number(y),carouselSlotId:f[h]&&Number(f[h].id),carouselSlotIndex:h,toCarouselSlotIndex:e}},objectId:i,view:s,viewParameter:u},Object(N.a)(r)||{})))}};return o.a.createElement(m.c,{display:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:-3,marginRight:-3}}},f.map((function(e,t){return o.a.createElement(m.c,{key:i+t,dangerouslySetInlineStyle:{__style:{marginLeft:3,marginRight:3}}},o.a.createElement(m.P,{fullWidth:!1,shape:"circle",onTouch:v(t)},o.a.createElement(m.c,{"data-test-id":"ellipsis-size",height:g,width:g,dangerouslySetInlineStyle:{__style:{backgroundColor:t===h?"#555":"lightGray"}},shape:"circle"})))})))})),me=n("92s0"),ye=n("vl7u");function he(e){var t=e.feedbackType,n=e.pin,r=n.pinner,i=n.source_interest,a=r||{},c=a.full_name,l=a.username,u=(i||{}).name,s="topic"===t,d=!s&&"followed"===t,f="/".concat(l,"/"),y=Object(ye.g)(u),h="/search/pins/?q=".concat(encodeURIComponent(y),"&rs=image_only_attribution"),b=s?h:f,g={topic:P.a._("From {topic}","attribution on pin rep"),followed:P.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:P.a._("Picked for you","attribution on pin rep"),pfy:P.a._("Picked for you","attribution on pin rep")}[t];if(!g)return null;if(d||s){var v=0===g.indexOf("{"),w=s?u:c,O=v?g.slice(g.indexOf("}")+1):g.slice(0,g.indexOf("{"));return v?o.a.createElement(m.c,null,o.a.createElement(p.b,{to:b},o.a.createElement(L.b,{weight:"bold",inline:!0,size:"sm",truncate:!0},w)),o.a.createElement(L.b,{inline:!0,size:"sm"},O)):o.a.createElement(m.c,null,o.a.createElement(L.b,{inline:!0,size:"sm"},O),o.a.createElement(p.b,{to:b},o.a.createElement(L.b,{color:"darkGray",weight:"bold",inline:!0,size:"sm",truncate:!0},w)))}return o.a.createElement(m.c,null,o.a.createElement(me.a,{pin:n},o.a.createElement(L.b,{color:"darkGray",overflow:"normal",size:"sm",weight:"semibold"},g)))}var be=n("qE0g"),ge=n("Fpqi");function ve(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";var t=window.prefetchCompletion[e],n=t.downloadedAssets,r=t.totalAssets;return r?(n/r*100).toFixed(3).toString():"-1"}var we=n("Mce2"),Oe=n("buVl");function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ee(e,t,n[t])}))}return e}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){var t,n,r=e.children,i=e.componentType,a=e.contextLogData,c=(e.elementType,e.pin),l=e.viewParameter,u=e.viewType,s=Object(x.b)(),d=c.carousel_data,f=c.id,y=c.link,h=c.tracked_link,b="one-tap-desktop";if(d){var g=d.carousel_slots,v=void 0===g?[]:g,w=d.id,O=d.index;v[O]&&v[O].link&&(t=v[O].link),n={carousel_slot_id:v[O]&&v[O].id,carousel_data_id:w,carousel_slot_index:O},b+="-carousel"}else t=h||y;return o.a.createElement(m.c,{"data-test-id":"otpp"},o.a.createElement(we.a,{id:b},o.a.createElement(p.b,{auxData:n,deeplinkUrls:Object(Oe.o)(f),external:!0,onClick:function(){var e=ge.a.getInstance(),t=e.getViewFromContext();Object(q.a)(12,_e({},a,{view:u||s.viewType,viewParameter:l||s.viewParameter,component:i||s.componentType,objectId:f,grid_index:s.slotIndex,pin_id:f,prefetch_percentage_complete:ve(y||"")})),Object(q.a)(13,_e({closeup_navigation_type:"web_closeup",objectId:f,component:i||s.componentType,view:3},s.contextLogData,a)),e.addViewToContext(t)},pinId:f,style:{cursor:"pointer",display:"block"},to:t},r)))}function Pe(e){var t=e.pin,n=Object(g.a)(t).isOneTap?Se:me.a;return o.a.createElement(n,e)}function Ce(e){return Object(g.a)(e).isProduct&&Object(N.b)(e)||""}var Te=n("LCmp");function Ie(e){var t=e.pin,n=e.singleLineMaxLength,r=Ce(t),i=Object(Te.a)(r,n),a=o.a.createElement(L.b,{color:"darkGray","data-test-id":"PinRep-Source",overflow:"normal",size:"sm",weight:"normal"},i);return o.a.createElement(Pe,{pin:t},a)}function je(e){var t=e.numberOfLines,n=void 0===t?2:t,r=e.pin,i=e.singleLineMaxLength,a=e.pinTitle,c=n*i,l=Object(Te.a)(a,c);return o.a.createElement(Pe,{pin:r},o.a.createElement(L.b,{color:"darkGray","data-test-id":"PinRep-Title",overflow:"normal",size:"sm",weight:"semibold"},l))}var ke=n("HcgI"),xe=1.8;function Re(e){var t=e.pin,n=e.showGroupBoardAvatar,r=e.singleLineMaxLength,i=e.userNote,a=t.pinner;if(!a)return null;var c=a.full_name,l=a.image_small_url,u=xe*r,s=Object(Te.a)(i,u);return o.a.createElement(Pe,{pin:t},o.a.createElement(m.c,{alignItems:"center",display:"flex"},!n&&o.a.createElement(m.c,{flex:"none",marginEnd:2},o.a.createElement(m.a,{name:c,size:"sm",src:l})),o.a.createElement(m.c,{"data-test-id":"PinRep-UserNote"},o.a.createElement(L.b,{overflow:"normal",size:"sm"},o.a.createElement(ke.a,{text:s,options:{hashtags:{source:"hashtag_closeup"}}})))))}var Ae=n("rVpF"),De=Object(r.lazy)((function(){return n.e("BoardActivityPinRepReactionsCommon").then(n.bind(null,"sB4Q"))})),Le={container:{padding:"8px 6px 16px"},imageOnlyAttribution:{hidden:{opacity:0,transition:"opacity ".concat(Ae.a,"ms ease")},visible:{opacity:1}}};var Me=Object(r.memo)((function(e){var t=e.attributionType,n=e.blockClickEvents,r=e.feedbackData,i=e.feedbackType,a=e.hoverTransitionState,c=e.isDarkPromoter,l=e.pin,u=e.pinTitle,s=e.setForcePrimary,p=e.showBoardActivityReply,d=e.showCarouselEllipsis,f=e.showGroupBoardAvatar,y=e.showOverflowMenu,h=e.showReactions,b=e.showSource,g=e.singleLineMaxLength,v=e.titleLines,w=e.userNote,O=l.board_activity,_=l.id,E=u||b,S=E||w,P=re(l),C=P.avatarUrl,T=P.attributionNameLink,I=P.name,x=null;"default"===t?x=o.a.createElement(ae,{feedbackData:r,feedbackType:i,pin:l,pinTitle:u,setForcePrimary:s,isDarkPromoter:c}):"image-only-credit"===t&&(x=o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:Le.imageOnlyAttribution["active"===a?"visible":"hidden"]}},o.a.createElement(he,{pin:l,feedbackType:i})));var R=o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:Le.container}},d&&o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:E||f||"none"!==t?{marginBottom:"6px"}:{}},display:"flex",justifyContent:"center"},o.a.createElement(m.c,{flex:"none"},o.a.createElement(fe,{pinId:_}))),o.a.createElement(m.c,{display:"flex"},o.a.createElement(m.c,{flex:"grow"},S&&o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:"none"!==t||h?{marginBottom:"6px"}:{}}},o.a.createElement(je,{numberOfLines:v,pin:l,pinTitle:u,singleLineMaxLength:g}),b&&o.a.createElement(Ie,{pin:l,singleLineMaxLength:g}),w&&o.a.createElement(m.c,{marginTop:E?1:0},o.a.createElement(Re,{pin:l,showGroupBoardAvatar:f,singleLineMaxLength:g,userNote:w}))),o.a.createElement(m.c,{alignItems:"center",display:"flex"},o.a.createElement(m.c,{flex:"grow"},x),y&&o.a.createElement(m.c,{flex:"none"},o.a.createElement(be.default,{feedbackData:r,feedbackType:i,pin:l,pinTitle:u,setForcePrimary:s,transparentBackground:!0}))),h&&o.a.createElement(m.c,{position:"relative","data-test-id":"board-activity-reactions",minHeight:16},o.a.createElement(k.a,null,o.a.createElement(De,{pinId:l.id,activityId:O&&O.id||l.id,showReply:p})))),f&&o.a.createElement(m.c,{flex:"none",marginRight:1},o.a.createElement($,{attributionNameLink:T,avatarUrl:C,name:I}))));return n?o.a.createElement("div",{style:{pointerEvents:"none"}},R):j(R)})),Ne=n("Alt3"),Be=n("mnfC");function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Fe=Object(r.lazy)((function(){return Promise.all([n.e(17),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"24KF"))})),ze=Object(r.lazy)((function(){return Promise.all([n.e(17),n.e("PinPersistentOneClickSaveCommon")]).then(n.bind(null,"d94/"))})),He=Object(r.lazy)((function(){return Promise.all([n.e(10),n.e(36),n.e("PinSaveButtonCommon")]).then(n.bind(null,"odTJ"))})),Ge=Object(r.lazy)((function(){return Promise.all([n.e(10),n.e(17),n.e(44),n.e("PinBetterSaveCommon")]).then(n.bind(null,"qoD0"))})),Ve=Object(r.lazy)((function(){return n.e("BoardActivityPinRepLikeButtonCommon").then(n.bind(null,"1pwd"))}));function We(e){var t=e.derivedSaveButtonOptions,n=e.onToggleFlyout,a=e.onToggleModal,c=e.pin,l=e.showEditButton,u=e.showLikeButton,s=e.supportsReactionBar,p=Ue(Object(r.useState)(!1),2),d=p[0],f=p[1],y=c.carousel_data,h=c.id,b=c.savedInfo,g=Object(r.useRef)(!!b),v=Object(x.b)(),w=v.viewParameter,O=v.viewType,_=Object(M.a)(101,{element:0,objectId:h}),E=null,S={onToggleModal:n,view:O,viewParameter:w,useLegoStyles:!0};if(!d)if("classic"===t.type||"controlled"===t.type){var P=t.renderPinSaveTooltip;E=o.a.createElement(m.c,{display:"flex",justifyContent:"end"},o.a.createElement(k.a,null,o.a.createElement(m.c,{"data-test-id":"pin-save-button"},j(o.a.createElement(He,{icon:!1,onClickCallback:_,onToggleModal:a,oneTapSave:"controlled"===t.type&&t,pin:c,renderPinSaveTooltip:P,variant:"lego"})))))}else if("inline"===t.type){var C=c,T=t.initialSelection,I=t.onSave,R=t.renderPinSaveTooltip;E=o.a.createElement(k.a,null,o.a.createElement(m.c,{"data-test-id":"better-save"},j(o.a.createElement(Ge,{initialSelection:T,onSave:I,onToggleFlyout:n,onToggleModal:a,pin:C,renderPinSaveTooltip:R,renderSavedStatus:function(e){var t=e.savedInfo;return t&&j(o.a.createElement(Be.a,{isNewlySaved:!g.current,name:t.title,url:t.url}))},useMasonryFlyout:!0,variant:"lego-pin",viewParameter:w}))))}else"persistentOneClickSave"===t.type&&(E=o.a.createElement(k.a,null,o.a.createElement(m.c,{"data-test-id":"persistent-one-click-save"},j(o.a.createElement(ze,Object.assign({},S,{saveOptions:t,pin:c}))))));var A=null;return l?A=o.a.createElement(k.a,null,j(o.a.createElement(m.c,{"data-test-id":"edit-button",display:"inlineBlock"},o.a.createElement(Fe,Object.assign({},S,{carouselSlotCurrentIndex:y&&y.index,component:0,pinId:h,style:{size:"sm"}}))))):u&&(A=o.a.createElement(k.a,null,o.a.createElement(m.c,{"data-test-id":"like-button"},o.a.createElement(i.a,{name:"group_boards_reactions",activate:!1},(function(e){var t=e.anyEnabled,n=e.customActivate;return j(o.a.createElement(Ve,{pin:c,activateReactionsExperiment:n,inReactionsExperiment:t,onShowReactionsBar:function(){return f(!0)},onHideReactionsBar:function(){return f(!1)},supportsReactionBar:s,useLegoStyles:!0}))}))))),o.a.createElement(m.c,{display:"flex",margin:3},A&&o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:{marginRight:"auto"}},flex:"grow"},A),E&&o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}},flex:"grow",overflow:"hidden"},E))}var Ke=n("4mdS"),Ye=n("IqQH"),qe=n("BsUa"),Qe=n("EQo2"),Xe=n("k3nM"),Je=55;function Ze(e){var t=e.allowImageCropping,n=e.blockClickEvents,i=e.cropProductPin,a=(e.isHovering,e.isSocialSeasonalBoard),c=void 0!==a&&a,l=e.onError,u=e.onLoad,s=e.pin,p=e.resolution,d=void 0===p?"default":p,f=e.showCarousel,y=e.showPromotedVideos,h=Object(x.b)(),b=h.slotIndex,v=h.viewParameter,w=h.viewType,O=s.id,_=void 0===O?"":O,E=s.aggregated_pin_data,S=s.image_signature,P=(E||{}).pin_tags_chips,C=Object(g.a)(s),T=C.isVideo,I=C.isPromoted,k=C.isGif,R=null;if(!T||!y&&I)if(f)R=o.a.createElement(m.c,{"data-test-id":"pinrep-carousel"},o.a.createElement(Ye.a,{onError:l,onLoad:u,highResOnly:"high-res"===d,lowResOnly:"low-res"===d,pinId:_,showCarouselBadge:!1,cropProductPin:i}));else{var A=t?function(e){var t=e.images,n=e.image_crop,r=t&&t["236x"].height;if(n&&(0!==n.min_y||1!==n.max_y)){var o=n.min_y,i=n.max_y;return{marginTop:"".concat(o>0?-1*o*r:0,"px"),marginBottom:"".concat(i<1?Math.round(-1*(1-i)*r):0,"px")}}return{}}(s):{};R=o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:A},"data-test-id":"pinrep-image",minHeight:Je},o.a.createElement(Qe.a,{pin:s,highResOnly:"high-res"===d,lowResOnly:"low-res"===d,onLoad:u,onError:l,cropProductPin:i,animateGif:k&&c}))}else R=o.a.createElement(m.c,{"data-test-id":"pinrep-video"},o.a.createElement(Xe.a,{inAdsDesktopVideoExperiment:T&&y,pin:s,onLoad:u,viewType:w,viewParameter:v,highResOnly:"high-res"===d,lowResOnly:"low-res"===d,onError:l,isExperimentalPinRep:!0}));var D=o.a.createElement(m.u,{wash:!0},R);return n?o.a.createElement(r.Fragment,null,D,P&&o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:{marginTop:1}}},o.a.createElement(qe.a,{pin:s,enableCloseupLink:!0}))):o.a.createElement(r.Fragment,null,o.a.createElement(Pe,{pin:s,contextLogData:{grid_index:b,image_signature:S},elementType:35},D),P&&o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:{marginTop:1}}},j(o.a.createElement(qe.a,{pin:s,enableCloseupLink:!0}))))}var $e=n("TRIq");function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var tt=60,nt=40,rt=60;function ot(e){return e<tt+nt+rt?"header-only":"none"}function it(e){var t,n,o,i=et(Object(r.useState)(e.current?ot(e.current.clientHeight||0):"none"),2),a=i[0],c=i[1];return t=e,n=function(e){var t=ot(e.height);t!==a&&c(t)},o=Object(r.useRef)(),Object(r.useEffect)((function(){var e=t.current;if(e){var r=o.current;r&&r.width===e.offsetWidth&&r.height===e.offsetHeight||(o.current={width:e.offsetWidth||0,height:e.offsetHeight||0},n&&n(o.current))}})),o.current,a}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ct=4e3;function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ut={impressed:{backgroundColor:"#adebad",opacity:.5}},st=function(){return void 0!==R.a.getQueryStringParams().debug_impression_log};function pt(e){var t=e.debugImpressionState,n=void 0===t?"paused":t,r=e.slotIndex;return"paused"===n?null:o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:ut.impressed},"data-test-id":"debug-pin-impressions",position:"absolute",top:!0,left:!0,right:!0,bottom:!0},o.a.createElement(m.c,{position:"absolute",top:!0,left:!0,padding:2,color:"darkGray"},o.a.createElement(m.K,{size:"xl",color:"white"},r)))}var dt=n("jCHc"),ft=n("nZV1");function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){yt(e,t,n[t])}))}return e}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var bt={background:{base:{transition:"all 250ms",opacity:0},blurred:{backgroundPosition:"50% 50%",backgroundSize:"cover",borderRadius:Ne.a,filter:"blur(20px)",opacity:1}},backdrop:{base:{transition:"all 250ms"},blurred:{backgroundColor:"rgba(0,0,0,0.4)"}},feedbackOverlayContainer:{base:{opacity:0,transition:"all 250ms"},visible:{opacity:1}},navigateLinkStyle:{color:"white",textDecorationColor:"white",cursor:"pointer"}},gt=["followed","related","search"],vt=["pfy","pfyBoard"];function wt(e){var t=e.feedbackType,n=e.isHomefeedControlPanelExp,i=e.pin,a=ht(Object(r.useState)(!1),2),c=a[0],l=a[1],u=ht(Object(r.useState)(!1),2),s=u[0],d=u[1];Object(r.useEffect)((function(){return l(!0)}),[]);var f=function(){return d(!0)},y=i.feedbackText,h=i.images,b=i.showFeedbackOverlay,g=i.undoAction,v=i.undoText,w=h&&h["236x"].url,O=y.image,_=y.subTitle,E=y.title,S=y.unfollow,C=n&&!gt.includes(t),T=vt.includes(t);return o.a.createElement(m.c,{color:"transparent",dangerouslySetInlineStyle:{__style:{borderRadius:Ne.a}},"data-test-id":"obscured-overlay",overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0},o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:{borderRadius:Ne.a}},margin:-4,overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0},w&&o.a.createElement(dt.a,{additionalStyles:mt({},bt.background.base,c?bt.background.blurred:{},{backgroundImage:'url("'.concat(w,'")')})}),w&&o.a.createElement(dt.a,{additionalStyles:mt({},bt.background.base,c?bt.background.blurred:{},{backgroundImage:'url("'.concat(w,'")')})}),o.a.createElement(dt.a,{additionalStyles:mt({},bt.backdrop.base,c?bt.backdrop.blurred:{})})),o.a.createElement(m.c,{dangerouslySetInlineStyle:{__style:mt({},bt.feedbackOverlayContainer.base,!b&&c?bt.feedbackOverlayContainer.visible:{})},height:"100%",padding:4,position:"relative",width:"100%"},o.a.createElement(m.c,{display:"flex",direction:"column",height:"100%",justifyContent:"between"},o.a.createElement(m.c,{className:"ObscuredOverlay","data-test-id":"PinFeedbackConfirmation",maxWidth:216},o.a.createElement(m.c,{marginBottom:2},o.a.createElement(m.K,{color:"white",size:"xl",bold:!0},E)),o.a.createElement(m.c,{display:"flex"},O&&o.a.createElement(m.c,{marginRight:3},o.a.createElement(m.u,{width:O.width,height:O.height,shape:"rounded",wash:!0},o.a.createElement(m.p,{alt:_||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:O.url||""}))),o.a.createElement(m.K,{color:"white",overflow:"normal"},_,C&&o.a.createElement(p.b,{className:"underlineLink",to:"/edit",onClick:function(){Object(q.a)(101,{view:1,viewParameter:92,element:11347})},style:bt.navigateLinkStyle},P.a._(" Tune your home feed","Text on the button to navigate to homefeed control"))))),!g&&!s&&S&&!T&&o.a.createElement(m.d,{color:"white",onClick:function(){return Object(ft.a)(S.action,S.actionOptions,f)},text:P.a._("Unfollow","Text on the button to unfollow a specific board / user")}),g&&o.a.createElement(m.d,{color:"white",onClick:g,text:v||P.a._("Undo","Text on the button to unfollow hiding a pin")}))))}function Ot(e){return"active"===e?"visible":"inactive"===e?"none":"hidden"}function _t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes("visible")?"visible":t.includes("hidden")?"hidden":"none"}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var St=228;var Pt=Object(r.memo)((function(e){var t=e.actionBarProps,n=e.blockClickEvents,i=e.currentlyPlayingVideo,a=e.disableHover,c=void 0!==a&&a,l=e.footerProps,u=e.forcePrimaryContentVisibility,s=e.impressionsDebuggerProps,p=e.onError,d=e.onLoad,f=e.obscuredPinOverlayProps,y=e.pin,h=e.pinVisualProps,b=e.primaryContentProps,g=e.selectionState,v=e.secondaryContentProps,w=e.showAccessoryContent,O=e.showActionBar,_=e.showFooter,E=e.showImpressionsDebugger,S=e.showSignalDebugger,P=e.showObscuredPinOverlay,C=e.showPrimaryAndSecondaryContent,T=e.viewType,I=y.savedInfo,j=Et(Object(r.useState)(!1),2),k=j[0],x=j[1],R=Object(Ae.b)(k),A=function(){var e=lt(Object(r.useState)(!1),2),t=e[0],n=e[1];return{isHovering:t,hoverTransitionState:Object(Ae.b)(t,0,Ae.a),handleMouseOver:Object(r.useCallback)((function(){return n(!0)}),[n]),handleMouseLeave:Object(r.useCallback)((function(){return n(!1)}),[n])}}(),D=A.isHovering,L=A.hoverTransitionState,M=A.handleMouseOver,N=A.handleMouseLeave;c&&(D=!1,L="inactive");var B,U=Object(Ae.b)(!!I),F=Ot(U),z=Ot(L),H=Ot(L),G=Ot(R),V=Ot(U),W={primaryContentVisibility:_t(H,G,V),secondaryContentVisibility:(B=_t(H,G,V),"none"===B?"visible":"visible"===B?"none":"hidden"),actionBarVisibility:_t(H,G),accessoryContentVisibility:"none"},Y=function(e){return x(e)},q=function(e){x(e),e||N()},Q=null;u&&(W.primaryContentVisibility="visible"),"none"!==W.primaryContentVisibility&&C&&(Q=o.a.createElement(We,Object.assign({pin:y,onToggleFlyout:Y,onToggleModal:q},b)));var X,Z=Object(r.useRef)(!0),$=Z.current;Z.current=!1;var ee=function(e,t){var n=e.carousel_data,o=(n||{}).index,i=at(Object(r.useState)(!n||t),2),a=i[0],c=i[1],l=Object(r.useRef)(o),u=Object(r.useRef)(null);if(n){var s=l.current;l.current=o,(o!==s||t)&&(u.current&&clearTimeout(u.current),c(!0),u.current=setTimeout((function(){c(!1),u.current=null}),ct))}return Object(r.useEffect)((function(){return function(){u.current&&clearTimeout(u.current)}}),[]),a}(y,$),te=Ot(Object(Ae.b)(ee));W.secondaryContentVisibility=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes("none")?"none":t.includes("hidden")?"hidden":"visible"}(W.secondaryContentVisibility,te),X=(v.allowShoppingPriceIndicator||"none"!==W.secondaryContentVisibility)&&C&&!i&&o.a.createElement(m.c,{margin:2},o.a.createElement(Ke.a,Object.assign({pin:y},v)));var ne=null;w&&(ne=o.a.createElement(J,{pin:y}),W.accessoryContentVisibility=Ot(L)),h.isSocialSeasonalBoard&&(t.showShareButton=!1);var re=O?o.a.createElement(K,Object.assign({onToggleFlyout:Y,onToggleModal:q,pin:y,setForcePrimary:x},t)):null,oe=null;_&&(oe=o.a.createElement(Me,Object.assign({blockClickEvents:n,hoverTransitionState:"image-only-credit"===l.attributionType?L:null,pin:y,setForcePrimary:x},l))),h.isSocialSeasonalBoard&&(oe=o.a.createElement(m.c,{"data-test-id":"social-seasonal-footer",marginTop:2,marginBottom:3,width:"100%"},o.a.createElement(m.c,{margin:"auto",width:St},o.a.createElement($e.a,{isFlyoutOpen:k,onFlyoutDismiss:function(){return Y(!k)},onToggleFlyout:function(){return Y(!k)},pinId:y.id,sendType:"pin",shownWithinMasonry:!0,viewType:T}))));var ie=E&&o.a.createElement(pt,s),ae=S&&y.debug_info_html&&o.a.createElement(m.c,{paddingY:1},o.a.createElement("pre",null,y.debug_info_html)),ce=Object(r.useRef)();"header-only"===it(ce)&&(W.actionBarVisibility="none",W.accessoryContentVisibility="none");var le=P?o.a.createElement(wt,Object.assign({pin:y},f)):null;return o.a.createElement("div",{onMouseOver:M,onMouseLeave:N,"data-test-id":"pin","data-test-pin-id":y.id},o.a.createElement(Ne.b,{visualOverlayVisibility:z,savedOverlayVisibility:F,primaryContent:Q,primaryContentVisibility:W.primaryContentVisibility,secondaryContent:X,secondaryContentVisibility:W.secondaryContentVisibility,accessoryContent:ne,accessoryContentVisibility:W.accessoryContentVisibility,actionBar:re,actionBarVisibility:W.actionBarVisibility,footer:oe,selectionState:g,debugContent:ie,signalDebuggerContent:ae,obscuredPinOverlay:le},o.a.createElement(m.c,{ref:ce},o.a.createElement(Ze,Object.assign({blockClickEvents:n,isHovering:D,onError:p,onLoad:d,pin:y},h)))))})),Ct=n("+H5w"),Tt=["UserProfilePinGrid","CloseupRelatedProducts"];function It(e){var t=e.attributionOption,n=e.board,r=e.boardActivityOptions,o=e.feedbackData,i=e.feedbackType,a=e.hasCarouselData,c=e.inChangeTitlesExp,l=e.isGroupBoard,u=e.pin,s=e.showImageOnly,p=e.surface,d=Object(g.a)(u).isPromoted,f=u.promoter,m=u.unified_user_note,y=function(e){var t=e.attributionOption,n=e.feedbackType,r=e.isGroupBoard,o=e.pin,i=e.showImageOnly,a=e.surface,c=o.is_downstream_promotion,l=o.promoter;if("promoted"===n||l&&!c)return"default";if(Tt.includes(a))return"none";if(r)return"none";var u="default";return t&&("image-only"===t?u="image-only-credit":"hide"===t&&(u="none")),"followed"!==n||i?"none":u}({attributionOption:t,feedbackType:i,isGroupBoard:l,pin:u,showImageOnly:s,surface:p}),h=s?"":v({inChangeTitlesExp:c,isGroupBoard:l,pin:u,surface:p}),b=!d&&!s&&Boolean(Ce(u)),w=c&&"BaseBoardPinGrid"===p&&m?m.trim():null,O=2;d?O=3:(b||"none"!==y)&&(O=1);var _=l?25:30;return"CloseupRelatedProducts"===p&&(_=23),{attributionType:y,feedbackData:o,feedbackType:i,isDarkPromoter:!d&&!!f,pinTitle:h,showBoardActivityReply:"no-reply"!==r,showCarouselEllipsis:a,showGroupBoardAvatar:l,showOverflowMenu:d,showReactions:Boolean(n&&n.should_show_board_activity)||l,showSource:b,singleLineMaxLength:_,titleLines:O,userNote:w}}var jt=n("hCBh");function kt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var xt=Object(a.connect)((function(e,t){var n=e.boards,r=n.isSocialSeasonalBoard,o=void 0!==r&&r,i=n.content,a=void 0===i?{}:i,c=e.pins,l=e.ui,u=e.viewer,s=t.pin,p=t.pinId,d=c[p]||s,f=d.board&&d.board.id,m=(f?a["".concat(f)]:void 0)||d.board,y=l.app?l.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}};return{board:m,currentlyPlayingVideo:Object(b.j)(p,y),isSocialSeasonalBoard:o,reduxPin:d,viewConfig:l.views,viewer:u}}),(function(){return{}}))((function(e){var t=e.allowImageCropping,n=e.blockClickEvents,i=e.attributionOption,a=e.board,c=e.boardActivityOptions,l=e.currentlyPlayingVideo,u=e.debugImpressionState,s=e.feedbackOptions,p=e.imageOnlyOption,d=e.isSocialSeasonalBoard,f=e.reduxPin,m=e.resolution,y=e.saveButtonOptions,h=e.surface,b=e.trackingParameters,j=e.viewConfig,k=e.viewer,R=kt(e,["allowImageCropping","blockClickEvents","attributionOption","board","boardActivityOptions","currentlyPlayingVideo","debugImpressionState","feedbackOptions","imageOnlyOption","isSocialSeasonalBoard","reduxPin","resolution","saveButtonOptions","surface","trackingParameters","viewConfig","viewer"]),A=a||{},D=A.collaborated_by_me,L=A.collaborator_count,M=A.is_collaborative,N=f.pinner,B=f.showFeedback,U=Object(I.a)(f),F=b.slotIndex,z=b.viewParameter,H=Object(le.d)(),G=new ce.c(H,"web_unified_description_both").enabled()||new ce.c(H,"web_unified_description_both_perf").enabledWithNoActivation(),V=!!Object(T.a)(f)&&new ce.c(H,"web_carousel_product_pin").enabled(),W=Boolean(Object(_.a)(f))||V,K=k.isAuth&&k.isEmployee,Y=k.isAuth&&(Object(jt.d)({user:k})||Object(jt.e)({user:k}))&&!k.isPartner,q=Y;"default"!==p&&(q="image-only"===p);var Q=i;Y&&(Q="image-only");var X=function(e){var t=e.feedbackOptions,n=e.pin,r=e.viewParameter,o=n.board,i=n.pinner;return(0,Object(S.a)({i18n:P.a,interpolateNamedTemplate:C.b}).getFeedbackType)({board:o,feedback:t,pin:n,pinner:i,viewParameter:r})}({feedbackOptions:s,pin:f,viewParameter:z}),J=(s||{}).data,Z=L>0||M,$=function(e,t){var n=E[t];return!!n&&"dense"===e[n]}(j,h),ee=Z&&"BaseBoardPinGrid"===h,te=function(e,t){var n=e&&e.owner&&e.owner.id;return t.isAuth&&n===t.id}(a,k),ne=Boolean(k.isAuth&&N&&N.id===k.id),re=D||Z&&te,oe=!["EngagementDetails","BoardCreateUpsell"].includes(h),ie=Object(r.useMemo)((function(){return function(e){var t=e.isDenseView,n=e.isGroupBoard,r=e.isOwnBoard,o=e.isOwnPin,i=e.isRemovable,a=e.saveButtonOptions,c=e.surface,l=e.viewer,u=e.viewerIsCollaborator,s=l.isAuth?l.boardCount:void 0,p=a||function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)<2?{type:"classic"}:{type:"inline"}}(s);return r&&"HomefeedMoreIdeasTabs"===c?p={type:"persistentOneClickSave"}:(u||r||"UserProfilePinGrid"===c)&&(p={type:"classic"}),i&&(p={type:"none"}),{derivedSaveButtonOptions:p,showEditButton:r&&!n||o&&"UserProfilePinGrid"===c,showLikeButton:u,supportsReactionBar:!t}}({isDenseView:$,isGroupBoard:ee,isOwnBoard:te,isOwnPin:ne,isRemovable:U,saveButtonOptions:y,surface:h,viewer:k,viewerIsCollaborator:re})}),[ee,te,ne,U,y,h,k]),ae=Object(r.useMemo)((function(){return function(e){var t=e.allowProductCarousel,n=void 0!==t&&t,r=e.surface;return{allowProductCarousel:n,allowShoppingPriceIndicator:O.includes(r)}}({allowProductCarousel:V,surface:h})}),[V,h]),ue=W,se=!["EngagementDetails","BoardCreateUpsell"].includes(h),pe=Object(r.useMemo)((function(){return function(e){var t=e.feedbackData,n=e.feedbackType,r=e.inChangeTitlesExp,o=e.isDenseView,i=e.isGroupBoard,a=e.isOwnBoard,c=e.pin,l=e.surface,u=Object(g.a)(c),s=u.isOwnPin,p=u.isPromoted,d="default";return o&&(d=i?"icon-only":"truncated-text"),{feedbackData:t,feedbackType:n,pinTitle:v({inChangeTitlesExp:r,isGroupBoard:i,pin:c,surface:l}),showEditButton:i&&s,showOverflowMenu:!(p||a||i||w.includes(l)),showShareButton:!("CloseupRelatedProducts"===l),sourceLinkStyle:d,useDenseGroupBoardLayout:i&&o}}({feedbackData:J,feedbackType:X,inChangeTitlesExp:G,isDenseView:$,isGroupBoard:ee,isOwnBoard:te,pin:f,surface:h})}),[J,X,$,ee,te,f,h]),de=Object(r.useMemo)((function(){return It({attributionOption:Q,board:a,boardActivityOptions:c,feedbackData:J,feedbackType:X,hasCarouselData:W,inChangeTitlesExp:G,isGroupBoard:ee,pin:f,showImageOnly:q,surface:h})}),[Q,a,c,J,X,W,G,ee,f,q,h]),fe=Boolean(de.pinTitle)||de.userNote||de.showSource||"none"!==de.attributionType||ee;"EngagementDetails"===h?fe=!1:$?fe=!1:d&&(fe=!1);var me=Boolean(B),ye=new ce.c(H,"web_homefeed_control_panel_nag").enabledWithNoActivation(),he=new ce.c(H,"web_homefeed_control_panel_pin_feedback"),be=me?{feedbackType:X,isHomefeedControlPanelExp:ye||he.enabled()}:void 0,ge=new ce.c(H,"ads_desktop_video_ads").enabledWithNoActivation(),ve=Object(r.useMemo)((function(){return function(e){var t=e.allowImageCropping,n=void 0===t||t,r=e.hasCarouselData,o=e.isSocialSeasonalBoard,i=e.resolution,a=void 0===i?"default":i,c=e.showPromotedVideos;return{allowImageCropping:n,cropProductPin:"CloseupRelatedProducts"===e.surface,isSocialSeasonalBoard:o,resolution:a,showCarousel:r,showPromotedVideos:c}}({allowImageCropping:t,hasCarouselData:W,isSocialSeasonalBoard:d,resolution:m,showPromotedVideos:ge,surface:h})}),[t,W,d,m,ge,h]),we=K&&st(),Oe=Object(r.useMemo)((function(){return{debugImpressionState:u,slotIndex:F}}),[u,F]);return o.a.createElement(x.a,{value:b},o.a.createElement(Pt,Object.assign({actionBarProps:pe,blockClickEvents:n,currentlyPlayingVideo:l,footerProps:de,forcePrimaryContentVisibility:["ExplorePossibilitiesPersistent","HomefeedMoreIdeasTabs","SearchItemPersistentOneClickSave"].includes(h),impressionsDebuggerProps:Oe,obscuredPinOverlayProps:be,pin:f,pinVisualProps:ve,primaryContentProps:ie,secondaryContentProps:ae,showPrimaryAndSecondaryContent:oe,showAccessoryContent:ue,showActionBar:se,showFooter:fe,showImpressionsDebugger:we,showSignalDebugger:K,showObscuredPinOverlay:me},Object(Ct.b)(R,["pinId"]),{viewType:b.viewType})))}));function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){At(e,t,n[t])}))}return e}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Lt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Mt=Object(a.connect)((function(e,t){var n=e.pins,r=e.location,o=t.pin;return{location:r,reduxPin:n[t.pinId]||o}}),(function(){return{}}))((function(e){var t=e.blockClickEvents,n=e.location,i=e.reduxPin,a=e.trackingParameters,p=Lt(e,["blockClickEvents","location","reduxPin","trackingParameters"]),d=Object(c.a)(i,n),f=l(i),m=!!(f&&f.url&&f.height&&f.width)||void 0,y=f&&i.videos?i.videos.id:void 0,g=Dt(Object(r.useState)(!1),2),v=g[0],w=g[1],O=Object(r.useCallback)((function(){return w(!0)}),[]),_=Object(r.useCallback)((function(){return w(!1)}),[]),E=a.componentType,S=a.contextLogData,P=a.impressionAuxFields,C=a.slotIndex,T=a.viewData,I=a.viewParameter,j=a.viewType;return o.a.createElement(u.a,{componentType:E,contextLogData:Rt({},"undefined"!=typeof window?{pwa_type:Object(s.b)(window)}:{},S,Object(N.a)(i,S)),loggingId:i.id,impressionAuxFields:Rt({},P||{},{isNativeVideoAndWatchable:m,videoIdStr:y,clientTrackingParams:d||"".concat(i.tracking_params||"","-0"),imageURL:i.images&&i.images["236x"].url,richTypes:Object(N.c)(i)}),impressionType:"Pin",isPaused:!v,slotIndex:C,viewData:T,viewParameter:I,viewType:j},Object(b.h)(i)?o.a.createElement(h,{pin:i}):o.a.createElement(xt,Object.assign({},p,{blockClickEvents:t,debugImpressionState:v?"started":"paused",onError:_,onLoad:O,pin:i,trackingParameters:{componentType:E,contextLogData:S,slotIndex:C,viewParameter:I,viewType:j}})))})),Nt=(n("E1Qe"),n("hvnN"),n("Ww6/"));function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Vt(e,t,n[t])}))}return e}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wt=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=zt(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==Bt(o)&&"function"!=typeof o?Gt(r):o,Vt(Gt(Gt(n)),"state",{startImpressionTimer:!1}),Vt(Gt(Gt(n)),"handleLoad",(function(){n.setState({startImpressionTimer:!0})})),Vt(Gt(Gt(n)),"handleError",(function(){n.setState({startImpressionTimer:!1})})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.componentType,n=e.contextLogData,r=e.impressionAuxFields,i=e.pin,a=e.slotIndex,p=e.location,d=e.viewData,f=e.viewType,m=e.viewParameter,y=Object(c.a)(i,p),g=l(i),v=!!(g&&g.url&&g.height&&g.width)||void 0,w=g&&i.videos?i.videos.id:void 0;return o.a.createElement(u.a,{componentType:t,contextLogData:Ut({},"undefined"!=typeof window?{pwa_type:Object(s.b)(window)}:{},n,Object(N.a)(i,n)),loggingId:i.id,impressionType:"Pin",impressionAuxFields:Ut({},r||{},{isNativeVideoAndWatchable:v,videoIdStr:w,richTypes:Object(N.c)(i),imageURL:i.images&&i.images["236x"].url,clientTrackingParams:y||"".concat(i.tracking_params,"-0")}),isPaused:!this.state.startImpressionTimer,slotIndex:a,viewData:d,viewType:f,viewParameter:m},Object(b.h)(i)?o.a.createElement(h,{pin:i}):o.a.createElement(Nt.b,Object.assign({},this.props,{onError:this.handleError,onLoad:this.handleLoad})))}}])&&Ft(n.prototype,r),i&&Ft(n,i),t}(r.Component),Kt=Object(a.connect)((function(e){return{location:e.location}}))(Wt);function Yt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function qt(e){var t=e.forceOldPinRep,n=Yt(e,["forceOldPinRep"]);return t?o.a.createElement(Kt,n):o.a.createElement(i.a,{name:"web_grid_immersive_new"},(function(e){var t=e.anyEnabled;return o.a.createElement(i.a,{name:"web_grid_immersive"},(function(e){return e.anyEnabled||t?o.a.createElement(Mt,function(e){var t={};if(t.allowImageCropping=e.truncatePinHeight,t.disableHover=e.hideHover,t.feedbackOptions=e.feedback,t.saveButtonOptions=e.saveOptions,t.blockClickEvents=e.blockClickEvents,t.pin=e.pin,t.pinId=e.pin.id,t.imageOnlyOption="default","boolean"==typeof e.showImageOnly&&(t.imageOnlyOption=e.showImageOnly?"image-only":"not-image-only"),t.boardActivityOptions="default",!1===e.showPinReactionsReply&&(t.boardActivityOptions="no-reply"),t.onError=e.onError,t.onLoad=e.onLoad,t.trackingParameters={componentType:e.componentType,contextLogData:e.contextLogData,impressionAuxFields:e.impressionAuxFields,slotIndex:e.slotIndex,viewData:e.viewData,viewParameter:e.viewParameter,viewType:e.viewType},t.resolution="default",e.highResOnly?t.resolution="high-res":e.lowResOnly&&(t.resolution="low-res"),void 0!==e.selection){t.selectionState={NO_SELECTION:"no-selection",SELECTED:"selected",UNSELECTED:"deselected"}[e.selection]}return t.attributionOption=null,e.showCredits||!1===e.hideAttribution?t.attributionOption="show":(e.hideAttribution||!1===e.showCredits)&&(t.attributionOption="hide"),t.surface=e.surface,t}(n)):o.a.createElement(Kt,n)}))}))}n.d(t,"a",(function(){return qt}))},nCsZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ocw6");function o(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(r.a)(e);return!isNaN(t)}},nZV1:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n("ePT2"),o=function(){};var i={complaint:function(e,t){r.a.create("PinFeedbackResource",e).callUpdate().then((function(){return t()}))},enablePFY:function(e,t){r.a.create("PFYPreferenceResource",e).callCreate().then((function(){return t()}))},followBoard:function(e,t){r.a.create("BoardFollowResource",e).callCreate().then((function(){return t()}))},followPinner:function(e,t){r.a.create("UserFollowResource",e).callCreate().then((function(){return t()}))},followTopic:function(e,t){r.a.create("InterestFollowResource",e).callCreate().then((function(){return t()}))},newsHubPinHide:function(e,t){r.a.create("NewsHubPinFeedbackResource",e).callUpdate().then((function(){return t()}))},promotedComplaint:function(e,t){r.a.create("PinFeedbackResource",e).callUpdate().then((function(){return t()}))},relatedPinHide:function(e,t){r.a.create("RelatedPinFeedbackResource",e).callUpdate().then((function(){return t()}))},reportPin:function(e,t){t()},unfollowBoard:function(e,t){r.a.create("BoardFollowResource",e).callDelete().then((function(){return t()}))},unfollowPinner:function(e,t){r.a.create("UserFollowResource",e).callDelete().then((function(){return t()}))},unfollowTopic:function(e,t){r.a.create("InterestFollowResource",e).callDelete().then((function(){return t()}))},unrelatedSearchPin:function(e,t){r.a.create("SearchPinFeedbackResource",e).callUpdate().then((function(){return t()}))}},a=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=i[e];return r?r(t,n):n()}},ocw6:function(e,t,n){"use strict";function r(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}n.d(t,"a",(function(){return r}))},"oko/":function(e,t,n){"use strict";function r(e,t){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{pinId:e,index:t}}}n.d(t,"a",(function(){return r}))},owVk:function(e,t,n){"use strict";var r=n("GyhR"),o=n("oFGA"),i=n("ztFR"),a=n("Fpqi");function c(e){var t=e.children,n=e.log;return Object(r.useEffect)((function(){if(n){var e=i.a.fromPlainObject(n);e.setEventType(13),e.setRequestIdentifier(o.a.initialPageContext.PAGE_LOAD_REQUEST_IDENTIFIER),a.a.getInstance().addEvent(e)}}),[]),t||null}n("YSek");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=e.name,n=e.upwtActionName,o=e.resourceDependencies,i=void 0===o?function(){return[]}:o,a=e.routeContextLog,l=void 0===a?function(e,t,n){return null}:a,m=e.metatagResource,y=void 0===m?function(){return null}:m,h=e.redirect,b=void 0===h?function(){return null}:h,g=e.getRenderError,v=void 0===g?function(){return null}:g;return function(e){var o,a;return a=o=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),s(this,p(n).apply(this,arguments))}var o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,t),o=n,(i=[{key:"render",value:function(){var t=this.props,n=t.params,o=t.location,i=void 0===o?{}:o,a=(this.props.route||{}).legacy_server_context;return r.createElement(c,{log:l(a||{},n||{},i||{})},r.createElement(e,this.props))}}])&&u(o.prototype,i),a&&u(o,a),n}(r.Component),f(o,"WrappedComponent",e),f(o,"routeName",t),f(o,"upwtActionName",n),f(o,"displayName","StaticRouteData"),f(o,"getMetatagResource",y),f(o,"getContextLog",l),f(o,"getResourceDependencies",i),f(o,"getRedirect",b),f(o,"getRenderError",v),a}}n.d(t,"a",(function(){return m}))},plGG:function(e,t,n){"use strict";var r=n("GyhR");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._private_safe_value=t.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}return i(e,null,[{key:"factory",value:function(t){return t instanceof e?t:new e(String(t))}}]),i(e,[{key:"toString",value:function(){return this._private_safe_value}}]),e}();n("Y6Z1"),n("hvnN");function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e){var t=e.css,n=e.unsafeCSS,o=c(e,["css","unsafeCSS"]),i=String(t||"")||n||"";return!!i?r.createElement("style",Object.assign({},o,{dangerouslySetInnerHTML:{__html:String(a.factory(i))}})):null}n.d(t,"a",(function(){return l}))},qE0g:function(e,t,n){"use strict";n.r(t),n.d(t,"OverflowMenu",(function(){return O}));var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("m2OL"),c=n("2LZR"),l=n("Qo1m"),u=n("/mke"),s=n("wSOZ"),p=n("LCmp"),d=n("IaXd"),f=n("wHKh"),m=n("aaO7"),y=n("zBQm"),h=n("yJaP"),b=n("+U6O");function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=50,w=60;function O(e){var t,n=e.feedbackData,i=e.feedbackType,m=e.hidePinFeedbackOverlay,O=e.isHomefeedContextualMenuTooltipExperience,_=e.pin,E=e.pinTitle,S=e.setForcePrimary,P=e.transparentBackground,C=Object(h.b)(),T=C.slotIndex,I=C.viewParameter,j=C.viewType,k=g(Object(r.useState)(!1),2),x=k[0],R=k[1],A=g(Object(r.useState)(),2),D=A[0],L=A[1],M=_.ad_match_reason,N=_.board,B=_.category,U=_.description,F=_.id,z=void 0===F?"":F,H=_.images,G=_.is_promoted,V=_.pinner,W=_.promoter,K=_.recommendation_reason,Y=_.source_interest,q=_.videos,Q=(t=G?w:v,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(p.a)(e.trim(),t)})(U),X=Object(c.a)(H,"236x"),J=Object(y.i)(q),Z=Object(d.a)(101,{component:0,element:981,feedback_type:i,objectId:z}),$=function(){S(!1),m(),R(!1)},ee=1===T&&O;return o.a.createElement(r.Fragment,null,o.a.createElement(b.c,{"data-test-id":"feedback-button",ref:L},o.a.createElement(u.a,{accessibilityLabel:l.a._("More information","accessibility label for overflow menu button"),bgColor:P?"transparent":"white",icon:"ellipsis",iconColor:"darkGray",iconSize:12,onClick:function(e){e.event;x?$():(S(!0),R(!0)),Z()},size:"sm"})),x&&o.a.createElement(b.r,null,o.a.createElement(b.k,{anchor:D,idealDirection:"right",onDismiss:$,positionRelativeToAnchor:!1,size:"md"},o.a.createElement(s.a,{ad_match_reason:M,bestPinImgSrc:Object(f.i)(_),board:N,feedbackData:n,feedbackType:i,hideDownload:J,isHomefeedContextualMenuTooltip:ee,onLinkClick:function(){x&&$()},onHide:$,pinCategory:B,pinDescription:Q,pinId:z,pinImgSrc:X,pinner:V,pinTitle:E,promoter:W,recommendationReason:K,reportPin:Object(a.a)({pin:_,viewParameter:I,viewType:j}),sourceInterest:Y,viewParameter:I,viewType:j}))))}t.default=Object(i.connect)((function(e){var t=e.experiences;return{isHomefeedContextualMenuTooltipExperience:t&&t.eligibleExperiences&&t.eligibleExperiences[1000116]&&501093===t.eligibleExperiences[1000116].experience_id}}),(function(e,t){var n=t.pin;return{hidePinFeedbackOverlay:function(){e(Object(m.c)(n.id))}}}))(O)},qdNM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleBlur=u,t.handleFocus=s,t.markForFocusLater=function(){a.push(document.activeElement)},t.returnFocus=function(){var e=null;try{return void(0!==a.length&&(e=a.pop()).focus())}catch(t){console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){a.length>0&&a.pop()},t.setupScopedFocus=function(e){c=e,window.addEventListener?(window.addEventListener("blur",u,!1),document.addEventListener("focus",s,!0)):(window.attachEvent("onBlur",u),document.attachEvent("onFocus",s))},t.teardownScopedFocus=function(){c=null,window.addEventListener?(window.removeEventListener("blur",u),document.removeEventListener("focus",s)):(window.detachEvent("onBlur",u),document.detachEvent("onFocus",s))};var r,o=n("RCVt"),i=(r=o)&&r.__esModule?r:{default:r};var a=[],c=null,l=!1;function u(){l=!0}function s(){if(l){if(l=!1,!c)return;setTimeout((function(){c.contains(document.activeElement)||((0,i.default)(c)[0]||c).focus()}),0)}}},rSK6:function(e,t,n){"use strict";var r=n("QJ2d"),o=n("JU/q");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){return e.length>32?"".concat(e.substring(0,32).trim(),"..."):e};t.a=function(e){var t=e.i18n,n=e.interpolateNamedTemplate;return{getLearnMoreUrl:function(e){switch(e){case 1:return r.a.settings.HELP_PROMOTED_PINS_RETARGETED_PIN_URL;case 2:case 3:return r.a.settings.HELP_PROMOTED_PINS_LOOKALIKE_TARGETING_URL;default:return r.a.settings.HELP_PROMOTED_PINS_URL}},getRecommendationDescription:function(e){var r=e.ad_match_reason,o=e.board,i=e.feedbackType,c=e.makeNavigateLink,l=e.pinner,u=e.promoter,s=e.recommendationReason,p=e.sourceInterest;switch(i){case"pfy":return t._("This Pin was inspired by your recent activity","Pin feedback reason");case"pfyBoard":var d=s.board,f=d.name,m=c("navigation",d.url,f);return n(t._("This Pin was inspired by your board {{ boardLink }}","Pin feedback - inspired by your board"),{boardLink:m});case"topic":var y=p.name,h=p.url_name,b=c("topicUrl","/topics/".concat(h),y);return n(t._("This Pin was inspired by {{ formattedTopic }}","Pin feedback"),{formattedTopic:b});case"followed":var g="/".concat(l.username),v=c("boardUrl",o.url,a(o.name)),w=c("pinnerUrl",g,a(l.full_name));return l.explicitly_followed_by_me?n(t._("This Pin is from {{ formattedPinner }}, a profile you follow","Pin feedback"),{formattedPinner:w}):n(t._("This Pin is from {{ formattedBoard }}, a board you follow","Pin feedback"),{formattedBoard:v});case"promoted":switch(r){case 1:case 2:case 3:return t._("This ad was personalized for you using info from one of our partners","Pin feedback");default:var O=u.full_name,_=u.username,E=c("promotedLink",_?"/"+_+"/":"/",O);return n(t._("{{ promoterLink }} paid to have this Pin show up where\n            you’d be more likely to notice it","Pin feedback"),{promoterLink:E})}default:return null}},getFeedbackType:function(e){var t=e.board,n=e.feedback,r=e.viewParameter,o=e.pin,i=o.promoter,a=o.is_downstream_promotion,c=o.recommendation_reason,l=e.pinner,u=n&&n.type;return i&&!a?"promoted":u||(c?"FOLLOWED_INTEREST"===c.reason?"topic":c.board?"pfyBoard":"pfy":t&&t.followed_by_me||l&&l.explicitly_followed_by_me?"followed":140===r||144===r||141===r||145===r||139===r||3173===r?"related":92===r?"default":3082===r?"newsHub":null)},getHidePinAction:function(e){var t,n,r=e.feedbackData,o=e.feedbackType,a=e.pinId,c=e.recommendationReasonId,l=e.pinFeedbackType,u=e.complaintReason,s=e.throughId,p="promoted"===o;switch(o){case"promoted":t="promotedComplaint";break;case"search":t="unrelatedSearchPin";break;case"related":t="relatedPinHide";break;case"newsHub":t="newsHubPinHide";break;default:t="complaint"}switch(o){case"search":n={query:r.query,pin_id:a};break;case"related":n={pin:a};break;case"newsHub":n={pinId:a,newsId:r.newsId};break;default:n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({complaint_reason:u||0,pin_id:a},c?{recommendation_reason_id:c}:{},{feedback_type:l||1,promoted:p},s?{through_id:s}:{})}return{action:t,actionOptions:n}},getUnfollowAction:function(e){var r=e.board,i=e.feedbackType,a=e.makeNavigateLink,c=e.pinner,l=e.sourceInterest;if("topic"===i){if(l){var u=l.id,s=l.name,p=l.url_name,d=a("topicUrl","/topics/".concat(p),s,!0);return{action:"unfollowTopic",actionOptions:{interest_id:u,interest_list:o.a},title:"",subTitle:n(t._("We’ll show you less Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:d})}}}else if("followed"===i){var f=r||{},m=f.id,y=f.name,h=f.url,b=c.explicitly_followed_by_me,g=c.full_name,v=c.username,w="/".concat(v);if(r&&c){var O=a("boardUrl",h,y,!0),_=a("pinnerUrl",w,g,!0);b?n(t._("You’ve unfollowed {{ formattedPinner }}’s Board {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedPinner:_,formattedBoard:O}):n(t._("You’ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedBoard:O});return{action:"unfollowBoard",actionOptions:{board_id:m},title:"",subTitle:b?n(t._("You unfollowed {{ formattedPinner }} and won’t see Pins they save anymore.","Confirmation text after unfollowing a user"),{formattedPinner:_}):n(t._("You unfollowed the board {{ formattedBoard }} and won’t see Pins saved to it anymore.","Confirmation text after unfollowing a board"),{formattedBoard:O})}}}return null}}}},rVpF:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n("GyhR");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=120;function a(e,t,n){e.current&&clearTimeout(e.current),e.current=null,n&&(t?e.current=setTimeout(n,t):n())}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,c=Object(r.useRef)(),l=Object(r.useRef)(e),u=o(Object(r.useState)(e?"active":"inactive"),2),s=u[0],p=u[1];return e!==l.current&&(e?"inactive"===s?(p("starting"),a(c,t,(function(){p("active")}))):"ending"===s&&(p("active"),a(c)):"active"===s?(p("ending"),a(c,n,(function(){p("inactive")}))):"starting"===s&&(p("inactive"),a(c))),Object(r.useEffect)((function(){return function(){return a(c)}}),[]),l.current=e,s}},s3m5:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("GyhR"),o=n.n(r),i=n("Qo1m"),a=n("yXM0"),c=n("+U6O"),l=24;function u(e){var t=e.duration;return o.a.createElement(c.c,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:l,justifyContent:"center",paddingX:2,shape:"pill"},o.a.createElement(c.n,{accessibilityLabel:i.a._("Video camera icon","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),o.a.createElement(c.c,{marginLeft:1},o.a.createElement(c.K,{color:"white",size:"xs",truncate:!0},Object(a.a)(t))))}},vl7u:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return d}));var r=n("D+W/"),o=n("q579"),i={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function a(e){return(e||"").trim().replace(/\s+/g," ")}function c(e){var t=e.type,n=e.term,r=void 0===n?"":n,o=e.index;switch(t){case i.USER_INPUT:case i.AUTO_COMPLETE_HASHTAG:case i.TYPO_AUTO_CORRECT_ORIGINAL:return"".concat(r,"|").concat(t);case i.AUTO_COMPLETE_DEFAULT:return"".concat(r,"|autocomplete|").concat(o);case i.AUTO_COMPLETE_RECENT_SEARCH:return"".concat(r,"|recentsearch|").concat(o);case i.AUTO_COMPLETE_TRENDING:return"".concat(r,"|trending|").concat(o);case i.AUTO_COMPLETE_RECOMMENDED_SEARCH:return"".concat(r,"|recommended|").concat(o);case i.SEARCH_GUIDE:return"".concat(r,"|guide|word|").concat(o);default:return""}}function l(e){var t=e.queryStates;return 0===t.length?"":"&"+o.a.getQueryStringFromObject({term_meta:t.map((function(e){return c(e)}))})}function u(e){if(e){var t=e.trim().split(/\s+/);return t.find((function(e){return r.a.SEARCH_FILTER_CONJUNCTIONS.includes(e.toLowerCase())}))?[e]:t}return[]}function s(e){var t=e.type,n=e.query,r=void 0===n?"":n,o=e.index;switch(t){case i.USER_INPUT:case i.AUTO_COMPLETE_HASHTAG:case i.TYPO_AUTO_CORRECT_ORIGINAL:return u(r).map((function(e){return{index:o,term:e,type:t}}));case i.AUTO_COMPLETE_RECENT_SEARCH:case i.AUTO_COMPLETE_RECOMMENDED_SEARCH:case i.AUTO_COMPLETE_TRENDING:case i.AUTO_COMPLETE_DEFAULT:return u(r).map((function(e){return{term:e,type:t,index:o}}));default:return[]}}function p(e){var t=e.query,n=e.rs,r=e.scope,i=e.guideAdded,a=e.filters,c=e.termMeta,l=e.user;if(!t)return"/";var u={q:t,rs:n,term_meta:c};if(a&&(u.filters=a),l&&(u.user=l),i&&i.term&&(u.add_refine="".concat(i.term,"|guide|word|").concat(i.index)),window.location.pathname.startsWith("/explore"))return"/search/pins/?".concat(o.a.getQueryStringFromObject(u));var s=r;return["pins","buyable_pins","my_pins","boards","users"].includes(s)||(s="pins"),s?"/search/".concat(s,"/?").concat(o.a.getQueryStringFromObject(u)):"".concat(window.location.pathname,"?").concat(o.a.getQueryStringFromObject(u))}function d(e,t,n,r){var i=o.a.getQueryStringParams();i.add_refine&&(i["term_meta[]"]?i["term_meta[]"].push(i.add_refine):i["term_meta[]"]=[i.add_refine]);var a=i["term_meta[]"];return p({query:e,rs:r,termMeta:"string"==typeof a?[a]:a,guideAdded:{term:t,index:n}})}},wSOZ:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("wxfF"),c=n("Kb0Y"),l=n("rSK6"),u=n("Qo1m"),s=n("iJ35"),p=n("E/Qu"),d=n("9Y9K"),f=n("JU/q"),m=n("Irlq"),y=n("dsNV"),h=n("NmcB"),b=n("JsRk"),g=n("aaO7"),v=n("2YES"),w=n("+U6O"),O=n("nZV1");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={color:"white",textDecorationColor:"white"},x=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=C(t).call(this,e),n=!i||"object"!==_(i)&&"function"!=typeof i?I(r):i,j(I(I(n)),"getRecommendationDescription",(function(){var e=n.props,t=e.ad_match_reason,r=e.board,o=e.feedbackType,i=e.pinner,a=e.promoter,c=e.recommendationReason,l=e.sourceInterest;return n.feedbackHelpers.getRecommendationDescription({ad_match_reason:t,board:r,feedbackType:o,makeNavigateLink:n.makeNavigateLink,pinner:i,promoter:a,recommendationReason:c,sourceInterest:l})})),j(I(I(n)),"getRecommendationDescriptionImage",(function(){var e,t,r,i=n.props,a=i.board,c=i.feedbackType,l=i.pinner,u=i.recommendationReason;return"followed"!==c&&"pfyBoard"!==c?null:(l&&l.explicitly_followed_by_me?(e=l.image_small_url,t="50%",r="/".concat(l.username)):a&&a.image_thumbnail_url&&(e=a.image_thumbnail_url,t="4px",r=u&&u.board&&u.board.url||a.url),e?o.a.createElement(w.c,{marginStart:3,flex:"none",dangerouslySetInlineStyle:{__style:{borderRadius:t}},overflow:"hidden"},o.a.createElement(w.P,{onTouch:function(){return n.props.router.push(r)}},o.a.createElement(w.u,{width:40,height:40,wash:!0},o.a.createElement(w.p,{src:e,naturalHeight:1,naturalWidth:1,alt:"",fit:"cover"})))):null)})),j(I(I(n)),"getUnfollowAction",(function(){var e=n.props,t=e.board,r=e.feedbackType,o=e.pinner,i=e.sourceInterest;return n.feedbackHelpers.getUnfollowAction({board:t,feedbackType:r,makeNavigateLink:n.makeNavigateLink,pinner:o,sourceInterest:i})})),j(I(I(n)),"getUndoText",(function(e){return"unfollowPinner"===e||"unfollowBoard"===e?u.a._("Follow again","Caption for button to undo a unfollowing of a topic"):""})),j(I(I(n)),"generateUndoHideCallback",(function(e,t){return function(){var r=n.props,o=r.dispatch,i=r.pinId,a=r.viewType,c=r.viewParameter,l=S({},e,{undo:!0}),u=t;"unfollowPinner"===t?u="followPinner":"unfollowBoard"===t?u="followBoard":"unfollowTopic"===t&&(u="followTopic"),Object(O.a)(u,l),o(Object(g.b)(i)),Object(h.a)(101,{component:0,element:11181,view:a,viewParameter:c})}})),j(I(I(n)),"feedbackHelpers",Object(l.a)({i18n:u.a,interpolateNamedTemplate:m.b})),j(I(I(n)),"makeNavigateLink",(function(e,t,r,i){var a=S({display:"inline"},i?k:{});return o.a.createElement(s.b,{className:"underlineLink",key:e,to:t,onClick:n.props.onLinkClick},o.a.createElement(w.c,{dangerouslySetInlineStyle:{__style:a}},r))})),j(I(I(n)),"reportPinOption",(function(){return{action:"reportPin",elementType:974,text:u.a._("Report Pin","Report a pin in the dropdown"),description:u.a._("This goes against Pinterest's community guidelines","Description for the report pin option"),callback:n.props.reportPin}})),j(I(I(n)),"hidePinOption",(function(e){var t=n.props,r=t.feedbackData,o=t.feedbackType,i=t.pinId,a=t.recommendationReason,c="search"===o?973:982,l=n.feedbackHelpers.getHidePinAction({feedbackData:r,feedbackType:o,pinId:i,recommendationReasonId:a&&a.reason&&y.ReasonToChoose[a.reason],pinFeedbackType:"pfy"===o?4:10,throughId:a&&n.getThroughId()}),s=l.action,p=l.actionOptions,d=u.a._("Hide Pin","message displayed in pin feedback list");return{action:s,actionOptions:p,feedbackText:n.pinHiddenFeedbackText(e),text:d,description:u.a._("See fewer Pins like this","Description for the hide pin option"),elementType:c}})),j(I(I(n)),"stopRecommendationOption",(function(){var e=n.props,t=e.feedbackData,r=e.feedbackType,o=e.pinId,i=e.recommendationReason,a=i.board,c=i.reason,l=c&&y.ReasonToChoose[c],s=i&&n.getThroughId(),p="pfyBoard"===r,d=n.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:r,pinId:o,recommendationReasonId:l,pinFeedbackType:p?2:4,throughId:s}),f=d.action,h=d.actionOptions,b=!!a&&n.makeNavigateLink("boardUrl",a.url,a.name,!0);return{action:f,actionOptions:h,feedbackText:{subTitle:p&&a?Object(m.b)(u.a._("We won't show you Pins inspired by your board {{ formattedBoard }} anymore.","Primary caption displayed in pin feedback list to unfollow a board"),{formattedBoard:b}):u.a._("Got it! We won't show you Pins like this in the future.","message displayed after stopping recommendations from a pin")},text:p&&a?Object(m.b)(u.a._("Stop seeing Pins inspired by {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:a.name}):u.a._("See fewer Pins like this","Feedback option to stop recommendations inspired by this Pin"),elementType:284}})),j(I(I(n)),"unfollowBoardOption",(function(){var e=n.props.board,t=n.makeNavigateLink("boardUrl",e.url,e.name,!0),r=Object(m.b)(u.a._("Unfollow {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:e.name}),o=Object(m.b)(u.a._("Got it! You unfollowed {{ formattedBoard }} and won't see Pins saved to it in the future.","Confirmation text after unfollowing a board"),{formattedBoard:t});return{action:"unfollowBoard",actionOptions:{board_id:e.id},feedbackText:{title:"",subTitle:o},text:r,description:Object(m.b)(u.a._('Stop seeing Pins from the board "{{ boardName }}"',"Secondary caption displayed in pin feedback list to unfollow a board"),{boardName:e.name}),elementType:10614}})),j(I(I(n)),"unfollowTopicOption",(function(){var e=n.props.sourceInterest;if(e){var t=e.id,r=e.name,o=e.url_name,i="/topics/".concat(o),a=n.makeNavigateLink("topicUrl",i,r,!0),c=Object(m.b)(u.a._("See fewer Pins from {{ topicName }}","Primary caption displayed in pin feedback list to unfollow a topic"),{topicName:r}),l=Object(m.b)(u.a._("We'll show you fewer Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:a});return{action:"unfollowTopic",actionOptions:{interest_id:t,interest_list:f.a},feedbackText:{title:"",subTitle:l},text:c,description:Object(m.b)(u.a._('Stop seeing Pins from the topic "{{ topicName }}"',"Secondary caption displayed in pin feedback list to unfollow a topic"),{topicName:e.name}),elementType:976}}return null})),j(I(I(n)),"unfollowUserOption",(function(){var e=n.props.pinner,t=e.id,r=e.username,o=e.full_name,i="/".concat(r),a=n.makeNavigateLink("pinnerUrl",i,o,!0);return{action:"unfollowPinner",actionOptions:{user_id:t},feedbackText:{title:"",subTitle:Object(m.b)(u.a._("Got it! You unfollowed {{ formattedUser }} and won't see Pins they save in the future.","Confirmation text after unfollowing a user"),{formattedUser:a})},text:Object(m.b)(u.a._("Unfollow {{ fullName }}","Primary caption displayed in pin feedback list to unfollow a user"),{fullName:o}),description:u.a._("Stop seeing all their Pins","Secondary caption displayed in pin feedback list to unfollow a user"),elementType:10640}})),j(I(I(n)),"downloadPinOption",(function(){return{action:"downloadPin",text:u.a._("Download image","Button to download Pin image"),elementType:10836}})),j(I(I(n)),"_pinFeedbackText",(function(){var e=n.props,t=e.location,r=e.feedbackType,o=e.hideDownload,i=e.pinner,a="followed"===n.props.feedbackType,c=t.pathname.includes("following"),l=(a||"topic"===r)&&!c,s=n.hidePinOption(l),p=n.reportPinOption(),d="promoted"!==r&&!o;switch(r){case"followed":var f=c,m=!f&&n.getRecommendationDescription(),y=i.explicitly_followed_by_me?n.unfollowUserOption():n.unfollowBoardOption();return S({},m?{description:m}:{},{options:[s].concat(E(l||f?[y]:[]),E("promoted"!==r?[n.downloadPinOption()]:[]),[p])});case"promoted":var h=n.props.ad_match_reason,b=[s,{link:n.feedbackHelpers.getLearnMoreUrl(h),text:u.a._("Why am I seeing this ad?","Link to promoted pins explanation page")},p];return{description:n.getRecommendationDescription(),options:b};case"topic":var g=n.unfollowTopicOption(),v=[s].concat(E(l&&g?[g]:[]),E(d?[n.downloadPinOption()]:[]),[p]);return{description:n.getRecommendationDescription(),options:v};case"pfy":case"pfyBoard":var w=[s].concat(E("pfyBoard"===r?[n.stopRecommendationOption()]:[]),E(d?[n.downloadPinOption()]:[]),[p]);return{description:n.getRecommendationDescription(),options:w};default:var O=[s].concat(E(d?[n.downloadPinOption()]:[]),[p]);return{description:n.getRecommendationDescription(),options:O}}})),j(I(I(n)),"handleSecondaryFeedbackItemClick",(function(e,t){var r=n.props,o=r.feedbackData,i=r.feedbackType,a=r.pinId,c=r.onHide,l=r.recommendationReason,u=l&&l.reason&&y.ReasonToChoose[l.reason],s=l&&n.getThroughId(),p=n.feedbackHelpers.getHidePinAction({feedbackData:o,feedbackType:i,pinId:a,recommendationReasonId:u,throughId:s,complaintReason:e}),d=p.action,f=p.actionOptions;n.handleClickLogging(t),Object(O.a)(d,f),c()})),j(I(I(n)),"pinHiddenFeedbackText",(function(e){var t=e?null:n.getUnfollowAction();return t?{title:"",subTitle:n.getRecommendationDescription(),unfollow:t}:{title:"",subTitle:u.a._("Got it! We won't show you this Pin in the future.","message displayed after hiding a pin")}})),j(I(I(n)),"renderSecondaryFeedbackItem",(function(e){var t=e.text,r=e.reason,i=e.elementType;return o.a.createElement(w.P,{onTouch:function(){return n.handleSecondaryFeedbackItemClick(r,i)},fullWidth:!1,key:t},o.a.createElement(c.a,{text:t,compact:!0}))})),j(I(I(n)),"renderSecondaryFeedback",(function(){var e="promoted"===n.props.feedbackType?[{text:u.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:u.a._("Seen Pin too many times",""),reason:3,elementType:11172},{text:u.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898}]:[{text:u.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:u.a._("Not in a language I understand",""),reason:15,elementType:11178},{text:u.a._("Seen Pin too many times",""),reason:3,elementType:295},{text:u.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898},{text:u.a._("Other",""),reason:8,elementType:11179}];return o.a.createElement(w.c,{overflow:"hidden",width:"100%",shape:"rounded"},o.a.createElement(w.c,{paddingX:4,paddingY:4},o.a.createElement(w.K,{color:"darkGray",size:"sm"},u.a._("Got a moment? Tell us why.","Title of follow up question after negative Pin feedback"))),o.a.createElement(w.j,null),o.a.createElement(w.c,{paddingY:2},e.map(n.renderSecondaryFeedbackItem)))}));var a=n._pinFeedbackText();return n.state={pinFeedbackConfig:a,showSecondary:!1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(r=[{key:"onPinFeedbackActionButtonClick",value:function(e,t,n){e.stopPropagation(),t.auxData?this.handleClickLogging(t.elementType,t.auxData):this.handleClickLogging(t.elementType),Object(O.a)(t.action,t.actionOptions,n)}},{key:"onPinHide",value:function(e,t,n,r){var o=this.props,i=o.dispatch,a=o.onHide,c=o.pinId;i(t&&n&&r?Object(g.e)(c,e,this.generateUndoHideCallback(n,r),this.getUndoText(r)):Object(g.a)(c,e)),!n||n.promoted||10!==n.feedback_type&&4!==n.feedback_type?a():(this.setState({showSecondary:!0}),i(Object(g.d)(c)))}},{key:"getThroughId",value:function(){var e=this.props.recommendationReason;return e.reason_id?e.reason_id:e.board?e.board.id:e.pin?e.pin.id:e.interest?e.interest.id:""}},{key:"getComponentType",value:function(){switch(this.props.feedbackType){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}},{key:"makeStrongText",value:function(e,t){return o.a.createElement("strong",{key:e},t)}},{key:"handleClickLogging",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.viewParameter,o=n.viewType;Object(h.a)(101,S({},t,{view:o,viewParameter:r,element:e,component:this.getComponentType()}))}},{key:"renderButtons",value:function(){for(var e=this,t=this.props.hideDownload,n=this.state.pinFeedbackConfig.options,r=[],i=n.length,l=function(i){var l=n[i],d=O.b.includes(l.action),f=l.callback?l.callback:function(){return e.onPinHide(l.feedbackText,d,l.actionOptions,l.action)};if("downloadPin"!==l.action)r.push(o.a.createElement(w.c,{key:i},l.link?o.a.createElement(s.b,{external:!0,to:l.link},o.a.createElement(c.a,{text:l.text,compact:!0})):o.a.createElement(w.P,{onTouch:function(t){var n=t.event;return e.onPinFeedbackActionButtonClick(n,l,f)},fullWidth:!1},o.a.createElement(c.a,{text:l.text,compact:!0}))));else if(!t&&"undefined"!=typeof window&&"windows"!==Object(p.b)(window)){var m=e.props,y=m.bestPinImgSrc,h=m.pinTitle,b=m.pinDescription,g=m.pinCategory;r.push(o.a.createElement(w.c,{key:i},o.a.createElement(a.a,{imgSrc:y,filename:h||b,category:g},(function(e){return o.a.createElement(w.P,{onTouch:e,fullWidth:!1},o.a.createElement(c.a,{text:u.a._("Download image","Button to download Pin image"),compact:!0}))}))))}},d=0;d<i;d+=1)l(d);return r}},{key:"render",value:function(){var e=this.state,t=e.pinFeedbackConfig,n=e.showSecondary,r=t.description,i=this.getRecommendationDescriptionImage();return o.a.createElement(w.c,{overflow:"hidden",width:"100%"},n?this.renderSecondaryFeedback():o.a.createElement(w.c,null,r&&o.a.createElement(w.c,null,o.a.createElement(w.c,{padding:4,display:"flex",alignItems:"center"},o.a.createElement(w.c,{maxHeight:56,overflow:"hidden"},o.a.createElement(w.K,{color:"darkGray",size:"sm",overflow:"normal"},r)),i),o.a.createElement(w.j,null)),o.a.createElement(w.c,{marginTop:2,marginBottom:3},this.renderButtons())))}}])&&P(n.prototype,r),i&&P(n,i),t}(o.a.Component);t.a=Object(d.compose)(Object(i.connect)(),v.e,b.withRouter)(x)},wndL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("GyhR"),c=y(a),l=y(n("hvnN")),u=m(n("qdNM")),s=y(n("AsWu")),p=m(n("zJLp")),d=m(n("ZyOe")),f=y(n("fGtH"));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var h={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},b=9,g=27,v=0,w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,o=e.htmlOpenClassName,i=e.bodyOpenClassName;i&&d.remove(document.body,i),o&&d.remove(document.getElementsByTagName("html")[0],o),r&&v>0&&0===(v-=1)&&p.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(u.returnFocus(),u.teardownScopedFocus()):u.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose()},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(u.setupScopedFocus(n.node),u.markForFocusLater()),n.setState({isOpen:!0},(function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen()})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus()},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){e.keyCode===b&&(0,s.default)(n.content,e),n.props.shouldCloseOnEsc&&e.keyCode===g&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===(void 0===t?"undefined":o(t))?t:{base:h[e],afterOpen:h[e]+"--after-open",beforeClose:h[e]+"--before-close"},i=r.base;return n.state.afterOpen&&(i=i+" "+r.afterOpen),n.state.beforeClose&&(i=i+" "+r.beforeClose),"string"==typeof t&&t?i+" "+t:i},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,o=e.bodyOpenClassName;o&&d.add(document.body,o),r&&d.add(document.getElementsByTagName("html")[0],r),n&&(v+=1,p.hide(t))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,o=e.overlayClassName,i=e.defaultStyles,a=n?{}:i.content,l=o?{}:i.overlay;return this.shouldBeClosed()?null:c.default.createElement("div",{ref:this.setOverlayRef,className:this.buildClassName("overlay",o),style:r({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},c.default.createElement("div",r({id:t,ref:this.setContentRef,style:r({},a,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",this.props.aria||{}),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),this.props.children))}}]),t}(a.Component);w.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},w.propTypes={isOpen:l.default.bool.isRequired,defaultStyles:l.default.shape({content:l.default.object,overlay:l.default.object}),style:l.default.shape({content:l.default.object,overlay:l.default.object}),className:l.default.oneOfType([l.default.string,l.default.object]),overlayClassName:l.default.oneOfType([l.default.string,l.default.object]),bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,ariaHideApp:l.default.bool,appElement:l.default.instanceOf(f.default),onAfterOpen:l.default.func,onAfterClose:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,role:l.default.string,contentLabel:l.default.string,aria:l.default.object,data:l.default.object,children:l.default.node,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,testId:l.default.string},t.default=w,e.exports=t.default},wxfF:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("GyhR"),o=n("ggpB"),i=n("+U6O");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return r=this,i=(e=l(t)).call.apply(e,[this].concat(u)),n=!i||"object"!==a(i)&&"function"!=typeof i?s(r):i,p(s(s(n)),"state",{href:void 0}),p(s(s(n)),"onEvent",(function(){if("undefined"!=typeof window){var e=n.props,t=e.imgSrc,r=e.isUnauth,i=e.category;null==n.state.href&&fetch(t,{headers:new Headers({Origin:location.origin}),mode:"cors"}).then((function(e){return e.blob()})).then((function(e){n.setState({href:window.URL.createObjectURL(e)},(function(){n.imageDownload&&n.imageDownload.click()}))})).catch((function(){return n.setState({href:n.DOWNLOAD_ERROR})})),Object(o.a)("web.".concat(r?"unauth":"auth",".download.click.").concat(i||"no_category"))}})),p(s(s(n)),"DOWNLOAD_ERROR","error"),n}var n,d,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(d=[{key:"render",value:function(){var e=this,t=this.props.children,n=this.props.filename,o=this.state.href,a=null!=o&&o!==this.DOWNLOAD_ERROR;return r.createElement(r.Fragment,null,t(this.onEvent),a&&r.createElement(i.c,{display:"none"},r.createElement("a",{ref:function(t){return e.imageDownload=t},tabIndex:-1,download:n&&n.replace(".","_"),href:o})))}}])&&c(n.prototype,d),f&&c(n,f),t}(r.Component)},xP02:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("+U6O"),a=136,c={__style:{opacity:.5}};function l(e){return e.isHorizontalDesign?o.a.createElement(i.c,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},o.a.createElement(i.c,{dangerouslySetInlineStyle:c,color:"midnight",height:"100%",width:"100%",flex:"grow"}),o.a.createElement(i.c,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.c,{dangerouslySetInlineStyle:c,color:"olive",width:"100%",flex:"grow"}),o.a.createElement(i.c,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.c,{dangerouslySetInlineStyle:c,color:"maroon",width:"100%",flex:"grow"})):o.a.createElement(i.c,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},o.a.createElement(i.c,{dangerouslySetInlineStyle:c,color:"midnight",height:"100%",flex:"grow"}),o.a.createElement(i.c,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.c,{display:"flex",height:a,direction:"column",flex:"grow"},o.a.createElement(i.c,{dangerouslySetInlineStyle:c,color:"olive",width:"100%",flex:"grow"}),o.a.createElement(i.c,{color:"white",height:"2px",flex:"none"}),o.a.createElement(i.c,{dangerouslySetInlineStyle:c,color:"maroon",width:"100%",flex:"grow"})))}var u=n("Qo1m");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={__style:{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.43) 0%, rgba(0,0,0,0) 60%)"}},g=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return r=this,a=(e=f(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==s(a)&&"function"!=typeof a?y(r):a,h(y(y(n)),"state",{isLoaded:[!1,!1,!1],isMounted:!1}),h(y(y(n)),"getImageArray",(function(){var e=n.props,t=e.userPins,r=e.showcase,o=[];return t&&0!==t.length?(r&&0!==r.length?r&&1===r.length?o=r.filter((function(e){return"board"===e.type}))[0].images["550x"].map((function(e){return e.url})):r&&(o=r.filter((function(e){return"board"===e.type})).map((function(e){return e.image_cover_url}))):o=t.map((function(e){return(e.images["136x136"]||e.images["236x"]||e.images["736x"]).url})),o):o})),h(y(y(n)),"getImage",(function(e,t){var r={transition:"opacity 500ms",opacity:n.state.isLoaded[t]?1:0};return o.a.createElement(i.c,{dangerouslySetInlineStyle:{__style:r},color:"white",height:"100%",width:"100%"},!!e&&o.a.createElement(i.p,{naturalHeight:1,src:e,fit:"cover",alt:u.a._("user's pin","image of one of a user's pins"),naturalWidth:1,color:"lightGray",onLoad:function(){return n.handleLoad(t)}}))})),h(y(y(n)),"handleLoad",(function(e){var t=n.state,r=t.isLoaded,o=t.isMounted,i=p(r);i[e]=!0,o&&n.setState({isLoaded:i})})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setState({isMounted:!0}),this.getImageArray()}},{key:"render",value:function(){var e=this.props.isHorizontalDesign,t=this.getImageArray(),n=null;return n=1===t.length?o.a.createElement(i.c,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0)):2===t.length?o.a.createElement(i.c,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0),o.a.createElement(i.c,{color:"white",width:"1px",flex:"none"}),this.getImage(t[1],1)):e?o.a.createElement(i.c,{height:"100%",width:"100%",display:"flex",direction:"row"},o.a.createElement(i.c,{height:"100%",width:"100%"},this.getImage(t[0],0)),o.a.createElement(i.c,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.c,{height:"100%",width:"100%"},this.getImage(t[1],1)),o.a.createElement(i.c,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.c,{height:"100%",width:"100%"},this.getImage(t[2],2))):o.a.createElement(i.c,{height:"100%",width:"100%",display:"flex",direction:"row"},o.a.createElement(i.c,{height:"100%",flex:"grow"},this.getImage(t[0],0)),o.a.createElement(i.c,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.c,{display:"flex",height:136,direction:"column",flex:"grow"},o.a.createElement(i.c,{width:"100%",flex:"grow"},this.getImage(t[1],1)),o.a.createElement(i.c,{color:"white",height:"2px",flex:"none"}),o.a.createElement(i.c,{width:"100%",flex:"grow"},this.getImage(t[2],2)))),o.a.createElement(i.c,{height:136,display:"flex",direction:"column"},o.a.createElement(i.c,{width:"100%",position:"relative",flex:"grow"},o.a.createElement(l,{isHorizontalDesign:e}),n,o.a.createElement(i.c,{dangerouslySetInlineStyle:b,height:"100%",width:"100%",position:"absolute",top:!0,left:!0})))}}])&&d(n.prototype,r),a&&d(n,a),t}(r.PureComponent),v=n("iJ35"),w=n("NmcB");function O(e,t){Object(w.a)(101,{view:e,viewParameter:t,component:13406,element:11373})}var _=function(e){var t=e.avatarUrl,n=e.isVerified,r=e.isHorizontalDesign,a=e.url,c=e.userFullName,l=e.viewParameter,u=e.viewType,s=r?80:86;return o.a.createElement(i.c,{dangerouslySetInlineStyle:{__style:{border:"2px white solid",marginTop:r?-58:-64,marginLeft:r?-6:0,zIndex:1}},display:"flex",flex:"none",shape:"circle"},o.a.createElement(i.c,{flex:"none",height:s,width:s},o.a.createElement(v.b,{onClick:O(u,l),to:a,stopPropagation:!0},o.a.createElement(i.a,{name:c,src:t,verified:n}))))},E=n("LCmp"),S=n("b7z0");function P(e){var t=e.text,n=e.singleLineMaxCharacters,r=e.isBold,i=e.isHorizontalDesign,a=e.numLines*n,c=Object(E.a)(t,a);return r?o.a.createElement(S.b,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"semibold"},c):o.a.createElement(S.b,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"normal",color:i?"darkGray":"gray"},c)}var C=18;function T(e){var t=e.description,n=e.domainUrl,r=e.isHorizontalDesign,a=e.userFullName,c=t||n,l={placeholder:{__style:{transition:"opacity 200ms",opacity:c?0:1}},subtitle:{__style:{transition:"opacity 200ms",opacity:c?1:0}}};return o.a.createElement(i.c,{position:"relative",width:"100%",marginTop:r?4:3,marginBottom:3,alignItems:r?"start":"center",display:"flex",direction:"column"},o.a.createElement(i.c,{height:C,width:"100%"},o.a.createElement(S.b,{align:r?"left":"center",truncate:!0,size:r?"lg":"md",weight:r?"bold":"semibold"},a)),o.a.createElement(i.c,{marginTop:2,overflow:"hidden",position:"relative",width:"100%"},o.a.createElement(i.c,{alignItems:"center",dangerouslySetInlineStyle:l.placeholder,direction:"column",display:"flex",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"},o.a.createElement(i.c,{color:"lightGray",shape:"pill",width:180,flex:"grow"}),o.a.createElement(i.c,{height:6,flex:"none"}),o.a.createElement(i.c,{color:"lightGray",shape:"pill",width:140,flex:"grow"})),r&&!!n&&o.a.createElement(i.c,{dangerouslySetInlineStyle:l.subtitle,width:"100%",height:"100%",marginTop:-1},o.a.createElement(P,{numLines:2,isBold:!0,isHorizontalDesign:r,singleLineMaxCharacters:36,text:n})),r&&!!t&&o.a.createElement(i.c,{dangerouslySetInlineStyle:l.subtitle,width:"100%",height:"100%",marginTop:2},o.a.createElement(P,{isHorizontalDesign:r,numLines:2,singleLineMaxCharacters:36,text:t})),!r&&!!c&&o.a.createElement(i.c,{dangerouslySetInlineStyle:l.subtitle,width:"100%",height:"100%"},o.a.createElement(P,{isHorizontalDesign:r,numLines:2,singleLineMaxCharacters:27,text:c}))))}var I=n("Ivf5"),j=n("z/1d"),k=n("Irlq");function x(e){var t=e.followText,n=e.followerCount,r=e.isHorizontalDesign,a=e.showFollowers,c=e.userFollowed;return a?Object(k.b)(u.a._("{{ followCount }} {{ followText }}"),{followCount:o.a.createElement(i.c,{dangerouslySetInlineStyle:{__style:c?null:{opacity:.75}},"data-test-id":"followCount",display:"inlineBlock",key:"followCount",marginRight:1},o.a.createElement(S.b,{color:c?"gray":"white",size:r?"sm":"md",align:"center",weight:"semibold"},o.a.createElement(j.a,{value:n||0,shortform:!0,shortformMaximumFractionDigits:0}))),followText:o.a.createElement(i.c,{"data-test-id":"followText",display:"inlineBlock",key:"followText"},o.a.createElement(S.b,{weight:"bold",color:c?"darkGray":"white",size:r?"sm":"md",overflow:"normal",align:"center"},t))}):o.a.createElement(i.c,{"data-test-id":"followText",key:"followText"},o.a.createElement(S.b,{weight:"semibold",color:c?"darkGray":"white",size:r?"sm":"md",overflow:"normal",align:"center"},t))}var R=n("KCDi"),A=n("KsVg"),D=n("9Y9K"),L=n("Ii6Q");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return r=this,i=(e=B(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==M(i)&&"function"!=typeof i?F(r):i,z(F(F(n)),"handleClick",(function(){var e=n.props,t=e.userFollowed,r=e.viewParameter,o=e.viewType;t?(n.unfollow(),Object(w.a)(46,{view:o,viewParameter:r,component:13406,element:11372})):(n.follow(),Object(w.a)(45,{view:o,viewParameter:r,component:13406,element:11372}))})),z(F(F(n)),"follow",(function(){var e=n.props;(0,e.follow)(e.id),n.showConfirmation()})),z(F(F(n)),"showConfirmation",(function(){var e=n.props,t=e.fullName,r=e.hideAllToasts,i=e.imageUrl,a=e.profileUrl,c=e.showToast;r(),c((function(e){var n=e.onHide;return o.a.createElement(R.a,{onHide:n,text:[u.a._("Now following","text that comes before a board/user name in toast"),t],href:a,imageUrl:i})}))})),z(F(F(n)),"unfollow",(function(){var e=n.props,t=e.id;(0,e.unfollow)(t)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.followerCount,n=e.isHorizontalDesign,r=e.showFollowerCount,a=e.userFollowed,c=r&&0!==t,l=this.props.userFollowed?u.a._("Following","User follow button"):u.a._("Follow","User follow button");return o.a.createElement(i.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:n?"-22px":0}},display:"flex",justifyContent:"center",position:"relative"},o.a.createElement(i.P,{onTouch:this.handleClick,shape:"pill"},o.a.createElement(i.c,{alignItems:"center",color:a?"lightGray":"red",direction:"row",display:"flex",justifyContent:"center",paddingX:n?5:6,paddingY:n?3:4,shape:"pill"},o.a.createElement(x,{followerCount:t,followText:l,isHorizontalDesign:n,showFollowers:c,userFollowed:a}))))}}])&&N(n.prototype,r),a&&N(n,a),t}(r.PureComponent),G=Object(D.compose)(A.a,Object(I.connect)((function(e,t){var n=t.id,r=(e.users||{})[n];return{userFollowed:!!r&&r.explicitly_followed_by_me}}),(function(e){return{follow:function(t){return e(Object(L.a)(t))},unfollow:function(t){return e(Object(L.b)(t))}}})))(H);function V(e){var t=e.avatarUrl,n=e.description,r=e.domainUrl,a=e.followerCount,c=e.id,l=e.isCreator,u=e.isHorizontalDesign,s=e.isVerified,p=e.userFullName,d=e.username,f=e.viewParameter,m=e.viewType,y=function(e){return"/".concat(e)}(d);return o.a.createElement(i.c,{alignItems:u?"start":"center",display:"flex",direction:"column",paddingX:u?5:6,paddingY:u?3:4,marginTop:2,width:"100%"},o.a.createElement(_,{avatarUrl:t,isHorizontalDesign:u,isVerified:s,url:y,userFullName:p,viewType:m,viewParameter:f}),u&&o.a.createElement(i.c,{position:"relative",width:"100%"},o.a.createElement(i.c,{display:"flex",marginTop:-2,marginRight:-2,position:"absolute",right:!0,top:!0},o.a.createElement(G,{fullName:p,followerCount:a,id:c,imageUrl:t,isHorizontalDesign:u,profileUrl:y,showFollowerCount:l})),o.a.createElement(i.c,{width:"100%",display:"flex",left:!0,marginTop:1},o.a.createElement(T,{description:n,domainUrl:r,isHorizontalDesign:u,userFullName:p}))),!u&&o.a.createElement(i.c,{width:"100%"},o.a.createElement(T,{userFullName:p,domainUrl:r,description:n,isHorizontalDesign:u}),o.a.createElement(i.c,{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(G,{followerCount:a,fullName:p,id:c,imageUrl:t,isHorizontalDesign:u,profileUrl:y,showFollowerCount:l}))))}var W=n("dsfX"),K=24;function Y(e){var t=e.anchor,n=e.children,r=e.isHorizontalDesign;if(!t)return null;var a=r?320:236,c=t.getBoundingClientRect(),l=c.left,u=c.top,s=c.width,p=c.height,d=l+window.pageXOffset,f=u+window.pageYOffset,m=d+s+a+K/2>window.innerWidth,y={left:m?d:d+s,top:f+p/2,zIndex:W.a},h={borderRadius:21,boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)",left:m?-K/2-a:K/2,top:-a/2-44},b={top:-K/2,left:-K/2,fill:"white"},g=m?"M0 0 L12 12 L0 24":"M24 0 L12 12 L24 24";return o.a.createElement(i.c,{position:"absolute",dangerouslySetInlineStyle:{__style:y}},o.a.createElement(i.c,{position:"absolute",color:"white",dangerouslySetInlineStyle:{__style:h},width:a,overflow:"hidden"},n),o.a.createElement(i.c,{position:"absolute",dangerouslySetInlineStyle:{__style:b}},o.a.createElement("svg",{width:K,height:K},o.a.createElement("path",{d:g}))))}var q=n("ePT2"),Q=n("IGno"),X=n("kIql"),J=n("k9eC"),Z=n("2YES");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=300,ce=150,le=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=ne(t).call(this,e),n=!i||"object"!==$(i)&&"function"!=typeof i?oe(r):i,ie(oe(oe(n)),"anchorRef",o.a.createRef()),ie(oe(oe(n)),"loadUser",(function(){var e=n.props.username,t=n.state.isMounted;e&&(q.a.create("UserResource",{username:e,field_set_key:"profile"}).callGet().then((function(e){t&&n.setState({detailedUser:e.resource_response.data})})),q.a.create("UserPinsResource",{username:e,page_size:3,field_set_key:"grid_item",isPrefetch:!1}).callGet().then((function(e){t&&n.setState({userPins:e.resource_response.data})})),q.a.create("ShowcaseResource",{username:e,page_size:2,isPrefetch:!1}).callGet().then((function(e){t&&n.setState({showcase:e.resource_response.data})})),t&&n.setState({isLoaded:!0}))})),ie(oe(oe(n)),"handleScroll",(function(){clearTimeout(n.openTimeout),n.state.isMounted&&(n.setState({isVisible:!1}),n.forceUpdate())})),ie(oe(oe(n)),"timeoutDismiss",(function(){n.dismissTimeout=setTimeout((function(){n.state.isMounted&&(n.setState({isHovering:!1,isVisible:!1}),clearTimeout(n.openTimeout))}),ce)})),ie(oe(oe(n)),"handleDisplayCard",(function(){var e=n.props,t=e.isDarkPromoter,r=e.pinId,o=e.requestContext,i=e.viewParameter,a=n.state,c=a.currentPinId,l=a.isLoaded,u=a.isMounted;clearTimeout(n.openTimeout),clearTimeout(n.dismissTimeout),r&&c!==r&&n.forceUpdate(),r&&n.setState({isHovering:!0,currentPinId:r});var s=new J.b(o,"web_avatar_hover_cards_v2");156!==i&&0!==i||t||!(s.check("enabled")||s.check("enabled2_vertical")||s.check("enabled2_horizontal"))?u&&n.setState({isVisible:!1}):(l||n.loadUser(),n.openTimeout=setTimeout((function(){u&&n.setState({isVisible:!0})}),ae))})),ie(oe(oe(n)),"handleHideCard",(function(){n.timeoutDismiss()})),n.state={currentPinId:e.pinId,detailedUser:null,isHovering:!1,isMounted:!1,isLoaded:!1,isVisible:!1,showcase:null,user:null,userPins:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.user,r=t.detailedUser;return{user:ee({},Boolean(n)?n:{},Boolean(r)?r:{})}}}],(r=[{key:"componentDidMount",value:function(){this.setState({isMounted:!0}),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.setState({isMounted:!1}),clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.avatarSize,n=e.children,r=e.requestContext,a=e.username,c=e.viewer,l=e.viewParameter,u=e.viewType,s=this.state,p=s.isVisible,d=s.showcase,f=s.user,m=s.userPins,y=f||{},h=y.about,b=y.domain_url,v=y.follower_count,w=y.full_name,O=y.id,_=y.image_medium_url,E=y.show_creator_profile,S=y.verified_identity,P=c.id===O,C=!!S&&S.verified,T=new J.b(r,"web_avatar_hover_cards_v2").checkWithNoActivation("enabled2_horizontal");return o.a.createElement(i.c,{onMouseOver:this.handleDisplayCard,onFocus:this.handleDisplayCard,onMouseLeave:this.handleHideCard},o.a.createElement(i.c,{marginLeft:-2,marginRight:-2,paddingX:2,position:"relative"},o.a.createElement(i.c,{height:t,left:!0,marginLeft:2,position:"absolute",ref:this.anchorRef,top:!0,width:t}),n),!P&&!!f&&!!a&&p&&o.a.createElement(i.c,null,o.a.createElement(Q.a,null,o.a.createElement(i.r,null,o.a.createElement(Y,{anchor:this.anchorRef.current,isHorizontalDesign:T},o.a.createElement(i.c,{color:"white",dangerouslySetInlineStyle:{__style:{zIndex:W.a}},onFocus:this.handleDisplayCard,onMouseOver:this.handleDisplayCard,onMouseLeave:this.handleHideCard,position:"relative",width:"100%"},o.a.createElement(i.c,{width:"100%"},o.a.createElement(g,{isHorizontalDesign:T,userPins:m,showcase:d}),o.a.createElement(V,{avatarUrl:_,description:h,domainUrl:b,followerCount:v,id:O,isCreator:E,isHorizontalDesign:T,isVerified:C,userFullName:w,username:a,viewParameter:l,viewType:u}))))))))}}])&&te(n.prototype,r),a&&te(n,a),t}(r.PureComponent);t.a=Object(D.compose)(Z.e,X.a)(le)},xiPO:function(e,t,n){"use strict";n.r(t);var r=n("GyhR"),o=n.n(r),i=n("Mr4W"),a=n.n(i),c=n("Ivf5"),l=n("sl5z");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};u(this,e),s(this,"items",[]),this.items=t,this.getItemLayoutInfo=n},d=n("pvzZ"),f=n.n(d),m=n("PNko"),y=n.n(m),h=n("pp6x"),b=n.n(h),g=n("Q6EP"),v=n.n(g),w=200;var O=function(e){var t=e.layout,n=e.overscan,r=void 0===n?w:n,o=e.scrollContainerSize,i=e.scrollPosition,a=e.children,c=Math.max(0,i.top),l=Math.max(0,i.left),u=Math.min(Math.max(0,o.width+i.left),o.width),s=Math.min(Math.max(0,o.height+i.top),o.height),d=c-r,f=c+s+r,m=l-r,y=l+u+r,h=t.items.filter((function(e){var n=t.getItemLayoutInfo(e);if(!n)return!1;var r=n.size,o=n.position;return!r||!o||o.top+r.height>=d&&o.top<=f&&o.left+r.width>=m&&o.left<=y})),b=new p(h,t.getItemLayoutInfo);return b.size=t.size,b.contentFilledSize=t.contentFilledSize,b.isMeasuring=t.isMeasuring,a(b,t.size?t.size:void 0)};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,n=!(o=(e=P(t)).call.apply(e,[this].concat(a)))||"object"!==_(o)&&"function"!=typeof o?T(r):o,I(T(T(n)),"itemSizeCache",new WeakMap),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.componentDidRender()}},{key:"shouldComponentUpdate",value:function(e){var t=e.customSize,n=e.layout,r=this.props,o=r.customSize,i=r.layout;if(!v()(o,t))return!0;if(n.items.length!==i.items.length)return!0;if(n.items.some((function(e,t){return e!==i.items[t]})))return!0;var a=n.items.map(n.getItemLayoutInfo),c=i.items.map(i.getItemLayoutInfo);return!(!a.some((function(e,t){return e!==c[t]}))||!a.some((function(e,t){return!v()(e,c[t])})))}},{key:"componentDidUpdate",value:function(){this.componentDidRender()}},{key:"componentDidRender",value:function(){var e=this.props.onRenderedItems;e&&e(this.itemSizeCache),this.itemSizeCache=new WeakMap}},{key:"measureItem",value:function(e,t){t&&this.itemSizeCache.set(e,{width:t.clientWidth||0,height:t.clientHeight||0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.renderItem,o=t.layout,i=t.customSize,a=t.itemsToMeasureLimit,c=[],l=[];o.items.forEach((function(t,i){var u=o.getItemLayoutInfo(t);if(u){var s="number"==typeof u.customIndex?u.customIndex:i,p="item-".concat(s);if(!u.size&&c.length<(a||1/0)){var d=n({item:t,index:s,isMeasuring:!0,constraints:u.constraints});c.push(r.createElement("div",{className:"Collection-Item Collection-Item-Measuring",style:E({pointerEvents:"none",position:"absolute",visibility:"hidden",top:-9999,left:-9999},u.constraints),key:p,ref:function(n){return e.measureItem(t,n)}},d))}if(u.position){var f=n({item:t,index:s,isMeasuring:!1,constraints:u.constraints});if(!u.position)return;l.push(r.createElement("div",{className:"Collection-Item",style:E({position:"absolute",top:0,left:0,transform:"translate(".concat(u.position.left,"px, ").concat(u.position.top,"px)")},u.size),key:p},f))}}}));var u=i||o.size;return r.createElement("div",{style:E({position:"relative"},u),className:"Collection"},c,l)}}])&&S(n.prototype,o),i&&S(n,i),t}(r.Component);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){return e.filter((function(e){return!!e}))},B=function(e,t){var n=new WeakMap,r=!1;return e.items.forEach((function(o){var i=e.getItemLayoutInfo(o),a=t.get(o);i&&a&&!v()(i.size,a)&&(n.set(o,L({},i,{size:a})),r=!0)})),r?new p(e.items,(function(t){return n.get(t)||e.getItemLayoutInfo(t)})):e},U=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return o=this,i=(e=R(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==k(i)&&"function"!=typeof i?D(o):i,M(D(D(n)),"state",{items:[],scrollContainerSize:n.props.scrollContainerSize,scrollPosition:n.props.scrollPosition,contentContainerSize:n.props.contentContainerSize,layout:n.props.initialLayout||new p}),M(D(D(n)),"contentContainerRef",r.createRef()),M(D(D(n)),"handleItemsRendered",(function(e){n.handleItemsRenderedAnimationFrame||(n.handleItemsRenderedAnimationFrame=requestAnimationFrame((function(){n.handleItemsRenderedAnimationFrame=null;var t=n.props,r=t.getItemLayoutOptions,o=t.layoutEngine,i=t.onLayoutUpdated,a=n.state,c=a.layout,l=a.items,u=a.contentContainerSize,s=B(c,e);if(c===s)i&&i(c);else{var p=o.buildLayout({containerSize:u,items:N(l),getItemLayoutOptions:r,previousLayout:s});n.setState({layout:p})}})))})),M(D(D(n)),"renderCollection",(function(e,t){var o=n.props,i=o.renderItem,a=o.itemsToMeasureLimit,c=o.scrollContainerSize,l=o.contentContainerSize,u="function"==typeof a?a({layout:e,scrollContainerSize:c,contentContainerSize:l}):a||1/0;return r.createElement(j,{renderItem:i,layout:e,onRenderedItems:n.handleItemsRendered,customSize:t,itemsToMeasureLimit:u})})),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,e),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.items,r=e.getItemLayoutOptions,o=e.layoutEngine,i=e.scrollContainerSize,a=e.scrollPosition,c=e.contentContainerSize,l=t.items,u=t.contentContainerSize,s=t.layout,p={scrollContainerSize:i,scrollPosition:a,items:n};return function(e,t){return e!==t&&(e.length!==t.length||!e.every((function(e,n){return e===t[n]})))}(l,n)||!v()(c,u)?L({layout:o.buildLayout({containerSize:c,items:N(n),getItemLayoutOptions:r,previousLayout:s}),contentContainerSize:c},p):p}}],(o=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.virtualize,r=this.state,o=r.layout,i=r.scrollPosition,a=r.scrollContainerSize,c=r.contentContainerSize,l=t.layout,u=t.scrollPosition,s=t.scrollContainerSize,p=t.contentContainerSize;return l!==o||!v()(p,c)||!v()(s,a)||!(!n||v()(u,i))}},{key:"componentWillUnmount",value:function(){this.handleItemsRenderedAnimationFrame&&cancelAnimationFrame(this.handleItemsRenderedAnimationFrame)}},{key:"getLayout",value:function(){return this.state.layout}},{key:"render",value:function(){var e=this.props,t=e.virtualize,n=e.virtualOverscan,o=this.state,i=o.layout,a=o.scrollPosition,c=o.scrollContainerSize,l=o.contentContainerSize,u=null;if(t&&c&&a){var s="function"==typeof n?n({layout:i,scrollContainerSize:c,contentContainerSize:l}):n||0;u=r.createElement(O,{layout:i,scrollContainerSize:c,scrollPosition:a,overscan:s},this.renderCollection)}else u=this.renderCollection(i);return r.createElement("div",{className:"LayoutRenderer"},u)}}])&&x(n.prototype,o),i&&x(n,i),t}(r.Component);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function V(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?q(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}M(U,"defaultProps",{virtualOverscan:function(e){var t=e.scrollContainerSize;return 2*Math.max(t.width,t.height)}});var X={Masonry:{overflowAnchor:"none"}},J=function(e){function t(){var e,n;z(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Q(q(q(n=V(this,(e=W(t)).call.apply(e,[this].concat(i))))),"layoutRendererRef",r.createRef()),Q(q(q(n)),"handleLayoutUpdated",(function(e){var t=n.props,r=t.onLayoutUpdated,o=t.scrollTracker;r&&r(e),o&&o.handleLayoutUpdated(e)})),n}return K(t,e),G(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollTracker,n=e.scrollContainerSize,r=e.scrollPosition;if(t){n&&t.handleContainerResized(n),r&&t.handleContainerScrolled(r);var o=this.layoutRendererRef.current?this.layoutRendererRef.current.getLayout():null;o&&t.handleLayoutUpdated(o)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,o=t.renderItem,i=t.getItemLayoutOptions,a=t.layoutEngine,c=t.initialLayout,l=t.virtualize,u=t.scrollContainerSize,s=t.scrollPosition,p=t.virtualOverscan,d=t.itemsToMeasureLimit;return r.createElement(f.a,{disableHeight:!0,className:"AutoSizer"},(function(t){var f={width:t.width||0,height:t.height||0};return r.createElement(U,{ref:e.layoutRendererRef,items:n,renderItem:o,getItemLayoutOptions:i,layoutEngine:a,onLayoutUpdated:e.handleLayoutUpdated,initialLayout:c,scrollContainerSize:u,scrollPosition:s,contentContainerSize:f,virtualize:l,virtualOverscan:p,itemsToMeasureLimit:d})}))}}]),t}(r.Component),Z=function(e){function t(){var e,n;z(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Q(q(q(n=V(this,(e=W(t)).call.apply(e,[this].concat(i))))),"windowScrollerRef",r.createRef()),Q(q(q(n)),"handleWindowScrollerResized",(function(e){var t=n.props.scrollTracker;t&&t.handleContainerResized(e)})),Q(q(q(n)),"handleWindowScrollerScrolled",(function(e){var t=e.scrollTop,r=e.scrollLeft,o=n.props.scrollTracker;o&&o.handleContainerScrolled({left:r,top:t})})),n}return K(t,e),G(t,[{key:"updatePosition",value:function(){this.windowScrollerRef.current&&this.windowScrollerRef.current.updatePosition()}},{key:"render",value:function(){var e=this,t=this.props.scrollContainer;return r.createElement(b.a,{scrollElement:t,ref:this.windowScrollerRef,onResize:this.handleWindowScrollerResized,onScroll:this.handleWindowScrollerScrolled},(function(t){var n=t.height,o=t.width,i=t.scrollTop,a=t.scrollLeft,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q(e,t,n[t])}))}return e}({},e.props,{scrollContainerSize:{height:n,width:o},scrollPosition:{left:a,top:i}});return r.createElement(J,c)}))}}]),t}(r.Component),$=function(e){function t(){var e,n;z(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Q(q(q(n=V(this,(e=W(t)).call.apply(e,[this].concat(i))))),"state",{mounted:!1}),Q(q(q(n)),"masonryWindowScrollerRef",r.createRef()),n}return K(t,e),G(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"updatePosition",value:function(){this.masonryWindowScrollerRef.current&&this.masonryWindowScrollerRef.current.updatePosition()}},{key:"render",value:function(){var e=this.props.scrollContainer,t=this.state.mounted;return r.createElement("div",{className:y()("Masonry",{"Masonry-Premount":!t}),style:X.Masonry},e?r.createElement(Z,Object.assign({ref:this.masonryWindowScrollerRef},this.props)):r.createElement(J,this.props))}}]),t}(r.PureComponent);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Q($,"defaultProps",{virtualize:!1});var te=2,ne=250,re=20,oe=!1,ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minCols=t&&"number"==typeof t.minCols?t.minCols:te,this.colWidth=t&&"number"==typeof t.colWidth?t.colWidth:ne,this.gutter=t&&"number"==typeof t.gutter?t.gutter:re,this.flexible=t&&"boolean"==typeof t.flexible?t.flexible:oe}var t,n,r;return t=e,r=[{key:"getColumnIndex",value:function(e){for(var t=0,n=0;n<e.length;n+=1)e[n]<e[t]&&(t=n);return t}}],(n=[{key:"getColumnInfo",value:function(e){var t,n=this.gutter,r=this.minCols,o=this.colWidth;if(!e||0===o)return{width:0,count:0};if(this.flexible){var i=Math.floor(e.width/o);t=Math.max(Math.floor((e.width-i*n)/o),r),e.width&&(o=Math.floor((e.width-(t+1)*n)/t))}else{var a=Math.floor((e.width+n)/(o+n));t=Math.max(a,r)}return{width:o,count:t}}},{key:"buildLayout",value:function(e){throw new Error("Subclasses must implement")}}])&&ee(t.prototype,n),r&&ee(t,r),e}();function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ue(e,t,n[t])}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pe(this,de(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),n=t,(r=[{key:"buildLayout",value:function(e){var n=this,r=e.containerSize,o=e.items,i=e.previousLayout,a=this.getColumnInfo(r),c=a.width,l=a.count,u=new Array(l).fill(0),s=new WeakMap,d=!1,f={width:0,height:0};o.forEach((function(e,r){var o=i?i.getItemLayoutInfo(e):void 0;if(l>0&&o&&o.size){var a=o.size;if(!a.width||!a.height)throw new Error("Items that have been measured should always have a width and height.");var p=t.getColumnIndex(u),m=u[p],y=m+(0===m?0:n.gutter),h=p*(c+n.gutter);s.set(e,le({},o,{size:le({},o.size,{width:c}),position:{left:h,top:y},customIndex:r})),u[p]=y+a.height,f.width<h+a.width&&(f.width=h+a.width),f.height<y+a.height&&(f.height=y+a.height)}else s.set(e,{constraints:{width:c}}),d=!0}));var m=new p(o,(function(e){return s.get(e)}));return m.size=f,m.contentFilledSize={width:f.width,height:Math.min.apply(Math,ce(u))},m.isMeasuring=d,m}}])&&se(n.prototype,r),o&&se(n,o),t}(ie);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),be(this,ge(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,(r=[{key:"buildLayout",value:function(e){for(var t=e.containerSize,n=e.items,r=e.previousLayout,o=this.getColumnInfo(t),i=o.width,a=o.count,c=new WeakMap,l=0,u=[],s=0,d=0,f=!1,m={width:0,height:0},y=0,h=0;h<n.length;h+=1){var b=n[h],g=r?r.getItemLayoutInfo(b):void 0;if(a>0&&g&&g.size){var v=g.size;if(!v.width||!v.height)throw new Error("Items that have been measured should always have a width and height.");if(u[s%a]={item:b,itemLayoutInfo:g},v.height>d&&(d=v.height),u.length===a||h===n.length-1){for(var w=0;w<u.length;w+=1){var O=u[w],_=O.itemLayoutInfo,E=_.size,S=_.constraints;if(!E||!S)throw new Error("Row entries must already have sizes and constraints.");c.set(O.item,{size:{width:i,height:E.height},position:{left:w*(i+this.gutter),top:l},constraints:S,customIndex:h})}u.length===a&&(y=l+d),l+=d+this.gutter,u=[],d=0}s+=1}else c.set(b,{constraints:{width:i}}),f=!0}var P=new p(n,(function(e){return c.get(e)}));return P.size=m,P.contentFilledSize={width:m.width,height:y},P.isMeasuring=f,P}}])&&he(n.prototype,r),o&&he(n,o),t}(ie),Oe=n("OLQZ"),_e=n.n(Oe);function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=function(e){return 2*e.containerSize.height},Ce=100,Te=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Se(this,"isMeasuring",!1),Se(this,"isFetching",!1),Se(this,"fetchMoreIfReady",_e()((function(){n.isMeasuring||n.isFetching||n.scrollPosition&&n.containerSize&&n.layoutSize&&(n.scrollPosition.top+n.containerSize.height+("function"==typeof n.fetchOverscan?n.fetchOverscan({layoutSize:n.layoutSize,scrollPosition:n.scrollPosition,containerSize:n.containerSize}):n.fetchOverscan)<n.layoutSize.height||(n.isFetching=!0,n.fetchMore()))}),Ce)),this.fetchMore=t,this.fetchOverscan=r}var t,n,r;return t=e,(n=[{key:"handleLayoutUpdated",value:function(e){(!this.items||this.items&&this.items.length!==e.items.length)&&(this.isFetching=!1),this.layoutSize=e.size,this.isMeasuring=!!e.isMeasuring,this.items=e.items,this.fetchMoreIfReady()}},{key:"handleContainerResized",value:function(e){this.containerSize=e,this.fetchMoreIfReady()}},{key:"handleContainerScrolled",value:function(e){this.scrollPosition=e,this.fetchMoreIfReady()}}])&&Ee(t.prototype,n),r&&Ee(t,r),e}(),Ie=n("Wiy7");function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),e}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=Object(Ie.c)((function(e){return function(t){var n=t.containerSize;return Math.max(0,2*n.height+e)}})),Ne=function(e){return.7*e.scrollContainerSize.height},Be=function(e){function t(e){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=ke(t).call(this,e),n=!i||"object"!==je(i)&&"function"!=typeof i?De(o):i,Le(De(De(n)),"getScrollTracker",Object(Ie.d)((function(e,t){var r=Me(t);return"function"==typeof e?new Te(n.fetchMore,r):void 0}))),Le(De(De(n)),"getItemsToMeasureLimit",(function(e){var t=e.contentContainerSize,r=n.props.items,o=n.state,i=o.layoutEngine,a=o.initialItemCount;return r.length===a?1/0:i.getColumnInfo(t).count})),Le(De(De(n)),"masonryRef",r.createRef()),Le(De(De(n)),"fetchMore",(function(){return new Promise((function(e){var t=n.props,r=t.items,o=t.loadItems;"function"==typeof o?setTimeout((function(){o({from:r.length}),e(!0)})):e(!1)}))})),Le(De(De(n)),"handleLayoutUpdated",(function(e){n.state.measurementStore.layout=e})),Le(De(De(n)),"renderItem",(function(e){var t=e.item,o=e.index,i=e.isMeasuring,a=e.constraints,c=n.props.comp;return r.createElement(c,{data:t,itemIdx:o,isMeasuring:i,constraints:a})}));var a=e.minCols,c=e.columnWidth,l=e.gutterWidth,u=e.flexible,s=e.layout,d=e.measurementStore,f=e.items,m=d||t.createMeasurementStore(),y=t.layoutOptionsToLayoutEngine({layout:s,minCols:a,columnWidth:c,gutterWidth:l,flexible:u});return m.layout=new p(f,m.layout.getItemLayoutInfo),n.state={nonce:0,layoutEngine:y,measurementStore:m,initialItemCount:f.length},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,e),Re(t,null,[{key:"getDerivedStateFromProps",value:function(e){var n=e.layout,r=e.minCols,o=e.columnWidth,i=e.gutterWidth,a=e.flexible;return{layoutEngine:t.layoutOptionsToLayoutEngine({layout:n,minCols:r,columnWidth:o,gutterWidth:i,flexible:a})}}}]),Re(t,[{key:"updatePosition",value:function(){this.masonryRef.current&&this.masonryRef.current.updatePosition()}},{key:"reflow",value:function(){this.state.measurementStore.layout=new p,this.setState((function(e){return{nonce:e.nonce+1}}))}},{key:"render",value:function(){var e,t=this.props,n=t.fetchBoundsOffset,o=t.getItemLayoutOptions,i=t.items,a=t.loadItems,c=t.scrollContainer,l=t.virtualize,u=this.state,s=u.layoutEngine,p=u.measurementStore,d=u.nonce,f=this.getScrollTracker(a,n);return r.createElement($,{key:"Masonry-".concat(d),ref:this.masonryRef,items:i,renderItem:this.renderItem,getItemLayoutOptions:o,layoutEngine:s,scrollContainer:(e=c,e?"function"==typeof e?e():e:"undefined"!=typeof window?window:null),scrollTracker:f,onLayoutUpdated:this.handleLayoutUpdated,initialLayout:p.layout,virtualize:l,virtualOverscan:Ne,itemsToMeasureLimit:this.getItemsToMeasureLimit})}}]),t}(r.PureComponent);Le(Be,"createMeasurementStore",(function(){return{layout:new p}})),Le(Be,"defaultProps",{columnWidth:236,fetchBoundsOffset:0,layout:"default",minCols:3,virtualize:!1}),Le(Be,"layoutOptionsToLayoutEngine",Object(Ie.c)((function(e){var t=e.layout,n=e.minCols,r=e.columnWidth,o=e.gutterWidth,i=e.flexible;return new("uniformRow"===t?we:me)({minCols:n,colWidth:r,gutter:o,flexible:i})})));var Ue=n("UmN8"),Fe=n("+U6O"),ze=n("k9eC"),He=n("2YES"),Ge=n("plGG"),Ve=n("3KWM");function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Je=function(e,t,n){for(var r=Object(Ve.k)(t),o=Ve.e+e,i="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute;\n  visibility: hidden;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n",a=n;a<r+1;a+=1){i+="\n@media (min-width: ".concat(a===n?0:a*o,"px) and (max-width: ").concat((a+1)*o-1,"px) {\n  .gridCentered {\n    width: ").concat(a*o,"px;\n  }\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+").concat(a,"),\n  .gridCentered .static:nth-child(-n+").concat(a,") {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n}\n")}return i},Ze=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return r=this,i=(e=Ye(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==We(i)&&"function"!=typeof i?Qe(r):i,Xe(Qe(Qe(n)),"masonryRef",o.a.createRef()),Xe(Qe(Qe(n)),"renderItem",(function(e){var t=n.props.comp,r=n.getGutters(),i=r.gutterWidth,a=r.paddingBottom;return o.a.createElement("div",{style:{paddingBottom:a,paddingLeft:i/2,paddingRight:i/2}},o.a.createElement(t,e))})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){var t=this.masonryRef;this.props.widthOffset!==e.widthOffset&&!this.props.useMasonry9&&t.current&&t.current.handleResize&&t.current.handleResize()}},{key:"getGutters",value:function(){var e,t=this.props,n=t.gutterWidth,r=t.paddingStyle;return{gutterWidth:e="simplified"===r?24:"lego"===r?16:n,paddingBottom:"image-only"===r?20:"dense"===r?6:"match-gutter"===r?e:"lego"===r?16:28}}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.columnWidth,i=n.fetchBoundsOffset,a=n.flexible,c=n.items,l=n.loadItems,u=n.masonryRef,s=n.measurementStore,p=n.scrollContainer,d=n.serverRender,f=n.useMasonry9,m=n.virtualize,y=n.isGridCentered,h=n.minCols,b=this.getGutters().gutterWidth,g=null;return g=f?o.a.createElement(Be,{columnWidth:r+b,gutterWidth:0,comp:this.renderItem,minCols:h,ref:function(e){t.masonryRef.current=e,u&&(u.current=e)},items:c,flexible:a,loadItems:l,measurementStore:s,scrollContainer:p,virtualize:m,fetchBoundsOffset:i}):o.a.createElement(Fe.v,{columnWidth:r+b,gutterWidth:0,comp:this.renderItem,minCols:h,ref:function(e){t.masonryRef.current=e,u&&(u.current=e)},items:c,flexible:a,loadItems:l,measurementStore:s,scrollContainer:p,virtualize:m}),y&&(e="gridCentered"),o.a.createElement("div",{className:e},d&&o.a.createElement(Ge.a,{unsafeCSS:Je(b,c.length,h||Ve.g)}),o.a.createElement("div",null,g))}}])&&Ke(n.prototype,r),i&&Ke(n,i),t}(r.Component);Xe(Ze,"defaultProps",{gutterWidth:14,useMasonry9:!1,paddingStyle:"default",isGridCentered:!0,minCols:Ve.g});var $e=function(e){return e&&"pin"===e.type},et=n("lixz");function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"mapStateToProps",(function(){return ft})),n.d(t,"mapDispatchToProps",(function(){return mt})),n.d(t,"MasonryPerfTimingDefault",(function(){return yt}));var lt={},ut=function(e,t){if(null!=e)return lt[e]&&lt[e].screenWidth===window.innerWidth||(lt[e]={screenWidth:window.innerWidth,cache:t?Be.createMeasurementStore():Fe.v.createMeasurementStore()}),lt[e].cache},st="undefined"!=typeof window?function(){return window}:void 0,pt=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=ot(t).call(this,e),n=!i||"object"!==tt(i)&&"function"!=typeof i?at(r):i,ct(at(at(n)),"isRecordingLoadItemMetrics",!1),ct(at(at(n)),"loadItems",(function(){n.props.isFetching||(Object(et.g)(12),Object(et.d)({name:"GridBottomSpinnerStartedTraceEvent"}),n.isRecordingLoadItemMetrics=!0,n.props.loadItems())})),ct(at(at(n)),"renderItem",(function(e){var t=n.props.comp;return o.a.createElement(l.a,{name:"MasonryPerfTimingItem"},o.a.createElement(t,e))})),Object(et.d)({name:"MasonryConstructor"}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isFetching,n=e.saveRoutePins,r=window.innerHeight,o=document.querySelector("img[srcset]");if(o){var i=o.getBoundingClientRect()&&o.getBoundingClientRect().top;this.gridVisibleHeight=r&&r-i}Object(et.d)({name:"MasonryDidMount"}),Object(et.d)({name:"PageLoadRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:a.a.findDOMNode(this)}),t||(Object(et.d)({name:"UserNavRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:a.a.findDOMNode(this)}),Object(et.d)({name:"UserNavRegisterGridItemsPositionedTraceEvent"}),Object(et.h)(3),Object(et.h)(2),Object(et.h)(102)),n&&this.updateRoutePins()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.saveRoutePins,r=t.items,o=t.viewParameterType;this.isRecordingLoadItemMetrics&&!this.props.isFetching&&(this.isRecordingLoadItemMetrics=!1,Object(et.h)(12,{viewParameter:o}),Object(et.d)({name:"GridBottomSpinnerStoppedTraceEvent"})),this.props.isFetching||(Object(et.d)({name:"UserNavRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:a.a.findDOMNode(this)}),Object(et.d)({name:"UserNavRegisterGridItemsPositionedTraceEvent"}),Object(et.h)(3),Object(et.h)(2),Object(et.h)(102)),this.checkViewportFilled()&&Object(et.d)({name:"PageLoadRegisterGridImagesTraceEvent",gridData:this.props.itemsNormalizedTracing||this.props.items,el:a.a.findDOMNode(this),viewportFilled:!0}),n&&r!==e.items&&this.updateRoutePins()}},{key:"updateRoutePins",value:function(){var e=this.props,t=e.currentHistoryEntry,n=e.setRoutePins,r=e.items;t&&r&&n(r.filter($e).map((function(e){return e.id})),t.location)}},{key:"checkViewportFilled",value:function(){var e=this.props,t=e.cacheKey,n=e.useMasonry9,r=ut(t,n);if(r&&this.gridVisibleHeight)if(n){if(r.layout&&r.layout.contentFilledSize)return r.layout.contentFilledSize.height>this.gridVisibleHeight}else if(r.columnHeights)return Math.min.apply(Math,nt(r.columnHeights))>this.gridVisibleHeight;return!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.cacheKey,r=t.columnWidth,i=t.fetchBoundsOffset,a=t.flexible,c=t.gutterWidth,l=t.items,u=t.masonryRef,s=t.paddingStyle,p=t.scrollContainer,d=t.serverRender,f=t.useMasonry9,m=t.virtualize,y=t.widthOffset,h=t.isGridCentered,b=t.minCols;return o.a.createElement(Ue.a,{name:"web_grid_immersive"},(function(t){var g=t.anyEnabled,v=t.group,w=g&&"enabled_all_grids_old_gutters"!==v&&"dense"!==s?"lego":s;return o.a.createElement(Ze,{columnWidth:r,comp:e.renderItem,fetchBoundsOffset:i,flexible:a,gutterWidth:c,items:l,loadItems:e.loadItems,masonryRef:u,measurementStore:ut(n,f),paddingStyle:w,scrollContainer:p||st,serverRender:d,useMasonry9:f,virtualize:m,widthOffset:y,isGridCentered:h,minCols:b})}))}}])&&rt(n.prototype,r),i&&rt(n,i),t}(r.Component);function dt(e){var t=Object(He.d)(),n=e.useMasonry9||new ze.c(t,"web_masonry9").enabled(),r=e.fetchBoundsOffset||(n?100:0);return o.a.createElement(pt,Object.assign({},e,{useMasonry9:n,fetchBoundsOffset:r}))}ct(pt,"defaultProps",{saveRoutePins:!1,serverRender:!0,useMasonry9:!1,isGridCentered:!0}),dt.displayName="MasonryPerfTiming";var ft=function(e,t){var n=e.pins,r=e.history,o=t.mapPinUrlsToItems,i=t.items;return{currentHistoryEntry:r.current,itemsNormalizedTracing:o?o(n,i):null}},mt=function(e){return{setRoutePins:function(t,n){return e(function(e,t){return{type:"SET_ROUTE_PINS",payload:{location:t,routePins:e}}}(t,n))}}},yt=Object(c.connect)(ft,mt)(pt);t.default=Object(c.connect)(ft,mt)(dt)},yJaP:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("hMaQ"),o=Object(r.c)(),i=o.Provider,a=(o.Consumer,o.useHook)},yXM0:function(e,t,n){"use strict";function r(e){var t=Math.round(e/1e3),n=t%60;return Math.floor(t/60)+":"+(n<10?"0":"")+n}n.d(t,"a",(function(){return r}))},ykrh:function(e,t,n){"use strict";var r=n("GyhR"),o=n("Qo1m"),i=n("+U6O");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,o=(e=u(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==a(o)&&"function"!=typeof o?p(r):o,d(p(p(n)),"state",{isHovering:!1}),d(p(p(n)),"handleMouseEnter",(function(){return n.setState({isHovering:!0})})),d(p(p(n)),"handleMouseLeave",(function(){return n.setState({isHovering:!1})})),n}var n,f,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(f=[{key:"render",value:function(){var e=this.props,t=e.forwardedRef,n=e.icon,a=e.onClick,l=e.onMouseDown,u=e.onMouseUp,s=e.selected,p=e.style,d=e.text,f=e.x,m=e.y,y=e.zIndex,h=e.backdropDiameter,b=void 0===h?32:h,g=e.dotDiameter,v=void 0===g?16:g,w=this.state.isHovering?b+4:b,O={zIndex:y,position:"absolute",top:m-w/2,left:f-w/2,outline:"none"},_={backgroundColor:"rgba(0, 0, 0, 0.1)",width:w,height:w,border:"none",borderRadius:w,cursor:a?"pointer":"default"},E={backgroundColor:"#fff",boxShadow:s?"0 0 0 3px #e60023":"none",width:v,height:v,border:"none",borderRadius:v,position:"absolute",top:(w-v)/2,left:(w-v)/2,padding:0,display:"flex",alignItems:"center",justifyContent:"center"};return r.createElement("div",{onClick:a,onKeyPress:a,onMouseDown:l,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:u,ref:t,role:"button",style:O,tabIndex:"0"},r.createElement("div",{style:c({},_,p)},r.createElement("div",{style:E},!!d&&r.createElement(i.K,{align:"center",color:"darkGray",size:"xs",bold:!0,inline:!0},d),n&&r.createElement(i.n,{accessibilityLabel:o.a._("Tag anchor","accessibility label for an anchor for an object in a pin"),color:"red",icon:n,size:v/2,inline:!0}))))}}])&&l(n.prototype,f),m&&l(n,m),t}(r.Component);t.a=r.forwardRef((function(e,t){return r.createElement(f,Object.assign({},e,{forwardedRef:t}))}))},zBQm:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"i",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return p})),n.d(t,"j",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m}));var i=function(e){return!!e&&e.video_list},a=function(e,t){var n=e||t&&t.embed;return n&&n.src&&!n.type},c=function(e){return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products.length>0},l=function(e){return!!e.promoter&&!e.is_downstream_promotion},u=function(e){var t=e.embed||e.attribution&&e.attribution.embed||null;return t&&"gif"===t.type},s=function(e){return!!e.video_status&&5!==e.video_status},p=function(e,t){return"/pin/".concat(e,t?"/analytics":"/")},d=function(e,t){var n=r({},t.organicVideosAutoplaying,t.promotedVideosAutoplaying);return!!n[e]&&!n[e].paused},f=function(e,t){var n=r({},t.organicVideosAutoplaying,t.promotedVideosAutoplaying);for(var o in n){var i=n[o].paused;if(o!==e&&!i)return!1}return!0},m=function(e,t){var n=r({},t.organicVideosAutoplaying,t.promotedVideosAutoplaying);return n[e]&&n[e].currentTime}},zJLp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNodeList=l,t.setElement=function(e){var t=e;if("string"==typeof t&&a.canUseDOM){var n=document.querySelectorAll(t);l(n,t),t="length"in n?n[0]:n}return c=t||c},t.validateElement=u,t.hide=function(e){u(e)&&(e||c).setAttribute("aria-hidden","true")},t.show=function(e){u(e)&&(e||c).removeAttribute("aria-hidden")},t.documentNotReadyOrSSRTesting=function(){c=null},t.resetForTesting=function(){c=null};var r,o=n("gski"),i=(r=o)&&r.__esModule?r:{default:r},a=n("fGtH");var c=null;function l(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function u(e){return!(!e&&!c)||((0,i.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),!1)}}},0,[10,17,44,"PinBetterSaveCommon",36,"PinSaveButtonCommon","PinRepEditButtonCommon","NuxOneClickSaveButtonCommon","PinPromoteButtonCommon","PinRepSendShareFlyoutButtonCommon","PinRepSendShareLinkButtonCommon"]]);
//# sourceMappingURL=pjs-FlashlightPageDesktop-e17728cf1a9e617244fc.js.map
